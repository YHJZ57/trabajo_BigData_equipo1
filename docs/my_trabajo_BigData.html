<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Yutao Henry Jiang Zheng (yujiangz@alumni.uv.es)">
<meta name="author" content="Lucas Osejo Martínez (luomar2@alumni.uv.es)">
<meta name="author" content="Javier Arnau Basagoiti Montagut (jabamon@alumni.uv.es)">
<title>El tráfico marítimo de Colombia</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./https://c1.klipartz.com/pngpicture/815/839/sticker-png-boat-ship-sign-symbol-ferry-transport-sailing-ship-sailboat.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-f54fa83ccd8f86fe7238c9291c42d766.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-52cd0a60e4493476d297114792d47f64.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": true,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la busqueda",
    "search-hide-matches-text": "Esconder resultados adicionales",
    "search-more-match-text": "hay más resultados en este documento",
    "search-more-matches-text": "más resultados en este documento",
    "search-clear-button-title": "Borrar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script><style>html{ scroll-behavior: smooth; }</style>
<style>

      .quarto-title-block .quarto-title-banner h1,
      .quarto-title-block .quarto-title-banner h2,
      .quarto-title-block .quarto-title-banner h3,
      .quarto-title-block .quarto-title-banner h4,
      .quarto-title-block .quarto-title-banner h5,
      .quarto-title-block .quarto-title-banner h6
      {
        color: skyblue3;
      }

      .quarto-title-block .quarto-title-banner {
        color: skyblue3;
background-image: url(imagenes/Banner_puerto.jpg);
background-size: cover;
      }
</style>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="site_libs/datatables-binding-0.34.0/datatables.js"></script><script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script><link href="site_libs/crosstalk-1.2.2/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.2/js/crosstalk.min.js"></script><script src="site_libs/plotly-binding-4.11.0/plotly.js"></script><script src="site_libs/typedarray-0.1/typedarray.min.js"></script><link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script><link rel="shortcut icon" href="https://c1.klipartz.com/pngpicture/815/839/sticker-png-boat-ship-sign-symbol-ferry-transport-sailing-ship-sailboat.png">
<link rel="stylesheet" href="assets/styles.css">
</head>
<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="https://c1.klipartz.com/pngpicture/815/839/sticker-png-boat-ship-sign-symbol-ferry-transport-sailing-ship-sailboat.png" alt="" class="navbar-logo light-content"><img src="https://c1.klipartz.com/pngpicture/815/839/sticker-png-boat-ship-sign-symbol-ferry-transport-sailing-ship-sailboat.png" alt="" class="navbar-logo dark-content"></a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">El tráfico marítimo de Colombia</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Buscar"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Navegación de palanca" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item compact">
    <a class="nav-link" href="./index.html"> <i class="bi bi-house-door" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link active" href="./my_trabajo_BigData.html" aria-current="page"> 
<span class="menu-text">Trabajo en equipo</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./my_slides_BigData.html" target="_blank"> 
<span class="menu-text">Slides</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:<yujiangz@alumni.uv.es>"> <i class="bi bi-envelope" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
</div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><header id="title-block-header" class="quarto-title-block default page-columns page-full"><div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-page-left">
      <div class="quarto-title-block"><div><h1 class="title">El tráfico marítimo de Colombia</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Código</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Enseñar el código</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Esconder el código</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">Ver el código</a></li></ul></div></div>
                                <div class="quarto-categories">
                <div class="quarto-category">trabajo BigData</div>
                <div class="quarto-category">Tráfico Marítimo</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta column-page-left">

      <div>
      <div class="quarto-title-meta-heading">Autores/as</div>
      <div class="quarto-title-meta-contents">
               <p>Yutao Henry Jiang Zheng (yujiangz@alumni.uv.es) </p>
               <p>Lucas Osejo Martínez (luomar2@alumni.uv.es) </p>
               <p>Javier Arnau Basagoiti Montagut (jabamon@alumni.uv.es) </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Fecha de Publicación</div>
      <div class="quarto-title-meta-contents">
        <p class="date">2 de diciembre de 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Índice</h2>
   
  <ul>
<li><a href="#introducci%C3%B3n" id="toc-introducción" class="nav-link active" data-scroll-target="#introducci%C3%B3n">1. Introducción</a></li>
  <li><a href="#datos" id="toc-datos" class="nav-link" data-scroll-target="#datos">2. Datos</a></li>
  <li><a href="#mapa-de-los-principales-puertos" id="toc-mapa-de-los-principales-puertos" class="nav-link" data-scroll-target="#mapa-de-los-principales-puertos">3. Mapa de los Principales Puertos</a></li>
  <li>
<a href="#sistema-portuario-nacional-un-desaf%C3%ADo-geogr%C3%A1fico" id="toc-sistema-portuario-nacional-un-desafío-geográfico" class="nav-link" data-scroll-target="#sistema-portuario-nacional-un-desaf%C3%ADo-geogr%C3%A1fico">4. Sistema portuario nacional: Un desafío Geográfico</a>
  <ul class="collapse">
<li><a href="#por-qu%C3%A9-existe-este-desequilibrio" id="toc-por-qué-existe-este-desequilibrio" class="nav-link" data-scroll-target="#por-qu%C3%A9-existe-este-desequilibrio">¿Por qué existe este desequilibrio?</a></li>
  <li>
<a href="#an%C3%A1lisis-gr%C3%A1fico-y-exploratorio" id="toc-análisis-gráfico-y-exploratorio" class="nav-link" data-scroll-target="#an%C3%A1lisis-gr%C3%A1fico-y-exploratorio">4.1. Análisis Gráfico y Exploratorio</a>
  <ul class="collapse">
<li><a href="#evoluci%C3%B3n-del-volumen-de-carga-top-puertos" id="toc-evolución-del-volumen-de-carga-top-puertos" class="nav-link" data-scroll-target="#evoluci%C3%B3n-del-volumen-de-carga-top-puertos">4.1.1. Evolución del volumen de carga (Top Puertos)</a></li>
  <li><a href="#comparativa-caribe-vs-pac%C3%ADfico" id="toc-comparativa-caribe-vs-pacífico" class="nav-link" data-scroll-target="#comparativa-caribe-vs-pac%C3%ADfico">4.1.2. Comparativa: Caribe vs Pacífico</a></li>
  <li><a href="#naturaleza-del-tr%C3%A1fico-nacional-o-internacional" id="toc-naturaleza-del-tráfico-nacional-o-internacional" class="nav-link" data-scroll-target="#naturaleza-del-tr%C3%A1fico-nacional-o-internacional">4.1.3. Naturaleza del Tráfico: Nacional o Internacional?</a></li>
  </ul>
</li>
  </ul>
</li>
  <li>
<a href="#tipos-de-barcos-que-llegan" id="toc-tipos-de-barcos-que-llegan" class="nav-link" data-scroll-target="#tipos-de-barcos-que-llegan">5. Tipos de barcos que llegan</a>
  <ul class="collapse">
<li>
<a href="#tipo-de-barcos-de-carga-que-llegan-a-puertos-colombianos" id="toc-tipo-de-barcos-de-carga-que-llegan-a-puertos-colombianos" class="nav-link" data-scroll-target="#tipo-de-barcos-de-carga-que-llegan-a-puertos-colombianos">5.1 Tipo de barcos de carga que llegan a puertos colombianos</a>
  <ul class="collapse">
<li><a href="#tipo-de-barcos-de-carga-que-llegan-a-puertos-colombianos-por-costa" id="toc-tipo-de-barcos-de-carga-que-llegan-a-puertos-colombianos-por-costa" class="nav-link" data-scroll-target="#tipo-de-barcos-de-carga-que-llegan-a-puertos-colombianos-por-costa">5.1.1. Tipo de barcos de carga que llegan a puertos colombianos por costa</a></li>
  </ul>
</li>
  </ul>
</li>
  <li><a href="#evoluci%C3%B3n-de-la-carga-portuario" id="toc-evolución-de-la-carga-portuario" class="nav-link" data-scroll-target="#evoluci%C3%B3n-de-la-carga-portuario">6. Evolución de la carga portuario</a></li>
  </ul><div class="quarto-other-links"><h2>Otros Enlaces</h2><ul><li><a href="https://perezp44.github.io/intro-ds-25-26-web/"><i class="bi bi-link-45deg"></i>Web del curso</a></li><li><a href="https://perezp44.github.io/intro-ds-25-26-web/05-trabajos-estudiantes.html"><i class="bi bi-link-45deg"></i>Trabajos de mis compañeros</a></li><li><a href="https://github.com/YHJZ57/trabajo_BigData_equipo"><i class="bi bi-link-45deg"></i>Repo del trabajo</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block column-page-left" id="quarto-document-content"><section id="introducción" class="level1"><h1>1. Introducción</h1>
<p>El comercio marítimo es uno de los pilares más grandes de la economía colombiana y su sistema portuario es vital para su conexión global. En este trabajo realizamos un análisis profundo sobre el tráfico que atraviesa los principales puertos del país. Comenzamos examinando la geografía y distribución de los puertos clave, una visualización esencial para entender la marcada asimetría entre la Costa Caribe y el Pacífico. Posteriormente, el estudio se concentra en las operaciones, detallando la tipología de las embarcaciones que llegan y la composición del cargamento que se moviliza. Finalmente, interpretamos el desempeño económico del sistema a través del análisis de las importaciones y exportaciones, y se revisa su evolución temporal para obtener una perspectiva completa de la competitividad logística de Colombia.</p>
</section><section id="datos" class="level1"><h1>2. Datos</h1>
<p>Para realizar el trabajo utiilizamos los siguientes datos:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">Fuente de los datos</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">Datos usados</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false" href="">Paquetes utilizados</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false" href="">Codigo de los datos</a></li>
</ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>Los datos utilizados provienen de distintas fuentes, entre ellas la base pública “<a href="https://www.datos.gov.co/Transporte/Trafico-Portuario-Mar-timo-En-Colombia/5r3g-zv5z/about_data" target="_blank">Datos Abiertos</a>” de Colombia, la Superintendencia de Transporte (<a href="https://www.supertransporte.gov.co/index.php/superintendencia-delegada-de-puertos/estadisticas-trafico-portuario-en-colombia/" target="_blank">SuperTransporte</a>) y la Dirección General Marítima (<a href="https://www.dimar.mil.co/trafico-maritimo" target="_blank">DIMAR</a>).</p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<ul>
<li>df_TM_Puerto → Tráfico portuario por ciudad, incluye importaciones y exportaciones y<br>
diferencia entre público y privado</li>
<li>df_C.Arribo → La cantidad de arribos por puerto, diferencia entre nacional e internacional</li>
<li>df_tipoBarco → Los tipos de barcos que llega a cada puerto</li>
<li>df_TipoCarga → El tipo de cargamento que llega a cada puerto</li>
<li>df_CargaPuerto → La cantidad de movimiento de carga de cada puerto</li>
</ul>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell" data-layout-align="center">
<details open="" class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(rio) </span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="fu">library</span>(plotly)</span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="fu">library</span>(rnaturalearthdata)</span>
<span id="cb1-13"><a href="#cb1-13"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-15"><a href="#cb1-15"></a><span class="fu">library</span>(gifski)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<div class="cell" data-layout-align="center">
<details open="" class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>df_TM_Puerto <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"https://www.datos.gov.co/resource/5r3g-zv5z.csv"</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a>df_TM_Puerto <span class="ot">&lt;-</span> df_TM_Puerto<span class="sc">|&gt;</span><span class="fu">group_by</span>(zona_portuaria)<span class="sc">|&gt;</span><span class="fu">mutate</span>(<span class="at">Costa=</span><span class="fu">case_when</span>(zona_portuaria<span class="sc">%in%</span><span class="fu">c</span>(<span class="st">"BARRANCABERMEJA"</span>,<span class="st">"Z.P. RIO MAGDALENA"</span>)<span class="sc">~</span><span class="st">"Fluvial"</span>,zona_portuaria<span class="sc">%in%</span><span class="fu">c</span>(<span class="st">"BUENAVENTURA"</span>,<span class="st">"TUMACO"</span>)<span class="sc">~</span><span class="st">"Pacifico"</span>, <span class="at">.default=</span><span class="st">"Caribe"</span>))</span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a>df_C.Arribo <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"https://www.dimar.mil.co/sites/default/files/noticias/E1-FOR-117-Series-Historicas-trafico-maritimo-2018-2024.xlsx"</span>, </span>
<span id="cb2-5"><a href="#cb2-5"></a>                              <span class="at">col_names =</span> <span class="cn">FALSE</span>,</span>
<span id="cb2-6"><a href="#cb2-6"></a>                              <span class="at">sheet =</span> <span class="st">"Serie histórica 1"</span>,</span>
<span id="cb2-7"><a href="#cb2-7"></a>                              <span class="at">skip =</span> <span class="dv">10</span>)</span>
<span id="cb2-8"><a href="#cb2-8"></a>df_C.Arribo <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(df_C.Arribo)</span>
<span id="cb2-9"><a href="#cb2-9"></a>df_C.Arribo <span class="ot">&lt;-</span> df_C.Arribo <span class="sc">%&gt;%</span> tidyr<span class="sc">::</span><span class="fu">fill</span>(x1, <span class="at">.direction =</span> <span class="st">"down"</span>)</span>
<span id="cb2-10"><a href="#cb2-10"></a>df_C.Arribo <span class="ot">&lt;-</span> df_C.Arribo <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x1, <span class="st">"^Subtotal"</span>) )</span>
<span id="cb2-11"><a href="#cb2-11"></a>df_C.Arribo <span class="ot">&lt;-</span> df_C.Arribo <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x1, <span class="st">"^Total"</span>)  )</span>
<span id="cb2-12"><a href="#cb2-12"></a>df_C.Arribo <span class="ot">&lt;-</span> df_C.Arribo <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x1, <span class="st">"^Fuente."</span>))</span>
<span id="cb2-13"><a href="#cb2-13"></a>df_C.Arribo <span class="ot">&lt;-</span> df_C.Arribo <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x1, <span class="st">"^Nota"</span>) )</span>
<span id="cb2-14"><a href="#cb2-14"></a>df_C.Arribo <span class="ot">&lt;-</span> df_C.Arribo <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x3, <span class="st">"Arribo"</span>)) </span>
<span id="cb2-15"><a href="#cb2-15"></a>df_C.Arribo <span class="ot">&lt;-</span> df_C.Arribo <span class="sc">%&gt;%</span> janitor<span class="sc">::</span><span class="fu">remove_empty</span>(<span class="st">"rows"</span>)</span>
<span id="cb2-16"><a href="#cb2-16"></a>df_C.Arribo <span class="ot">&lt;-</span> df_C.Arribo <span class="sc">%&gt;%</span> tidyr<span class="sc">::</span><span class="fu">fill</span>(x2, <span class="at">.direction =</span> <span class="st">"down"</span>)</span>
<span id="cb2-17"><a href="#cb2-17"></a>my_anos <span class="ot">&lt;-</span> <span class="dv">2018</span><span class="sc">:</span><span class="dv">2024</span></span>
<span id="cb2-18"><a href="#cb2-18"></a>n_my_anos <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="dv">2018</span><span class="sc">:</span><span class="dv">2024</span>)</span>
<span id="cb2-19"><a href="#cb2-19"></a>meses <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"enero"</span>, <span class="st">"febrero"</span>, <span class="st">"marzo"</span>, <span class="st">"abril"</span>, <span class="st">"mayo"</span>, <span class="st">"junio"</span>,</span>
<span id="cb2-20"><a href="#cb2-20"></a>           <span class="st">"julio"</span>, <span class="st">"agosto"</span>, <span class="st">"septiembre"</span>, <span class="st">"octubre"</span>, <span class="st">"noviembre"</span>, <span class="st">"diciembre"</span>)</span>
<span id="cb2-21"><a href="#cb2-21"></a>zz1 <span class="ot">&lt;-</span> <span class="fu">rep</span>(my_anos, <span class="at">each =</span> (<span class="dv">12</span><span class="sc">+</span><span class="dv">1</span>)<span class="sc">*</span><span class="dv">2</span>) ; zz1 ; <span class="fu">length</span>(zz1)  </span>
<span id="cb2-22"><a href="#cb2-22"></a>zz2 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"internac"</span>, <span class="st">"nacional"</span>),  <span class="at">times =</span> n_my_anos <span class="sc">*</span> ((<span class="dv">12</span><span class="sc">+</span><span class="dv">1</span>)<span class="sc">*</span><span class="dv">2</span>)<span class="sc">/</span><span class="dv">2</span>) ; zz2; <span class="fu">length</span>(zz2)</span>
<span id="cb2-23"><a href="#cb2-23"></a>zz3a <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(meses, <span class="st">"total"</span>), <span class="at">each =</span> <span class="dv">2</span>) </span>
<span id="cb2-24"><a href="#cb2-24"></a>zz3b <span class="ot">&lt;-</span> <span class="fu">rep</span>(zz3a,  <span class="at">times =</span> n_my_anos) ; zz3b ; <span class="fu">length</span>(zz3b) </span>
<span id="cb2-25"><a href="#cb2-25"></a>zz4 <span class="ot">&lt;-</span> <span class="fu">paste</span>(zz2, zz3b, zz1, <span class="at">sep =</span> <span class="st">"_"</span>)  ; zz4; <span class="fu">length</span>(zz4)</span>
<span id="cb2-26"><a href="#cb2-26"></a>zz5 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"region"</span>, <span class="st">"puerto"</span>, zz4) ; <span class="fu">length</span>(zz5)</span>
<span id="cb2-27"><a href="#cb2-27"></a><span class="fu">names</span>(df_C.Arribo) <span class="ot">&lt;-</span> zz5 ; <span class="fu">length</span>(zz5)</span>
<span id="cb2-28"><a href="#cb2-28"></a>df_C.Arribo <span class="ot">&lt;-</span> df_C.Arribo <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>))</span>
<span id="cb2-29"><a href="#cb2-29"></a>df_C.Arribo <span class="ot">&lt;-</span> df_C.Arribo <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="dv">3</span><span class="sc">:</span><span class="fu">length</span>(df_C.Arribo))</span>
<span id="cb2-30"><a href="#cb2-30"></a>df_C.Arribo <span class="ot">&lt;-</span> df_C.Arribo <span class="sc">%&gt;%</span> </span>
<span id="cb2-31"><a href="#cb2-31"></a>  tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(<span class="at">col =</span> name, </span>
<span id="cb2-32"><a href="#cb2-32"></a>                              <span class="at">names =</span> <span class="fu">c</span>(<span class="st">"tipo"</span>, <span class="st">"mes"</span>, <span class="st">"year"</span>), </span>
<span id="cb2-33"><a href="#cb2-33"></a>                              <span class="at">delim =</span> <span class="st">"_"</span>)</span>
<span id="cb2-34"><a href="#cb2-34"></a>df_C.Arribo <span class="ot">&lt;-</span> df_C.Arribo <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">value =</span> <span class="fu">as.numeric</span>(value))</span>
<span id="cb2-35"><a href="#cb2-35"></a></span>
<span id="cb2-36"><a href="#cb2-36"></a>df_tipoBarco <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"https://www.dimar.mil.co/sites/default/files/noticias/E1-FOR-117-Series-Historicas-trafico-maritimo-2018-2024.xlsx"</span>, </span>
<span id="cb2-37"><a href="#cb2-37"></a>                              <span class="at">col_names =</span> <span class="cn">FALSE</span>,</span>
<span id="cb2-38"><a href="#cb2-38"></a>                              <span class="at">sheet =</span> <span class="st">"Serie histórica 2"</span>,</span>
<span id="cb2-39"><a href="#cb2-39"></a>                              <span class="at">skip =</span> <span class="dv">10</span>)</span>
<span id="cb2-40"><a href="#cb2-40"></a>df_tipoBarco <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(df_tipoBarco)</span>
<span id="cb2-41"><a href="#cb2-41"></a>df_tipoBarco <span class="ot">&lt;-</span> df_tipoBarco <span class="sc">%&gt;%</span> tidyr<span class="sc">::</span><span class="fu">fill</span>(x1, <span class="at">.direction =</span> <span class="st">"down"</span>)</span>
<span id="cb2-42"><a href="#cb2-42"></a>df_tipoBarco <span class="ot">&lt;-</span> df_tipoBarco <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x1, <span class="st">"^Subtotal"</span>) )</span>
<span id="cb2-43"><a href="#cb2-43"></a>df_tipoBarco <span class="ot">&lt;-</span> df_tipoBarco <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x1, <span class="st">"^Total"</span>)  )</span>
<span id="cb2-44"><a href="#cb2-44"></a>df_tipoBarco <span class="ot">&lt;-</span> df_tipoBarco <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x1, <span class="st">"^Fuente."</span>))</span>
<span id="cb2-45"><a href="#cb2-45"></a>df_tipoBarco <span class="ot">&lt;-</span> df_tipoBarco <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x1, <span class="st">"^Nota"</span>) )</span>
<span id="cb2-46"><a href="#cb2-46"></a>df_tipoBarco <span class="ot">&lt;-</span> df_tipoBarco <span class="sc">%&gt;%</span> janitor<span class="sc">::</span><span class="fu">remove_empty</span>(<span class="st">"rows"</span>)</span>
<span id="cb2-47"><a href="#cb2-47"></a>df_tipoBarco <span class="ot">&lt;-</span> df_tipoBarco <span class="sc">%&gt;%</span> tidyr<span class="sc">::</span><span class="fu">fill</span>(x2, <span class="at">.direction =</span> <span class="st">"down"</span>)</span>
<span id="cb2-48"><a href="#cb2-48"></a>my_anos <span class="ot">&lt;-</span> <span class="dv">2018</span><span class="sc">:</span><span class="dv">2024</span></span>
<span id="cb2-49"><a href="#cb2-49"></a>n_my_anos <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="dv">2018</span><span class="sc">:</span><span class="dv">2024</span>)</span>
<span id="cb2-50"><a href="#cb2-50"></a>meses <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"enero"</span>, <span class="st">"febrero"</span>, <span class="st">"marzo"</span>, <span class="st">"abril"</span>, <span class="st">"mayo"</span>, <span class="st">"junio"</span>,</span>
<span id="cb2-51"><a href="#cb2-51"></a>           <span class="st">"julio"</span>, <span class="st">"agosto"</span>, <span class="st">"septiembre"</span>, <span class="st">"octubre"</span>, <span class="st">"noviembre"</span>, <span class="st">"diciembre"</span>)</span>
<span id="cb2-52"><a href="#cb2-52"></a>zz1 <span class="ot">&lt;-</span> <span class="fu">rep</span>(my_anos, <span class="at">each =</span> (<span class="dv">12</span>)<span class="sc">+</span><span class="dv">1</span>) ; zz1 ; <span class="fu">length</span>(zz1) </span>
<span id="cb2-53"><a href="#cb2-53"></a>zz3a <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(meses, <span class="st">"total"</span>)) </span>
<span id="cb2-54"><a href="#cb2-54"></a>zz3b <span class="ot">&lt;-</span> <span class="fu">rep</span>(zz3a,  <span class="at">times =</span> n_my_anos) ; zz3b ; <span class="fu">length</span>(zz3b) </span>
<span id="cb2-55"><a href="#cb2-55"></a>zz4 <span class="ot">&lt;-</span> <span class="fu">paste</span>( zz3b, zz1, <span class="at">sep =</span> <span class="st">"_"</span>)  ; zz4; <span class="fu">length</span>(zz4)</span>
<span id="cb2-56"><a href="#cb2-56"></a>zz5 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Actividad y Motivo de Arribo"</span>, <span class="st">"tipo"</span>, zz4) ; <span class="fu">length</span>(zz5)</span>
<span id="cb2-57"><a href="#cb2-57"></a><span class="fu">names</span>(df_tipoBarco) <span class="ot">&lt;-</span> zz5 ; <span class="fu">length</span>(zz5)</span>
<span id="cb2-58"><a href="#cb2-58"></a>df_tipoBarco <span class="ot">&lt;-</span> df_tipoBarco <span class="sc">%&gt;%</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb2-59"><a href="#cb2-59"></a>df_tipoBarco <span class="ot">&lt;-</span> df_tipoBarco <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="dv">12</span>))</span>
<span id="cb2-60"><a href="#cb2-60"></a>df_tipoBarco <span class="ot">&lt;-</span> df_tipoBarco <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="dv">3</span><span class="sc">:</span><span class="fu">length</span>(df_tipoBarco))</span>
<span id="cb2-61"><a href="#cb2-61"></a>df_tipoBarco <span class="ot">&lt;-</span> df_tipoBarco <span class="sc">%&gt;%</span> </span>
<span id="cb2-62"><a href="#cb2-62"></a>  tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(<span class="at">col =</span> name, </span>
<span id="cb2-63"><a href="#cb2-63"></a>                              <span class="at">names =</span> <span class="fu">c</span>(<span class="st">"mes"</span>, <span class="st">"year"</span>), </span>
<span id="cb2-64"><a href="#cb2-64"></a>                              <span class="at">delim =</span> <span class="st">"_"</span>, <span class="at">too_many =</span> <span class="st">"merge"</span>)</span>
<span id="cb2-65"><a href="#cb2-65"></a>df_tipoBarco <span class="ot">&lt;-</span> df_tipoBarco <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">value =</span> <span class="fu">as.numeric</span>(value))<span class="sc">|&gt;</span><span class="fu">mutate</span>(<span class="at">tipo=</span><span class="fu">case_when</span>(actividad_y_motivo_de_arribo<span class="sc">%in%</span><span class="fu">c</span>(<span class="st">"Reparación"</span>,<span class="st">"Aprovisionamiento"</span>,<span class="st">"Arribo forzoso"</span>)<span class="sc">~</span><span class="st">"M.Arribo_Especial"</span>, <span class="at">.default=</span><span class="st">"Actividad"</span>))</span>
<span id="cb2-66"><a href="#cb2-66"></a></span>
<span id="cb2-67"><a href="#cb2-67"></a>df_TipoCarga <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"https://www.dimar.mil.co/sites/default/files/noticias/E1-FOR-117-Series-Historicas-trafico-maritimo-2018-2024.xlsx"</span>, </span>
<span id="cb2-68"><a href="#cb2-68"></a>                              <span class="at">col_names =</span> <span class="cn">FALSE</span>,</span>
<span id="cb2-69"><a href="#cb2-69"></a>                              <span class="at">sheet =</span> <span class="st">"Serie histórica 3"</span>,</span>
<span id="cb2-70"><a href="#cb2-70"></a>                              <span class="at">skip =</span> <span class="dv">10</span>)</span>
<span id="cb2-71"><a href="#cb2-71"></a></span>
<span id="cb2-72"><a href="#cb2-72"></a>df_TipoCarga <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(df_TipoCarga)</span>
<span id="cb2-73"><a href="#cb2-73"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> tidyr<span class="sc">::</span><span class="fu">fill</span>(x1, <span class="at">.direction =</span> <span class="st">"down"</span>)</span>
<span id="cb2-74"><a href="#cb2-74"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x1, <span class="st">"^Subtotal"</span>) )</span>
<span id="cb2-75"><a href="#cb2-75"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x1, <span class="st">"^Total"</span>)  )</span>
<span id="cb2-76"><a href="#cb2-76"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x1, <span class="st">"^Fuente."</span>))</span>
<span id="cb2-77"><a href="#cb2-77"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x1, <span class="st">"^Nota"</span>) )</span>
<span id="cb2-78"><a href="#cb2-78"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x3, <span class="st">"Arribo"</span>))</span>
<span id="cb2-79"><a href="#cb2-79"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> janitor<span class="sc">::</span><span class="fu">remove_empty</span>(<span class="st">"rows"</span>)</span>
<span id="cb2-80"><a href="#cb2-80"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb2-81"><a href="#cb2-81"></a>puertos_Caribe <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Cartagena"</span>, <span class="st">"Santa Marta"</span>, <span class="st">"Barranquilla"</span>, <span class="st">"Urabá y del Darién"</span>, <span class="st">"Coveñas"</span>,<span class="st">"Puerto Bolívar"</span>, <span class="st">"Riohacha"</span>, <span class="st">"San Andrés"</span>, <span class="st">"Providencia"</span>)</span>
<span id="cb2-82"><a href="#cb2-82"></a>puertos_Pacifico <span class="ot">&lt;-</span> <span class="fu">c</span>( <span class="st">"Buenaventura"</span>, <span class="st">"Tumaco"</span>, <span class="st">"Guapi"</span>, <span class="st">"Bahía Solano"</span>)</span>
<span id="cb2-83"><a href="#cb2-83"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> <span class="fu">filter</span>( <span class="sc">!</span>(x2 <span class="sc">%in%</span> puertos_Caribe))</span>
<span id="cb2-84"><a href="#cb2-84"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> <span class="fu">filter</span>( <span class="sc">!</span>(x2 <span class="sc">%in%</span> puertos_Pacifico))</span>
<span id="cb2-85"><a href="#cb2-85"></a>puertos <span class="ot">&lt;-</span> <span class="fu">c</span>(puertos_Caribe, puertos_Pacifico) <span class="sc">%&gt;%</span> </span>
<span id="cb2-86"><a href="#cb2-86"></a>  <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, .)</span>
<span id="cb2-87"><a href="#cb2-87"></a>zz_puertos <span class="ot">&lt;-</span> <span class="fu">rep</span>(puertos, <span class="at">each =</span> <span class="dv">9</span>) </span>
<span id="cb2-88"><a href="#cb2-88"></a>zz_puertos <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"puerto"</span>, zz_puertos)</span>
<span id="cb2-89"><a href="#cb2-89"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">x1a =</span> zz_puertos, <span class="at">.after =</span> x1)</span>
<span id="cb2-90"><a href="#cb2-90"></a>df_TipoCarga[<span class="dv">1</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">"tipoBarco"</span></span>
<span id="cb2-91"><a href="#cb2-91"></a>my_anos <span class="ot">&lt;-</span> <span class="dv">2018</span><span class="sc">:</span><span class="dv">2024</span></span>
<span id="cb2-92"><a href="#cb2-92"></a>n_my_anos <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="dv">2018</span><span class="sc">:</span><span class="dv">2024</span>)</span>
<span id="cb2-93"><a href="#cb2-93"></a>meses <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"enero"</span>, <span class="st">"febrero"</span>, <span class="st">"marzo"</span>, <span class="st">"abril"</span>, <span class="st">"mayo"</span>, <span class="st">"junio"</span>,</span>
<span id="cb2-94"><a href="#cb2-94"></a>           <span class="st">"julio"</span>, <span class="st">"agosto"</span>, <span class="st">"septiembre"</span>, <span class="st">"octubre"</span>, <span class="st">"noviembre"</span>, <span class="st">"diciembre"</span>)</span>
<span id="cb2-95"><a href="#cb2-95"></a>my_xx <span class="ot">&lt;-</span> <span class="dv">1</span>  <span class="co">#- xq no hay dif entre internacional y nacional</span></span>
<span id="cb2-96"><a href="#cb2-96"></a>zz1 <span class="ot">&lt;-</span> <span class="fu">rep</span>(my_anos, <span class="at">each =</span> (<span class="dv">12</span><span class="sc">+</span><span class="dv">1</span>)<span class="sc">*</span>my_xx) ; zz1 ; <span class="fu">length</span>(zz1) </span>
<span id="cb2-97"><a href="#cb2-97"></a>zz3a <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(meses, <span class="st">"total"</span>), <span class="at">each =</span> <span class="dv">1</span>) </span>
<span id="cb2-98"><a href="#cb2-98"></a>zz3b <span class="ot">&lt;-</span> <span class="fu">rep</span>(zz3a,  <span class="at">times =</span> n_my_anos) ; zz3b ; <span class="fu">length</span>(zz3b) </span>
<span id="cb2-99"><a href="#cb2-99"></a>zz4 <span class="ot">&lt;-</span> <span class="fu">paste</span>(zz3b, zz1, <span class="at">sep =</span> <span class="st">"_"</span>)  ; zz4; <span class="fu">length</span>(zz4)</span>
<span id="cb2-100"><a href="#cb2-100"></a>zz5 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"region"</span>, <span class="st">"puerto"</span>, <span class="st">"puertBarco"</span>, zz4) ; <span class="fu">length</span>(zz5)</span>
<span id="cb2-101"><a href="#cb2-101"></a><span class="fu">names</span>(df_TipoCarga) <span class="ot">&lt;-</span> zz5 ; <span class="fu">length</span>(zz5)</span>
<span id="cb2-102"><a href="#cb2-102"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb2-103"><a href="#cb2-103"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="dv">4</span><span class="sc">:</span><span class="fu">length</span>(df_TipoCarga))</span>
<span id="cb2-104"><a href="#cb2-104"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> </span>
<span id="cb2-105"><a href="#cb2-105"></a>  tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(<span class="at">col =</span> name, </span>
<span id="cb2-106"><a href="#cb2-106"></a>                              <span class="at">names =</span> <span class="fu">c</span>(<span class="st">"mes"</span>, <span class="st">"year"</span>), </span>
<span id="cb2-107"><a href="#cb2-107"></a>                              <span class="at">delim =</span> <span class="st">"_"</span>)</span>
<span id="cb2-108"><a href="#cb2-108"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">value =</span> <span class="fu">as.numeric</span>(value))</span>
<span id="cb2-109"><a href="#cb2-109"></a></span>
<span id="cb2-110"><a href="#cb2-110"></a>df_CargaPuerto <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"https://www.supertransporte.gov.co/documentos/2025/noviembre/Puertos_12/Historico_2017-2024.xlsx"</span>, <span class="at">col_names =</span> <span class="cn">TRUE</span>, <span class="at">skip =</span> <span class="dv">2</span>)</span>
<span id="cb2-111"><a href="#cb2-111"></a>df_CargaPuerto <span class="ot">&lt;-</span> df_CargaPuerto <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="dv">13</span><span class="sc">:</span><span class="dv">48</span>))<span class="sc">|&gt;</span><span class="fu">rename</span>(<span class="st">"Ciudad"</span><span class="ot">=</span><span class="st">"FECHA - Trimestre / ZONA_PORTUARIA"</span>)<span class="sc">|&gt;</span> tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(Ciudad), <span class="at">names_to =</span><span class="st">"Trimestre"</span>, <span class="at">values_to =</span> <span class="st">"Carga_Portuaria"</span> )</span>
<span id="cb2-112"><a href="#cb2-112"></a>df_CargaPuerto <span class="ot">&lt;-</span> df_CargaPuerto<span class="sc">|&gt;</span>tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(<span class="at">col =</span> Trimestre, </span>
<span id="cb2-113"><a href="#cb2-113"></a><span class="at">names =</span> <span class="fu">c</span>(<span class="st">"Trimestre"</span>,<span class="st">"year"</span>), <span class="at">delim =</span> <span class="st">"-"</span>)<span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Costa =</span> <span class="fu">case_when</span>(Ciudad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Buenaventura"</span>, <span class="st">"Tumaco"</span>) <span class="sc">~</span> <span class="st">"Pacífico"</span>, Ciudad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Barrancabermeja"</span>, <span class="st">"Río Magadalena"</span>) <span class="sc">~</span> <span class="st">"Fluvial"</span>, Ciudad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Barranquilla"</span>, <span class="st">"Cartagena"</span>, <span class="st">"Ciénaga"</span>,<span class="st">"G. Morrosquillo"</span>, <span class="st">"Guajira"</span>, <span class="st">"San Andrés"</span>, <span class="st">"Santa Marta"</span>, <span class="st">"Turbo"</span>) <span class="sc">~</span> <span class="st">"Caribe"</span>))</span>
<span id="cb2-114"><a href="#cb2-114"></a></span>
<span id="cb2-115"><a href="#cb2-115"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">setdiff</span>(<span class="fu">ls</span>(), <span class="fu">c</span>(<span class="st">"df_TM_Puerto"</span>,<span class="st">"df_C.Arribo"</span>,<span class="st">"df_tipoBarco"</span>,<span class="st">"df_TipoCarga"</span>, <span class="st">"df_CargaPuerto"</span>)))</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
</div>
</div>
</div>
<hr></section><section id="mapa-de-los-principales-puertos" class="level1"><h1>3. Mapa de los Principales Puertos</h1>
<p>Como primera etapa del análisis, y para comprender la distribución logística del país, presentamos a continuación la ubicación geoespacial de los 5 principales puertos en Colombia. Hemos generado la cartografía utilizando el paquete sf, lo que nos permite visualizar la concentración de infraestructura en la Costa Caribe frente a la dependencia de un único gran nodo en el Pacífico.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="fu">library</span>(sf)</span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="fu">library</span>(rnaturalearthdata)</span>
<span id="cb3-6"><a href="#cb3-6"></a></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co"># 1. Datos de los 5 Puertos Principales</span></span>
<span id="cb3-8"><a href="#cb3-8"></a>puertos_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb3-9"><a href="#cb3-9"></a>  <span class="at">nombre =</span> <span class="fu">c</span>(<span class="st">"Cartagena"</span>, <span class="st">"Santa Marta"</span>, <span class="st">"Barranquilla"</span>, <span class="st">"Puerto Bolívar"</span>, <span class="st">"Buenaventura"</span>),</span>
<span id="cb3-10"><a href="#cb3-10"></a>  <span class="at">lat =</span> <span class="fu">c</span>(<span class="fl">10.3910</span>, <span class="fl">11.2408</span>, <span class="fl">10.9685</span>, <span class="fl">12.2333</span>, <span class="fl">3.8801</span>),</span>
<span id="cb3-11"><a href="#cb3-11"></a>  <span class="at">lon =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">75.4794</span>, <span class="sc">-</span><span class="fl">74.1990</span>, <span class="sc">-</span><span class="fl">74.7813</span>, <span class="sc">-</span><span class="fl">71.9667</span>, <span class="sc">-</span><span class="fl">77.0312</span>),</span>
<span id="cb3-12"><a href="#cb3-12"></a>  <span class="at">zona =</span> <span class="fu">c</span>(<span class="st">"Caribe"</span>, <span class="st">"Caribe"</span>, <span class="st">"Caribe"</span>, <span class="st">"Caribe"</span>, <span class="st">"Pacífico"</span>)</span>
<span id="cb3-13"><a href="#cb3-13"></a>)</span>
<span id="cb3-14"><a href="#cb3-14"></a></span>
<span id="cb3-15"><a href="#cb3-15"></a><span class="co"># 2. Convertir a objeto espacial (sf)</span></span>
<span id="cb3-16"><a href="#cb3-16"></a>puertos_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(puertos_df, <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">"lon"</span>, <span class="st">"lat"</span>), <span class="at">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb3-17"><a href="#cb3-17"></a></span>
<span id="cb3-18"><a href="#cb3-18"></a><span class="co"># 3. Mapa base y visualización</span></span>
<span id="cb3-19"><a href="#cb3-19"></a>colombia_sf <span class="ot">&lt;-</span> <span class="fu">ne_countries</span>(<span class="at">scale =</span> <span class="st">"medium"</span>, <span class="at">returnclass =</span> <span class="st">"sf"</span>, <span class="at">country =</span> <span class="st">"Colombia"</span>)</span>
<span id="cb3-20"><a href="#cb3-20"></a></span>
<span id="cb3-21"><a href="#cb3-21"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb3-22"><a href="#cb3-22"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> colombia_sf, <span class="at">fill =</span> <span class="st">"#F5F5F5"</span>, <span class="at">color =</span> <span class="st">"gray60"</span>) <span class="sc">+</span></span>
<span id="cb3-23"><a href="#cb3-23"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> puertos_sf, <span class="fu">aes</span>(<span class="at">color =</span> zona), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb3-24"><a href="#cb3-24"></a>  <span class="fu">geom_text_repel</span>(<span class="at">data =</span> puertos_df, <span class="fu">aes</span>(<span class="at">x =</span> lon, <span class="at">y =</span> lat, <span class="at">label =</span> nombre),</span>
<span id="cb3-25"><a href="#cb3-25"></a>                  <span class="at">box.padding =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb3-26"><a href="#cb3-26"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb3-27"><a href="#cb3-27"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Localización de los 5 Puertos Principales"</span>,</span>
<span id="cb3-28"><a href="#cb3-28"></a>       <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb3-29"><a href="#cb3-29"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="my_trabajo_BigData_files/figure-html/mapa-puertos-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="my_trabajo_BigData_files/figure-html/mapa-puertos-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:95.0%"></a></p>
</figure>
</div>
</div>
</div>
</section><section id="sistema-portuario-nacional-un-desafío-geográfico" class="level1"><h1>4. Sistema portuario nacional: Un desafío Geográfico</h1>
<p>Como hemos explicado antes, Colombia tiene una ventaja competitiva única: es el único país de Sudamérica con salida a dos océanos, el <strong>Pacífico</strong> y el <strong>Atlántico (Mar Caribe)</strong>. Gracias a esto, puede comerciar fácilmente con Asia, Europa y Norteamérica.</p>
<p>Sin embargo, hay una gran diferencia entre las dos zonas. Históricamente, los puertos no han crecido por igual: la infraestructura y el volumen de carga se han concentrado mucho en la <strong>Costa Caribe</strong>.</p>
<section id="por-qué-existe-este-desequilibrio" class="level3"><h3 class="anchored" data-anchor-id="por-qué-existe-este-desequilibrio">¿Por qué existe este desequilibrio?</h3>
<p>La razón principal son las montañas. Como vemos en el mapa, la <strong>Cordillera de los Andes</strong> cruza el país de sur a norte y se divide en tres ramas.</p>
<p>Estas montañas (en marrón oscuro) funcionan como un muro natural que deja aislada a la <strong>Costa Pacífica</strong> del centro del país donde están las ciudades más importantes (Bogotá, Medellín, Cali).</p>
<p>En cambio, hacia el norte las montañas bajan y se vuelven llanuras (en verde). Esto hace que sea mucho más fácil llegar a la <strong>Costa Caribe</strong> por carretera o por el río Magdalena. Por eso, el Caribe siempre ha sido la entrada y salida principal de Colombia.</p>
<hr>
<div class="cell" data-layout-align="center">
<details class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># Usamos knitr para mostrar la imagen directamente desde Wikimedia </span></span>
<span id="cb4-2"><a href="#cb4-2"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"https://upload.wikimedia.org/wikipedia/commons/8/8a/Colombia_relief_location_map_cropped.svg"</span>)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="https://upload.wikimedia.org/wikipedia/commons/8/8a/Colombia_relief_location_map_cropped.svg" class="lightbox" data-gallery="quarto-lightbox-gallery-2" title="Mapa físico de Colombia. Se observa claramente cómo las tres cordilleras andinas bloquean el acceso al Pacífico, mientras que el Caribe es más llano y accesible."><img src="https://upload.wikimedia.org/wikipedia/commons/8/8a/Colombia_relief_location_map_cropped.svg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%" alt="Mapa físico de Colombia. Se observa claramente cómo las tres cordilleras andinas bloquean el acceso al Pacífico, mientras que el Caribe es más llano y accesible."></a></p>
</figure>
</div>
<figcaption>Mapa físico de Colombia. Se observa claramente cómo las tres cordilleras andinas bloquean el acceso al Pacífico, mientras que el Caribe es más llano y accesible.</figcaption></figure>
</div>
</div>
</div>
<hr>
<p>En esta fotografía podemos observar cómo los Andes aíslan el océano Pacífico.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="https://upload.wikimedia.org/wikipedia/commons/d/d4/%C3%81rea_Cultural_Andina_-_Divisi%C3%B3n.PNG" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="Relieve de Colombia: La barrera natural de los Andes aísla el Pacífico. (Fuente: Wikimedia Commons)"><img src="https://upload.wikimedia.org/wikipedia/commons/d/d4/%C3%81rea_Cultural_Andina_-_Divisi%C3%B3n.PNG" class="img-fluid quarto-figure quarto-figure-center figure-img" alt="Relieve de Colombia: La barrera natural de los Andes aísla el Pacífico. (Fuente: Wikimedia Commons)"></a></p>
</figure>
</div>
<figcaption>Relieve de Colombia: La barrera natural de los Andes aísla el Pacífico. (Fuente: Wikimedia Commons)</figcaption></figure>
</div>
<p>El sistema se divide en <strong>Zonas Portuarias</strong> con funciones distintas: * <strong>Región Caribe:</strong> Es la que mueve más variedad de productos. Aquí están <strong>Cartagena</strong> (contenedores y turismo), <strong>Santa Marta</strong> (carbón) y <strong>Barranquilla</strong> (funciona como puerto de río y marítimo). * <strong>Región Pacífico:</strong> Su punto fuerte es <strong>Buenaventura</strong>. Es esencial para traer mercancía de Asia, aunque es difícil llegar allí por tierra. * <strong>Región Fluvial:</strong> Se centra en <strong>Barrancabermeja</strong>, clave para transportar petróleo hacia la refinería.</p>
</section><section id="análisis-gráfico-y-exploratorio" class="level2"><h2 class="anchored" data-anchor-id="análisis-gráfico-y-exploratorio">4.1. Análisis Gráfico y Exploratorio</h2>
<p>Ahora, vamos a analizar los datos que hemos preparado para comprobar lo que dijimos antes y entender cómo funciona el tráfico marítimo actualmente.</p>
<section id="evolución-del-volumen-de-carga-top-puertos" class="level3"><h3 class="anchored" data-anchor-id="evolución-del-volumen-de-carga-top-puertos">4.1.1. Evolución del volumen de carga (Top Puertos)</h3>
<p>Primero, analizamos la tendencia en el tiempo. Como hay muchas zonas pequeñas que podrían desordenar el gráfico, hemos filtrado los datos para ver sólo los <strong>6 puertos más importantes</strong> según volumen histórico. Queremos ver si el tráfico ha subido después de la pandemia y qué puertos son los líderes.</p>
<div class="cell" data-layout-align="center">
<details open="" class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># 1. Preparación de los datos</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>df_grafico1 <span class="ot">&lt;-</span> df_CargaPuerto <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.numeric</span>(year)) <span class="sc">%&gt;%</span> <span class="co"># Aseguramos que el año sea numérico para el eje X </span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co"># Calculamos el total histórico por ciudad para saber cuáles son los "grandes" group_by(Ciudad) %&gt;%</span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="fu">mutate</span>(<span class="at">total_historico =</span> <span class="fu">sum</span>(Carga_Portuaria, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="fu">ungroup</span>()</span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co"># 2. Filtro: Nos quedamos solo con los nombres del Top 6</span></span>
<span id="cb5-8"><a href="#cb5-8"></a>top_puertos <span class="ot">&lt;-</span> <span class="fu">unique</span>(df_grafico1 <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(total_historico)) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Ciudad))[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="co"># Filtramos la base de datos original para mantener solo esas ciudades top</span></span>
<span id="cb5-10"><a href="#cb5-10"></a>df_grafico1 <span class="ot">&lt;-</span> df_grafico1 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Ciudad <span class="sc">%in%</span> top_puertos)</span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="co"># 3. Sumamos la carga por año y ciudad </span></span>
<span id="cb5-12"><a href="#cb5-12"></a>df_grafico1 <span class="ot">&lt;-</span> df_grafico1 <span class="sc">%&gt;%</span> </span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="fu">group_by</span>(year, Ciudad) <span class="sc">%&gt;%</span></span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="fu">summarise</span>(<span class="at">Carga =</span> <span class="fu">sum</span>(Carga_Portuaria, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">'drop'</span>)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="cell" data-layout-align="center">
<details class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="co">#- Gráfico de líneas</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> df_grafico1, </span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> Carga, <span class="at">color =</span> Ciudad)) <span class="sc">+</span> </span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span> <span class="co"># Línea un poco más gruesa para visibilidad</span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span> <span class="co"># Puntos para marcar cada año</span></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_number</span>(<span class="at">scale =</span> <span class="fl">1e-6</span>, <span class="at">suffix =</span> <span class="st">" M"</span>)) <span class="sc">+</span> <span class="co"># Formato Millones</span></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="fu">theme_minimal</span>() <span class="co"># Tema limpio</span></span>
<span id="cb6-8"><a href="#cb6-8"></a></span>
<span id="cb6-9"><a href="#cb6-9"></a>p <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Evolución de carga (Top 6 Puertos)"</span>,</span>
<span id="cb6-10"><a href="#cb6-10"></a><span class="at">subtitle =</span> <span class="st">"Toneladas que se mueven anualmente"</span>, </span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="at">y =</span> <span class="st">"Millones de Toneladas"</span>, </span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="at">color =</span> <span class="st">"Zona Portuaria"</span>) </span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="my_trabajo_BigData_files/figure-html/unnamed-chunk-4-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:95.0%"></a></p>
</figure>
</div>
</div>
</div>
</section><section id="comparativa-caribe-vs-pacífico" class="level3"><h3 class="anchored" data-anchor-id="comparativa-caribe-vs-pacífico">4.1.2. Comparativa: Caribe vs Pacífico</h3>
<p>Para comprobar si es verdad que el Caribe domina por la barrera de los Andes, comparamos directamente el volumen de carga del último año completo (2023).</p>
<p>Para eso agrupamos manualmente las ciudades en sus regiones geográficas:</p>
<div class="cell" data-layout-align="center">
<details class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="co"># 1. Clasificación Geográfica </span></span>
<span id="cb7-2"><a href="#cb7-2"></a>df_grafico2 <span class="ot">&lt;-</span> df_CargaPuerto <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.numeric</span>(year)) <span class="sc">%&gt;%</span></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2023</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="co"># Creamos la columna 'Region' </span></span>
<span id="cb7-6"><a href="#cb7-6"></a><span class="fu">mutate</span>(<span class="at">Region =</span> case_when</span>
<span id="cb7-7"><a href="#cb7-7"></a>( Ciudad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Buenaventura"</span>, <span class="st">"Tumaco"</span>) <span class="sc">~</span> <span class="st">"Pacífico"</span>,</span>
<span id="cb7-8"><a href="#cb7-8"></a>Ciudad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Barrancabermeja"</span>, <span class="st">"Río Magdalena"</span>) <span class="sc">~</span> <span class="st">"Fluvial"</span>,</span>
<span id="cb7-9"><a href="#cb7-9"></a><span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Caribe"</span>   )) <span class="sc">%&gt;%</span> <span class="co"># El resto (Cartagena, etc.) asumimos que son Caribe </span></span>
<span id="cb7-10"><a href="#cb7-10"></a></span>
<span id="cb7-11"><a href="#cb7-11"></a><span class="co"># 2. Sumamos el total por región</span></span>
<span id="cb7-12"><a href="#cb7-12"></a><span class="fu">group_by</span> (Region) <span class="sc">%&gt;%</span></span>
<span id="cb7-13"><a href="#cb7-13"></a><span class="fu">summarise</span>(<span class="at">Total =</span> <span class="fu">sum</span>(Carga_Portuaria, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb7-14"><a href="#cb7-14"></a></span>
<span id="cb7-15"><a href="#cb7-15"></a><span class="co"># Calculamos el porcentaje para entender la proporción</span></span>
<span id="cb7-16"><a href="#cb7-16"></a>  <span class="fu">mutate</span>(<span class="at">Porcentaje =</span> Total <span class="sc">/</span> <span class="fu">sum</span>(Total))</span>
<span id="cb7-17"><a href="#cb7-17"></a>  </span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="cell" data-layout-align="center">
<details class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co">#Gráfico de barras</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_grafico2, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Region, <span class="sc">-</span>Total), <span class="at">y =</span> Total, <span class="at">fill =</span> Region)) <span class="sc">+</span> <span class="fu">geom_col</span>() <span class="sc">+</span> </span>
<span id="cb8-3"><a href="#cb8-3"></a>  </span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="co"># Añadimos etiquetas de texto con el porcentaje encima de las barras</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> scales<span class="sc">::</span><span class="fu">percent</span>(Porcentaje, <span class="at">accuracy =</span> <span class="dv">1</span>)),</span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.5</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span> </span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_number</span>(<span class="at">scale =</span> <span class="fl">1e-6</span>, <span class="at">suffix =</span> <span class="st">" M"</span>)) <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Caribe"</span><span class="ot">=</span><span class="st">"blue"</span>, <span class="st">"Pacífico"</span><span class="ot">=</span><span class="st">"orange"</span>, <span class="st">"Fluvial"</span><span class="ot">=</span><span class="st">"green"</span>)) <span class="sc">+</span> <span class="fu">theme_light</span>() </span>
<span id="cb8-8"><a href="#cb8-8"></a></span>
<span id="cb8-9"><a href="#cb8-9"></a>p <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribución de Carga por Región (2023)"</span>,</span>
<span id="cb8-10"><a href="#cb8-10"></a><span class="at">subtitle =</span> <span class="st">"Predominio claro de la costa Caribeña"</span>, </span>
<span id="cb8-11"><a href="#cb8-11"></a><span class="at">x =</span> <span class="st">"Región"</span>, </span>
<span id="cb8-12"><a href="#cb8-12"></a><span class="at">y =</span> <span class="st">"Total Toneladas"</span>) <span class="sc">+</span> </span>
<span id="cb8-13"><a href="#cb8-13"></a><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="my_trabajo_BigData_files/figure-html/unnamed-chunk-6-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:95.0%"></a></p>
</figure>
</div>
</div>
</div>
<hr>
<p>Se ve claramente que el Caribe mueve la mayor parte de la carga del país. Esto confirma que la barrera de los Andes frena el crecimiento de la región Pacífico.</p>
</section><section id="naturaleza-del-tráfico-nacional-o-internacional" class="level3"><h3 class="anchored" data-anchor-id="naturaleza-del-tráfico-nacional-o-internacional">4.1.3. Naturaleza del Tráfico: Nacional o Internacional?</h3>
<p>Es imprescindible distinguir el propósito de los buques que arriban. ¿Son barcos grandes que traen mercancía de otros países (Comercio Exterior) o barcos más pequeños que se mueven solo entre puertos de Colombia (Cabotaje)?</p>
<div class="cell" data-layout-align="center">
<details class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># Agrupar datos</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="co"># Agrupación simple por año y tipo de tráfico</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>df_grafico3 <span class="ot">&lt;-</span> df_C.Arribo <span class="sc">%&gt;%</span></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.numeric</span>(year)) <span class="sc">%&gt;%</span></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="fu">group_by</span>(year, tipo) <span class="sc">%&gt;%</span></span>
<span id="cb9-6"><a href="#cb9-6"></a><span class="fu">summarise</span>(<span class="at">Total =</span> <span class="fu">sum</span>(value, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">'drop'</span>)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<p>Y el gráfico:</p>
<div class="cell" data-layout-align="center">
<details class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="co">#- Gráfico de barras </span></span>
<span id="cb10-2"><a href="#cb10-2"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_grafico3, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(year), <span class="at">y =</span> Total, <span class="at">fill =</span> tipo)) <span class="sc">+</span> </span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="co"># 'dodge' coloca las barras una al lado de la otra para comparar mejor</span></span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span> </span>
<span id="cb10-5"><a href="#cb10-5"></a><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"red"</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Internacional"</span>, <span class="st">"Nacional"</span>)) <span class="sc">+</span> </span>
<span id="cb10-6"><a href="#cb10-6"></a><span class="fu">theme_minimal</span>() </span>
<span id="cb10-7"><a href="#cb10-7"></a></span>
<span id="cb10-8"><a href="#cb10-8"></a>p <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Arribos de Buques: Nacional vs Internacional"</span>, </span>
<span id="cb10-9"><a href="#cb10-9"></a><span class="at">x =</span> <span class="st">"Año"</span>, </span>
<span id="cb10-10"><a href="#cb10-10"></a><span class="at">y =</span> <span class="st">"Número de Arribos"</span>, </span>
<span id="cb10-11"><a href="#cb10-11"></a><span class="at">fill =</span> <span class="st">"Tipo de Tráfico"</span>)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="my_trabajo_BigData_files/figure-html/unnamed-chunk-8-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:95.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Con esto terminamos el análisis de los puertos colombianos.</p>
<hr></section></section></section><section id="tipos-de-barcos-que-llegan" class="level1"><h1>5. Tipos de barcos que llegan</h1>
<p>Colombia, como país bioceánico, recibe todo tipo de barcos, siendo la mayoría de ellos de origen nacional, como podemos observa en el gráfico. Entre 2018 y 2023 se registró un aumento sostenido en el número de embarcaciones que arribaron a los puertos colombianos. La disminución observada en 2024 no corresponde a una caída real del tráfico marítimo, sino que se debe a la falta de información del último trimestre del año en la base de datos utilizada.</p>
<p>Dentro de esta tendencia creciente, destaca el incremento registrado a partir de 2021, explicado por la rápida recuperación económica posterior a la pandemia y por la necesidad de fortalecer una flota logística local, proceso que estuvo fuertemente influenciado por los cuellos de botella en las cadenas de suministro. No obstante, este cambio ya venía gestándose desde años anteriores, ya que en 2018 la presencia de barcos nacionales e internacionales era prácticamente equivalente; sin embargo, a partir de 2019 comenzó a evidenciarse una modificación progresiva en esta proporción, con un aumento constante de las embarcaciones nacionales, tendencia que se intensificó desde 2020 y consolidó la predominancia de la flota nacional en los años posteriores.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>R.NacInt <span class="ot">&lt;-</span> df_C.Arribo<span class="sc">|&gt;</span> <span class="fu">group_by</span>(year)<span class="sc">|&gt;</span><span class="fu">filter</span>(mes<span class="sc">==</span><span class="st">"total"</span>)<span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>value, <span class="at">fill =</span> tipo ))<span class="sc">+</span><span class="fu">geom_col</span>()<span class="sc">+</span><span class="fu">theme_bw</span>()<span class="sc">+</span><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_comma</span>(<span class="at">accuracy =</span> <span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"lightyellow"</span>, <span class="at">color =</span> <span class="cn">NA</span>))<span class="sc">+</span><span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Evolución de la procedencia de barcos que llegan a </span><span class="sc">\n</span><span class="st">puertos colombianos (2018-2024)"</span>, <span class="at">x=</span><span class="st">"Años"</span>,<span class="at">y=</span><span class="st">"Arribos"</span>, <span class="at">fill=</span><span class="st">"Tipo"</span> )<span class="sc">+</span> <span class="fu">scale_fill_discrete</span>(<span class="at">name =</span> <span class="st">"Tipo de Navegación"</span>,  <span class="at">labels =</span> <span class="fu">c</span>( <span class="st">"internac"</span> <span class="ot">=</span> <span class="st">"Tráfico Internacional"</span>,<span class="st">"nacional"</span><span class="ot">=</span> <span class="st">"Tráfico Nacional"</span>))</span>
<span id="cb11-3"><a href="#cb11-3"></a>R.NacInt</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="my_trabajo_BigData_files/figure-html/unnamed-chunk-9-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:95.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>La mayoría de estos barcos arriban principalmente a los puertos del Atlántico. Como se observa en la siguiente gráfica, correspondiente a los barcos arribados en 2024, los puertos del Atlántico reciben un mayor número de embarcaciones tanto nacionales como internacionales, lo que corrobora la afirmación de que la costa caribeña presenta una mayor actividad portuaria que la costa pacífica.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>R.NacInt <span class="ot">&lt;-</span> df_C.Arribo<span class="sc">|&gt;</span> <span class="fu">filter</span>(year<span class="sc">==</span><span class="st">"2024"</span>,mes<span class="sc">==</span><span class="st">"total"</span>)<span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>region, <span class="at">y=</span>value, <span class="at">fill =</span> tipo ))<span class="sc">+</span><span class="fu">geom_col</span>()<span class="sc">+</span><span class="fu">theme_bw</span>()<span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"lightyellow"</span>, <span class="at">color =</span> <span class="cn">NA</span>))<span class="sc">+</span><span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Procedencia de barcos que llegan a puertos colombianos en el 2024"</span>, <span class="at">x=</span><span class="st">"Años"</span>,<span class="at">y=</span><span class="st">"Arribos"</span>, <span class="at">fill=</span><span class="st">"Tipo"</span> )<span class="sc">+</span><span class="fu">scale_fill_discrete</span>(<span class="at">name =</span> <span class="st">"Tipo de Navegación"</span>,  <span class="at">labels =</span> <span class="fu">c</span>( <span class="st">"internac"</span> <span class="ot">=</span> <span class="st">"Tráfico Internacional"</span>,<span class="st">"nacional"</span><span class="ot">=</span> <span class="st">"Tráfico Nacional"</span>))</span>
<span id="cb12-2"><a href="#cb12-2"></a>R.NacInt</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="my_trabajo_BigData_files/figure-html/unnamed-chunk-10-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:95.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>En particular, el tráfico marítimo de la costa caribeña se concentra en los puertos de Cartagena, Santa Marta y Coveñas, los cuales ocupan el primer, segundo y tercer lugar, respectivamente, entre los puertos con mayor recepción de embarcaciones. En contraste, en la costa pacífica el puerto de Buenaventura presenta el mayor flujo de barcos y se ubica en el cuarto lugar a nivel nacional en tráfico portuario.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb13-2"><a href="#cb13-2"></a>NacInt <span class="ot">&lt;-</span> df_C.Arribo<span class="sc">|&gt;</span> <span class="fu">filter</span>(year<span class="sc">==</span><span class="st">"2024"</span>)<span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>puerto, <span class="at">y=</span>value, <span class="at">fill =</span> tipo ))<span class="sc">+</span><span class="fu">geom_col</span>()<span class="sc">+</span><span class="fu">theme_bw</span>()<span class="sc">+</span><span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>( <span class="at">angle =</span> <span class="dv">60</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span><span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"lightyellow"</span>, <span class="at">color =</span> <span class="cn">NA</span>))<span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Procedencia de barcos que llegan a cada puertos colombianos en el 2024"</span>, <span class="at">x=</span><span class="st">"Años"</span>,<span class="at">y=</span><span class="st">"Arribos"</span>, <span class="at">fill=</span><span class="st">"Tipo"</span> )<span class="sc">+</span><span class="fu">scale_fill_discrete</span>(<span class="at">name =</span> <span class="st">"Tipo de Navegación"</span>,  <span class="at">labels =</span> <span class="fu">c</span>( <span class="st">"internac"</span> <span class="ot">=</span> <span class="st">"Tráfico Internacional"</span>,<span class="st">"nacional"</span><span class="ot">=</span> <span class="st">"Tráfico Nacional"</span>))</span>
<span id="cb13-3"><a href="#cb13-3"></a>tablaarribo <span class="ot">&lt;-</span>df_C.Arribo<span class="sc">|&gt;</span><span class="fu">filter</span>(year<span class="sc">==</span><span class="st">"2024"</span>,tipo<span class="sc">==</span><span class="st">"nacional"</span>, mes<span class="sc">==</span><span class="st">"enero"</span>)<span class="sc">|&gt;</span><span class="fu">select</span>(region,puerto)</span>
<span id="cb13-4"><a href="#cb13-4"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(tablaarribo)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-015f6735194a5007f36a" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-015f6735194a5007f36a">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13"],["Caribe","Caribe","Caribe","Caribe","Caribe","Caribe","Caribe","Caribe","Caribe","Pacífico","Pacífico","Pacífico","Pacífico"],["Barranquilla","Cartagena","Coveñas","Providencia","Puerto Bolívar","Riohacha","San Andrés","Santa Marta","Urabá y del Darién","Bahía Solano","Buenaventura","Guapi","Tumaco"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>region<\/th>\n      <th>puerto<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"region","targets":1},{"name":"puerto","targets":2}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<details class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>NacInt</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="my_trabajo_BigData_files/figure-html/unnamed-chunk-11-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-11-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:95.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>De los barcos que llegan, la mayoría son buques de carga, seguidos, a gran distancia, por embarcaciones recreativas. La pandemia provocó una caída significativa en la llegada de buques recreacionales, pero a partir de 2022 se observa una recuperación. En 2024 se aprecia una disminución general en todos los tipos de barcos, lo cual se debe a que la base de datos consultada no incluía información del último trimestre del año, como mencionamos anteriormente.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>R.TipoBarco <span class="ot">&lt;-</span> df_tipoBarco<span class="sc">|&gt;</span><span class="fu">group_by</span>(year)<span class="sc">|&gt;</span><span class="fu">filter</span>(tipo<span class="sc">==</span><span class="st">"Actividad"</span>)<span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year,<span class="at">y=</span>value,<span class="at">fill =</span> actividad_y_motivo_de_arribo))<span class="sc">+</span><span class="fu">geom_col</span>()<span class="sc">+</span><span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>)<span class="sc">+</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Tipo de barcos que arriban a puertos colombianos (2018-2024)"</span>, <span class="at">x=</span><span class="st">"Años"</span>,<span class="at">y=</span><span class="st">"Arribos"</span>, <span class="at">fill =</span> <span class="st">"Tipo de barco"</span>)<span class="sc">+</span><span class="fu">theme_bw</span>()<span class="sc">+</span><span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"lightblue3"</span>, <span class="at">colour =</span> <span class="st">"white"</span>))</span>
<span id="cb15-3"><a href="#cb15-3"></a>R.TipoBarco</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="my_trabajo_BigData_files/figure-html/unnamed-chunk-12-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10"><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:95.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Algunos barcos llegan a Colombia por motivos especiales, es decir, por razones distintas al comercio regular; principalmente por aprovisionamiento, como se puede observar en la gráfica.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>R.ActiviadBarco <span class="ot">&lt;-</span> df_tipoBarco<span class="sc">|&gt;</span><span class="fu">group_by</span>(year)<span class="sc">|&gt;</span><span class="fu">filter</span>(tipo<span class="sc">==</span><span class="st">"M.Arribo_Especial"</span>)<span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year,<span class="at">y=</span>value,<span class="at">fill =</span> actividad_y_motivo_de_arribo))<span class="sc">+</span><span class="fu">geom_col</span>()<span class="sc">+</span><span class="fu">theme_bw</span>()<span class="sc">+</span><span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"lightyellow1"</span>, <span class="at">colour =</span> <span class="st">"white"</span>))<span class="sc">+</span><span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Motivos de arribo especiales a puertos colombianos (2018-2024)"</span>, <span class="at">x=</span><span class="st">"Años"</span>,<span class="at">y=</span><span class="st">"Arribos"</span>,<span class="at">fill=</span><span class="st">"Motivos de arribo especiales"</span>)</span>
<span id="cb16-2"><a href="#cb16-2"></a>R.ActiviadBarco</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="my_trabajo_BigData_files/figure-html/unnamed-chunk-13-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11"><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:95.0%"></a></p>
</figure>
</div>
</div>
</div>
<hr>
<section id="tipo-de-barcos-de-carga-que-llegan-a-puertos-colombianos" class="level2"><h2 class="anchored" data-anchor-id="tipo-de-barcos-de-carga-que-llegan-a-puertos-colombianos">5.1 Tipo de barcos de carga que llegan a puertos colombianos</h2>
<p>Los barcos de carga que arriban a los puertos colombianos están compuestos principalmente por portacontenedores, seguidos por graneleros y tanqueros. Esto se debe a que los portacontenedores son fundamentales para el transporte de mercancía general y bienes manufacturados, como la exportación de café, una de las principales exportaciones del país, así como la importación de diversos bienes. En el caso de los graneleros, su presencia responde a la exportación de minerales, como el carbón y el hierro, y a la importación de alimentos, como cereales, además de otros insumos, entre ellos los fertilizantes. Por su parte, la llegada de tanqueros se explica porque Colombia es un importante productor de petróleo.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>Categoria <span class="ot">&lt;-</span> df_TipoCarga<span class="sc">|&gt;</span><span class="fu">group_by</span>(year)<span class="sc">|&gt;</span><span class="fu">filter</span>(mes<span class="sc">==</span><span class="st">"total"</span>)<span class="sc">|&gt;</span><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year,<span class="at">y=</span>value, <span class="at">fill =</span> puertBarco))<span class="sc">+</span><span class="fu">geom_col</span>()<span class="sc">+</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Tipos de barcos de carga que llegan a Colombia (2018-2024)"</span>,<span class="at">x=</span><span class="st">"Años"</span>,<span class="at">y=</span><span class="st">"Arribos"</span>,<span class="at">fill=</span><span class="st">"Tipo de cargero"</span>)<span class="sc">+</span><span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set3"</span>)<span class="sc">+</span><span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"lightblue4"</span>, <span class="at">colour =</span> <span class="st">"white"</span>))</span>
<span id="cb17-2"><a href="#cb17-2"></a>Categoria </span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="my_trabajo_BigData_files/figure-html/unnamed-chunk-14-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12"><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:95.0%"></a></p>
</figure>
</div>
</div>
</div>
<section id="tipo-de-barcos-de-carga-que-llegan-a-puertos-colombianos-por-costa" class="level3"><h3 class="anchored" data-anchor-id="tipo-de-barcos-de-carga-que-llegan-a-puertos-colombianos-por-costa">5.1.1. Tipo de barcos de carga que llegan a puertos colombianos por costa</h3>
<p>En la siguiente gráfica se puede observar que, en 2023, la costa atlántica recibió una mayor cantidad de barcos de carga de todos los tipos, lo que respalda el argumento de que la costa pacífica tiene un menor movimiento portuario en comparación con la costa caribeña.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>Categoria <span class="ot">&lt;-</span> df_TipoCarga<span class="sc">|&gt;</span><span class="fu">group_by</span>(region)<span class="sc">|&gt;</span><span class="fu">filter</span>(mes<span class="sc">==</span><span class="st">"total"</span>, year<span class="sc">==</span><span class="st">"2023"</span>)<span class="sc">|&gt;</span><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>region,<span class="at">y=</span>value, <span class="at">fill =</span> puertBarco))<span class="sc">+</span><span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>)<span class="sc">+</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Tipos de barcos de carga que llegan a Colombia (2023)"</span>,<span class="at">x=</span><span class="st">"Costa"</span>,<span class="at">y=</span><span class="st">"Arribos"</span>,<span class="at">fill=</span><span class="st">"Tipo de cargero"</span>)<span class="sc">+</span><span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set3"</span>)<span class="sc">+</span><span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"lightblue4"</span>, <span class="at">colour =</span> <span class="st">"white"</span>))<span class="sc">+</span><span class="fu">annotate</span>(<span class="st">"rect"</span>,<span class="at">xmin =</span> <span class="fl">1.5</span>, <span class="at">xmax =</span> <span class="fl">2.5</span>,<span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>,<span class="at">alpha =</span> <span class="fl">0.2</span>, <span class="at">fill =</span> <span class="st">"red"</span>)<span class="sc">+</span> <span class="fu">annotate</span>(<span class="st">"rect"</span>,<span class="at">xmin =</span> <span class="fl">0.5</span>, <span class="at">xmax =</span> <span class="fl">1.5</span>,<span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>,<span class="at">alpha =</span> <span class="fl">0.2</span>, <span class="at">fill =</span> <span class="st">"green2"</span>)</span>
<span id="cb18-2"><a href="#cb18-2"></a>           </span>
<span id="cb18-3"><a href="#cb18-3"></a>Categoria</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="my_trabajo_BigData_files/figure-html/unnamed-chunk-15-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13"><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:95.0%"></a></p>
</figure>
</div>
</div>
</div>
<hr></section></section></section><section id="evolución-de-la-carga-portuario" class="level1"><h1>6. Evolución de la carga portuario</h1>
<div class="columns">
<div class="column" style="width:35%;">
<div class="cell" data-layout-align="center">
<details class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>Traf.Marit <span class="ot">&lt;-</span> df_CargaPuerto<span class="sc">|&gt;</span><span class="fu">group_by</span>(year)<span class="sc">|&gt;</span><span class="fu">mutate</span>(<span class="at">Traf_anual=</span><span class="fu">sum</span>(Carga_Portuaria))<span class="sc">|&gt;</span> <span class="fu">filter</span>(Trimestre<span class="sc">==</span><span class="st">"Trim. 4 "</span>, Ciudad<span class="sc">%in%</span><span class="fu">c</span>(<span class="st">"Barrancabermeja"</span>))<span class="sc">|&gt;</span><span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(year)))<span class="sc">|&gt;</span> <span class="fu">select</span>(year,Traf_anual)<span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year,<span class="at">y=</span>Traf_anual,<span class="at">group =</span> <span class="dv">1</span>))<span class="sc">+</span><span class="fu">geom_line</span>(<span class="at">color=</span><span class="st">"blue3"</span>, <span class="at">size=</span><span class="fl">1.2</span>)<span class="sc">+</span><span class="fu">geom_point</span>(<span class="at">size=</span><span class="fl">2.5</span>, <span class="at">color=</span> <span class="st">"firebrick3"</span>)<span class="sc">+</span><span class="fu">theme_bw</span>() <span class="sc">+</span><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_comma</span>(<span class="at">accuracy =</span> <span class="dv">1</span>))<span class="sc">+</span><span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"lightblue4"</span>, <span class="at">colour =</span> <span class="st">"white"</span>))<span class="sc">+</span><span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Carga portuaria en Colombia 17-24"</span>,<span class="at">x=</span><span class="st">"Años"</span>,<span class="at">y=</span><span class="st">"Movimiento de carga"</span>)</span>
<span id="cb19-2"><a href="#cb19-2"></a>Traf.Marit <span class="ot">&lt;-</span> Traf.Marit<span class="sc">+</span><span class="fu">transition_reveal</span>(year)</span>
<span id="cb19-3"><a href="#cb19-3"></a>Traf.Marit</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="my_trabajo_BigData_files/figure-html/unnamed-chunk-16-1.gif" class="lightbox" data-gallery="quarto-lightbox-gallery-14"><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-16-1.gif" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:95.0%"></a></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:65%;">
<p>El movimiento de carga portuaria en Colombia experimentó una caída entre 2018 y 2020, con una disminución particularmente pronunciada en 2019 debido a la pandemia. A partir de 2020, la actividad portuaria comenzó a recuperarse; sin embargo, en 2022 volvió a disminuir como consecuencia de la inflación mundial y la guerra en Ucrania, que encareció el transporte marítimo. A partir de finales de 2022, se registró una rápida recuperación del movimiento portuario, impulsada por la recuperación económica global y las sequías en el Canal de Panamá, que obligaron a varios barcos a dirigirse a puertos colombianos.</p>
</div>
<p>Se estima que el tráfico de carga en Colombia podría disminuir en 2025 debido al Fenómeno del Niño, que aumenta los riesgos de navegación en ciertos meses del año y afecta la seguridad portuaria. Además, este fenómeno meteorológico podría reducir la cosecha de café, una de las principales exportaciones del país junto con el petróleo. La exportacion de crudo también podría verse afectada, debido al incremento en la producción de petróleo en Estados Unidos, principal comprador del crudo colombiano, impulsado por las políticas extractivas de la administración de Trump y a la disminución de precios de la OPEP+, lo que hace que el petróleo colombiano sea menos competitivo en el mercado internacional.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>Traf.Marit <span class="ot">&lt;-</span> df_CargaPuerto<span class="sc">|&gt;</span><span class="fu">group_by</span>(year)<span class="sc">|&gt;</span><span class="fu">mutate</span>(<span class="at">Traf_anual=</span><span class="fu">sum</span>(Carga_Portuaria))<span class="sc">|&gt;</span> <span class="fu">filter</span>(Trimestre<span class="sc">==</span><span class="st">"Trim. 4 "</span>, Ciudad<span class="sc">%in%</span><span class="fu">c</span>(<span class="st">"Barrancabermeja"</span>))<span class="sc">|&gt;</span><span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(year)))<span class="sc">|&gt;</span> <span class="fu">select</span>(year,Traf_anual)<span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year,<span class="at">y=</span>Traf_anual,<span class="at">group =</span> <span class="dv">1</span>))<span class="sc">+</span><span class="fu">geom_line</span>(<span class="at">color=</span><span class="st">"blue3"</span>, <span class="at">size=</span><span class="fl">1.2</span>)<span class="sc">+</span><span class="fu">geom_point</span>(<span class="at">size=</span><span class="fl">2.5</span>, <span class="at">color=</span> <span class="st">"firebrick3"</span>)<span class="sc">+</span><span class="fu">theme_bw</span>() <span class="sc">+</span><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_comma</span>(<span class="at">accuracy =</span> <span class="dv">1</span>))<span class="sc">+</span><span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"lightblue4"</span>, <span class="at">colour =</span> <span class="st">"white"</span>))<span class="sc">+</span><span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Evolución de la carga portuario en puertos colombianos (2017-2024)"</span>,<span class="at">x=</span><span class="st">"Años"</span>,<span class="at">y=</span><span class="st">"Movimiento de carga"</span>)</span>
<span id="cb20-2"><a href="#cb20-2"></a></span>
<span id="cb20-3"><a href="#cb20-3"></a>Traf.Marit</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="my_trabajo_BigData_files/figure-html/unnamed-chunk-17-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-15"><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:95.0%"></a></p>
</figure>
</div>
</div>
</div>
<section id="contribucion-por-costa-en-la-carga-portuaria" class="level2"><h2 class="anchored" data-anchor-id="contribucion-por-costa-en-la-carga-portuaria">6.1. Contribucion por costa en la carga portuaria</h2>
<p>El movimiento de carga portuaria en Colombia se concentra principalmente en la costa atlántica, seguidas por la costa pacífica y los puertos fluviales. Esto se explica porque la población y la actividad económica del país se concentran en la región central y en la costa caribe, y estas zonas cuentan con mejores conexiones hacia el Atlántico. En contraste, la zona pacífica ha permanecido históricamente aislada debido a la presencia de la cordillera de los Andes.</p>
<p>Por su parte, los puertos fluviales mantienen su nivel de movimiento principalmente por la ciudad de Barrancabermeja, que alberga la refinería de petróleo más grande de Colombia y se encuentra cerca del yacimiento de petróleo del Magdalena Medio. Además, su ubicación en el río Magdalena, que desemboca en el Caribe, facilita el transporte de carga desde esta región, aunque su navegabilidad no es constante durante todo el año, lo que limita parcialmente el flujo portuario.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>Traf.Marit <span class="ot">&lt;-</span> df_CargaPuerto<span class="sc">|&gt;</span><span class="fu">group_by</span>(year, Costa)<span class="sc">|&gt;</span><span class="fu">mutate</span>(<span class="at">Traf_anual=</span><span class="fu">sum</span>(Carga_Portuaria))<span class="sc">|&gt;</span> <span class="fu">filter</span>(Trimestre<span class="sc">==</span><span class="st">"Trim. 4 "</span>)<span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year,<span class="at">y=</span>Traf_anual, <span class="at">fill =</span> Costa))<span class="sc">+</span><span class="fu">geom_col</span>()<span class="sc">+</span><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_comma</span>(<span class="at">accuracy =</span> <span class="dv">1</span>))<span class="sc">+</span><span class="fu">theme_bw</span>()<span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Contribucion por costa en la evolución de la carga portuaria </span><span class="sc">\n</span><span class="st">en puertos colombianos (2017-2024)"</span>,<span class="at">x=</span><span class="st">"Años"</span>,<span class="at">y=</span><span class="st">"Movimiento de carga"</span>)<span class="sc">+</span><span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"lightyellow1"</span>, <span class="at">colour =</span> <span class="st">"white"</span>))</span>
<span id="cb21-2"><a href="#cb21-2"></a>Traf.Marit</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="my_trabajo_BigData_files/figure-html/unnamed-chunk-18-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-16"><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:95.0%"></a></p>
</figure>
</div>
</div>
</div>
<hr></section><section id="exportaciones-e-importaciones" class="level1"><h1>7. Exportaciones e Importaciones</h1>
<p>Para este apartado nos centraremos en el dataframe <code>df_TM_Puerto</code>, que contiene los datos de tonelaje desglosados por tipo de movimiento; a partir de él generamos el gráfico en el que se puede ver la diferencia entre importaciones y exportaciones marítimas del país .</p>
<p><strong>Evolución de la Balanza Comercial (Interactiva)</strong></p>
<div class="cell" data-layout-align="center">
<details class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="fu">library</span>(plotly) </span>
<span id="cb22-2"><a href="#cb22-2"></a></span>
<span id="cb22-3"><a href="#cb22-3"></a><span class="co"># 1. CREACIÓN Y LIMPIEZA DE df_comercio (a partir df_TM_Puerto)</span></span>
<span id="cb22-4"><a href="#cb22-4"></a>df_comercio <span class="ot">&lt;-</span> df_TM_Puerto <span class="sc">%&gt;%</span> </span>
<span id="cb22-5"><a href="#cb22-5"></a>  <span class="fu">select</span>(zona_portuaria, anno_vigencia, exportacion, importacion) <span class="sc">%&gt;%</span></span>
<span id="cb22-6"><a href="#cb22-6"></a>  <span class="fu">rename</span>(<span class="at">Year =</span> anno_vigencia, <span class="at">Zona =</span> zona_portuaria) <span class="sc">%&gt;%</span></span>
<span id="cb22-7"><a href="#cb22-7"></a>  </span>
<span id="cb22-8"><a href="#cb22-8"></a>  <span class="co"># Convertir las columnas 'exportacion' e 'importacion' en filas</span></span>
<span id="cb22-9"><a href="#cb22-9"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb22-10"><a href="#cb22-10"></a>    <span class="at">cols =</span> <span class="fu">c</span>(exportacion, importacion),</span>
<span id="cb22-11"><a href="#cb22-11"></a>    <span class="at">names_to =</span> <span class="st">"Movimiento"</span>,</span>
<span id="cb22-12"><a href="#cb22-12"></a>    <span class="at">values_to =</span> <span class="st">"Total_Ton"</span></span>
<span id="cb22-13"><a href="#cb22-13"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb22-14"><a href="#cb22-14"></a>  <span class="co"># eliminamos NAs</span></span>
<span id="cb22-15"><a href="#cb22-15"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Total_Ton), Total_Ton <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb22-16"><a href="#cb22-16"></a></span>
<span id="cb22-17"><a href="#cb22-17"></a><span class="co"># 2. CREACIÓN DEL DATAFRAME NECESARIO (df_evolucion_comercio)</span></span>
<span id="cb22-18"><a href="#cb22-18"></a>df_evolucion_comercio <span class="ot">&lt;-</span> df_comercio <span class="sc">%&gt;%</span></span>
<span id="cb22-19"><a href="#cb22-19"></a>  <span class="fu">group_by</span>(Year, Movimiento) <span class="sc">%&gt;%</span></span>
<span id="cb22-20"><a href="#cb22-20"></a>  <span class="fu">summarise</span>(<span class="at">Total_Ton =</span> <span class="fu">sum</span>(Total_Ton, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb22-21"><a href="#cb22-21"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb22-22"><a href="#cb22-22"></a></span>
<span id="cb22-23"><a href="#cb22-23"></a><span class="co"># 3. Crear el gráfico base con ggplot</span></span>
<span id="cb22-24"><a href="#cb22-24"></a>p_base_balanza <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_evolucion_comercio, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Total_Ton, <span class="at">color =</span> Movimiento,</span>
<span id="cb22-25"><a href="#cb22-25"></a>                                                <span class="at">text =</span> <span class="fu">paste</span>(<span class="st">"Año:"</span>, Year, <span class="st">"&lt;br&gt;"</span>,</span>
<span id="cb22-26"><a href="#cb22-26"></a>                                                             <span class="st">"Movimiento:"</span>, Movimiento, <span class="st">"&lt;br&gt;"</span>,</span>
<span id="cb22-27"><a href="#cb22-27"></a>                                                             <span class="st">"Toneladas:"</span>, scales<span class="sc">::</span><span class="fu">label_comma</span>()(Total_Ton)))) <span class="sc">+</span></span>
<span id="cb22-28"><a href="#cb22-28"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb22-29"><a href="#cb22-29"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb22-30"><a href="#cb22-30"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_comma</span>(<span class="at">scale =</span> <span class="fl">1e-6</span>, <span class="at">suffix =</span> <span class="st">" M"</span>)) <span class="sc">+</span></span>
<span id="cb22-31"><a href="#cb22-31"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"exportacion"</span> <span class="ot">=</span> <span class="st">"blue"</span>, <span class="st">"importacion"</span> <span class="ot">=</span> <span class="st">"red"</span>)) <span class="sc">+</span></span>
<span id="cb22-32"><a href="#cb22-32"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb22-33"><a href="#cb22-33"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Evolución Exportaciones vs Importaciones"</span>,</span>
<span id="cb22-34"><a href="#cb22-34"></a>       <span class="at">subtitle =</span> <span class="st">"Volumen en Millones de Toneladas por Año"</span>,</span>
<span id="cb22-35"><a href="#cb22-35"></a>       <span class="at">y =</span> <span class="st">"Millones de Toneladas"</span>,</span>
<span id="cb22-36"><a href="#cb22-36"></a>       <span class="at">x =</span> <span class="st">"Año"</span>,</span>
<span id="cb22-37"><a href="#cb22-37"></a>       <span class="at">color =</span> <span class="st">"Flujo"</span>) <span class="sc">+</span></span>
<span id="cb22-38"><a href="#cb22-38"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb22-39"><a href="#cb22-39"></a></span>
<span id="cb22-40"><a href="#cb22-40"></a><span class="co"># 4. Convertir a Plotly para hacerlo interactivo</span></span>
<span id="cb22-41"><a href="#cb22-41"></a><span class="fu">ggplotly</span>(p_base_balanza, <span class="at">tooltip =</span> <span class="st">"text"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-42"><a href="#cb22-42"></a>  <span class="fu">layout</span>(<span class="at">hovermode =</span> <span class="st">"x unified"</span>)</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-9734d8c151a95c00fc13" style="width:95%;height:900px;"></div>
<script type="application/json" data-for="htmlwidget-9734d8c151a95c00fc13">{"x":{"data":[{"x":[2018,null,2019,null,2020,null,2021,null,2022,null,2023,null,2024,null,2025],"y":[7571598,null,14581329,null,8920757,null,8070408,null,7358161,null,6016162,null,3147117,null,4074929],"text":["Año: 2018 <br> Movimiento: exportacion <br> Toneladas: 7,571,598",null,"Año: 2019 <br> Movimiento: exportacion <br> Toneladas: 14,581,329",null,"Año: 2020 <br> Movimiento: exportacion <br> Toneladas: 8,920,757",null,"Año: 2021 <br> Movimiento: exportacion <br> Toneladas: 8,070,408",null,"Año: 2022 <br> Movimiento: exportacion <br> Toneladas: 7,358,161",null,"Año: 2023 <br> Movimiento: exportacion <br> Toneladas: 6,016,162",null,"Año: 2024 <br> Movimiento: exportacion <br> Toneladas: 3,147,117",null,"Año: 2025 <br> Movimiento: exportacion <br> Toneladas: 4,074,929"],"type":"scatter","mode":"lines","line":{"width":4.5354330708661417,"color":"rgba(0,0,255,1)","dash":"solid"},"hoveron":"points","name":"exportacion","legendgroup":"exportacion","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2018,null,2019,null,2020,null,2021,null,2022,null,2023,null,2024,null,2025],"y":[3970418,null,3848177,null,4090333,null,3655410,null,5076203,null,5914505,null,3106977,null,1339880],"text":["Año: 2018 <br> Movimiento: importacion <br> Toneladas: 3,970,418",null,"Año: 2019 <br> Movimiento: importacion <br> Toneladas: 3,848,177",null,"Año: 2020 <br> Movimiento: importacion <br> Toneladas: 4,090,333",null,"Año: 2021 <br> Movimiento: importacion <br> Toneladas: 3,655,410",null,"Año: 2022 <br> Movimiento: importacion <br> Toneladas: 5,076,203",null,"Año: 2023 <br> Movimiento: importacion <br> Toneladas: 5,914,505",null,"Año: 2024 <br> Movimiento: importacion <br> Toneladas: 3,106,977",null,"Año: 2025 <br> Movimiento: importacion <br> Toneladas: 1,339,880"],"type":"scatter","mode":"lines","line":{"width":4.5354330708661417,"color":"rgba(255,0,0,1)","dash":"solid"},"hoveron":"points","name":"importacion","legendgroup":"importacion","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2018,2019,2020,2021,2022,2023,2024,2025],"y":[7571598,14581329,8920757,8070408,7358161,6016162,3147117,4074929],"text":["Año: 2018 <br> Movimiento: exportacion <br> Toneladas: 7,571,598","Año: 2019 <br> Movimiento: exportacion <br> Toneladas: 14,581,329","Año: 2020 <br> Movimiento: exportacion <br> Toneladas: 8,920,757","Año: 2021 <br> Movimiento: exportacion <br> Toneladas: 8,070,408","Año: 2022 <br> Movimiento: exportacion <br> Toneladas: 7,358,161","Año: 2023 <br> Movimiento: exportacion <br> Toneladas: 6,016,162","Año: 2024 <br> Movimiento: exportacion <br> Toneladas: 3,147,117","Año: 2025 <br> Movimiento: exportacion <br> Toneladas: 4,074,929"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,0,255,1)","opacity":1,"size":11.338582677165356,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(0,0,255,1)"}},"hoveron":"points","name":"exportacion","legendgroup":"exportacion","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[2018,2019,2020,2021,2022,2023,2024,2025],"y":[3970418,3848177,4090333,3655410,5076203,5914505,3106977,1339880],"text":["Año: 2018 <br> Movimiento: importacion <br> Toneladas: 3,970,418","Año: 2019 <br> Movimiento: importacion <br> Toneladas: 3,848,177","Año: 2020 <br> Movimiento: importacion <br> Toneladas: 4,090,333","Año: 2021 <br> Movimiento: importacion <br> Toneladas: 3,655,410","Año: 2022 <br> Movimiento: importacion <br> Toneladas: 5,076,203","Año: 2023 <br> Movimiento: importacion <br> Toneladas: 5,914,505","Año: 2024 <br> Movimiento: importacion <br> Toneladas: 3,106,977","Año: 2025 <br> Movimiento: importacion <br> Toneladas: 1,339,880"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(255,0,0,1)","opacity":1,"size":11.338582677165356,"symbol":"circle","line":{"width":1.8897637795275593,"color":"rgba(255,0,0,1)"}},"hoveron":"points","name":"importacion","legendgroup":"importacion","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":40.840182648401829,"r":7.3059360730593621,"b":37.260273972602747,"l":48.949771689497723},"paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Evolución Exportaciones vs Importaciones","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[2017.6500000000001,2025.3499999999999],"tickmode":"array","ticktext":["2018","2020","2022","2024"],"tickvals":[2018,2020,2022,2024],"categoryorder":"array","categoryarray":["2018","2020","2022","2024"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"Año","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[677807.54999999993,15243401.449999999],"tickmode":"array","ticktext":["5 M","10 M","15 M"],"tickvals":[5000000,10000000,15000000],"categoryorder":"array","categoryarray":["5 M","10 M","15 M"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"Millones de Toneladas","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Flujo","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"x unified","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"2cd0214d7dc6":{"x":{},"y":{},"colour":{},"text":{},"type":"scatter"},"2cd0359d7cc0":{"x":{},"y":{},"colour":{},"text":{}}},"cur_data":"2cd0214d7dc6","visdat":{"2cd0214d7dc6":["function (y) ","x"],"2cd0359d7cc0":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><p>Evolución Interactiva de las Toneladas Exportadas vs.&nbsp;Importadas</p>
</div>
</div>
<ul>
<li><strong>Especialización Portuaria Interactiva: ¿Quién Exporta y Quién Importa?</strong></li>
</ul>
<p>Identificamos los puertos que lideran cada actividad, observando dónde se concentra la mayor actividad exportadora e importadora del país.</p>
<div class="cell" data-layout-align="center">
<details class="code-fold"><summary>Código</summary><div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="co"># 1. CREACIÓN Y LIMPIEZA DE df_comercio </span></span>
<span id="cb23-2"><a href="#cb23-2"></a>df_comercio <span class="ot">&lt;-</span> df_TM_Puerto <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3"></a>  <span class="fu">select</span>(zona_portuaria, anno_vigencia, exportacion, importacion) <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="#cb23-4"></a>  <span class="fu">rename</span>(<span class="at">Year =</span> anno_vigencia, <span class="at">Zona =</span> zona_portuaria) <span class="sc">%&gt;%</span></span>
<span id="cb23-5"><a href="#cb23-5"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb23-6"><a href="#cb23-6"></a>    <span class="at">cols =</span> <span class="fu">c</span>(exportacion, importacion),</span>
<span id="cb23-7"><a href="#cb23-7"></a>    <span class="at">names_to =</span> <span class="st">"Movimiento"</span>,</span>
<span id="cb23-8"><a href="#cb23-8"></a>    <span class="at">values_to =</span> <span class="st">"Total_Ton"</span></span>
<span id="cb23-9"><a href="#cb23-9"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb23-10"><a href="#cb23-10"></a>  <span class="fu">mutate</span>(<span class="at">Total_Ton =</span> <span class="fu">as.numeric</span>(Total_Ton)) <span class="sc">%&gt;%</span></span>
<span id="cb23-11"><a href="#cb23-11"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Total_Ton), Total_Ton <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb23-12"><a href="#cb23-12"></a></span>
<span id="cb23-13"><a href="#cb23-13"></a><span class="co"># 2. CREACIÓN DEL DATAFRAME NECESARIO (df_puertos_ranking)</span></span>
<span id="cb23-14"><a href="#cb23-14"></a>df_puertos_ranking <span class="ot">&lt;-</span> df_comercio <span class="sc">%&gt;%</span></span>
<span id="cb23-15"><a href="#cb23-15"></a>  <span class="fu">group_by</span>(Zona, Movimiento) <span class="sc">%&gt;%</span></span>
<span id="cb23-16"><a href="#cb23-16"></a>  <span class="fu">summarise</span>(<span class="at">Total_Ton =</span> <span class="fu">sum</span>(Total_Ton, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb23-17"><a href="#cb23-17"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb23-18"><a href="#cb23-18"></a></span>
<span id="cb23-19"><a href="#cb23-19"></a><span class="co"># 3. Sacar el Top 5 general (sumando todo)</span></span>
<span id="cb23-20"><a href="#cb23-20"></a>top_5_zonas <span class="ot">&lt;-</span> df_puertos_ranking <span class="sc">%&gt;%</span></span>
<span id="cb23-21"><a href="#cb23-21"></a>  <span class="fu">group_by</span>(Zona) <span class="sc">%&gt;%</span></span>
<span id="cb23-22"><a href="#cb23-22"></a>  <span class="fu">summarise</span>(<span class="at">Grand_Total =</span> <span class="fu">sum</span>(Total_Ton)) <span class="sc">%&gt;%</span></span>
<span id="cb23-23"><a href="#cb23-23"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Grand_Total)) <span class="sc">%&gt;%</span></span>
<span id="cb23-24"><a href="#cb23-24"></a>  <span class="fu">head</span>(<span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-25"><a href="#cb23-25"></a>  <span class="fu">pull</span>(Zona)</span>
<span id="cb23-26"><a href="#cb23-26"></a></span>
<span id="cb23-27"><a href="#cb23-27"></a><span class="co"># 4. Crear el gráfico con ggplot</span></span>
<span id="cb23-28"><a href="#cb23-28"></a>p_base_puertos <span class="ot">&lt;-</span> df_puertos_ranking <span class="sc">%&gt;%</span></span>
<span id="cb23-29"><a href="#cb23-29"></a>  <span class="fu">filter</span>(Zona <span class="sc">%in%</span> top_5_zonas) <span class="sc">%&gt;%</span></span>
<span id="cb23-30"><a href="#cb23-30"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Total_Ton, </span>
<span id="cb23-31"><a href="#cb23-31"></a>             <span class="at">y =</span> <span class="fu">reorder</span>(Zona, Total_Ton), </span>
<span id="cb23-32"><a href="#cb23-32"></a>             <span class="at">fill =</span> Movimiento,</span>
<span id="cb23-33"><a href="#cb23-33"></a>             <span class="at">text =</span> <span class="fu">paste</span>(<span class="st">"Puerto:"</span>, Zona, <span class="st">"&lt;br&gt;"</span>,</span>
<span id="cb23-34"><a href="#cb23-34"></a>                          <span class="st">"Flujo:"</span>, Movimiento, <span class="st">"&lt;br&gt;"</span>,</span>
<span id="cb23-35"><a href="#cb23-35"></a>                          <span class="st">"Volumen:"</span>, scales<span class="sc">::</span><span class="fu">label_comma</span>()(Total_Ton)))) <span class="sc">+</span></span>
<span id="cb23-36"><a href="#cb23-36"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span> </span>
<span id="cb23-37"><a href="#cb23-37"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_comma</span>(<span class="at">scale =</span> <span class="fl">1e-6</span>, <span class="at">suffix =</span> <span class="st">" M"</span>)) <span class="sc">+</span></span>
<span id="cb23-38"><a href="#cb23-38"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"exportacion"</span> <span class="ot">=</span> <span class="st">"blue"</span>, <span class="st">"importacion"</span> <span class="ot">=</span> <span class="st">"red"</span>)) <span class="sc">+</span></span>
<span id="cb23-39"><a href="#cb23-39"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb23-40"><a href="#cb23-40"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top 5 Zonas Portuarias: Perfil Exportador vs Importador"</span>,</span>
<span id="cb23-41"><a href="#cb23-41"></a>       <span class="at">subtitle =</span> <span class="st">"Acumulado histórico (Toneladas)"</span>,</span>
<span id="cb23-42"><a href="#cb23-42"></a>       <span class="at">x =</span> <span class="st">"Millones de Toneladas"</span>,</span>
<span id="cb23-43"><a href="#cb23-43"></a>       <span class="at">y =</span> <span class="st">"Zona Portuaria"</span>,</span>
<span id="cb23-44"><a href="#cb23-44"></a>       <span class="at">fill =</span> <span class="st">"Flujo"</span>)</span>
<span id="cb23-45"><a href="#cb23-45"></a></span>
<span id="cb23-46"><a href="#cb23-46"></a><span class="co"># 5. Convertir a Plotly para hacerlo interactivo</span></span>
<span id="cb23-47"><a href="#cb23-47"></a><span class="fu">ggplotly</span>(p_base_puertos, <span class="at">tooltip =</span> <span class="st">"text"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-48"><a href="#cb23-48"></a>  <span class="fu">layout</span>(<span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Zona Portuaria"</span>))</span></code></pre></div><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></div>
</details><div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-21cf1231ffbc236103d4" style="width:95%;height:900px;"></div>
<script type="application/json" data-for="htmlwidget-21cf1231ffbc236103d4">{"x":{"data":[{"orientation":"v","width":[3312624,3353581,7883179,23188579,17141144],"base":[0.55000000000000004,1.5499999999999998,2.5499999999999998,4.5499999999999998,3.5499999999999998],"x":[1656312,1676790.5,3941589.5,11594289.5,8570572],"y":[0.44999999999999996,0.45000000000000018,0.45000000000000018,0.90000000000000036,0.45000000000000018],"text":["Puerto: BARRANQUILLA <br> Flujo: exportacion <br> Volumen: 3,312,624","Puerto: BUENAVENTURA <br> Flujo: exportacion <br> Volumen: 3,353,581","Puerto: CARTAGENA <br> Flujo: exportacion <br> Volumen: 7,883,179","Puerto: CIENAGA <br> Flujo: exportacion <br> Volumen: 23,188,579","Puerto: G. MORROSQUILLO <br> Flujo: exportacion <br> Volumen: 17,141,144"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,0,255,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"exportacion","legendgroup":"exportacion","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[6703776,10067272,8349559,736297],"base":[1,2,3,3.9999999999999996],"x":[3351888,5033636,4174779.5,368148.5],"y":[0.45000000000000018,0.45000000000000018,0.45000000000000018,0.44999999999999973],"text":["Puerto: BARRANQUILLA <br> Flujo: importacion <br> Volumen: 6,703,776","Puerto: BUENAVENTURA <br> Flujo: importacion <br> Volumen: 10,067,272","Puerto: CARTAGENA <br> Flujo: importacion <br> Volumen: 8,349,559","Puerto: G. MORROSQUILLO <br> Flujo: importacion <br> Volumen: 736,297"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,0,0,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"importacion","legendgroup":"importacion","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":40.840182648401829,"r":7.3059360730593621,"b":37.260273972602747,"l":113.24200913242012},"paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Top 5 Zonas Portuarias: Perfil Exportador vs Importador","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-1159428.95,24348007.949999999],"tickmode":"array","ticktext":["0 M","5 M","10 M","15 M","20 M"],"tickvals":[0,5000000,10000000,15000000,20000000],"categoryorder":"array","categoryarray":["0 M","5 M","10 M","15 M","20 M"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"Millones de Toneladas","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,5.5999999999999996],"tickmode":"array","ticktext":["BARRANQUILLA","BUENAVENTURA","CARTAGENA","G. MORROSQUILLO","CIENAGA"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["BARRANQUILLA","BUENAVENTURA","CARTAGENA","G. MORROSQUILLO","CIENAGA"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0,"zeroline":false,"anchor":"x","title":"Zona Portuaria","hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","layer":"below","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Flujo","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"2cd0588e42ea":{"x":{},"y":{},"fill":{},"text":{},"type":"bar"}},"cur_data":"2cd0588e42ea","visdat":{"2cd0588e42ea":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><p>Top 5 Zonas Portuarias Interactivas: Perfil Exportador vs.&nbsp;Importador</p>
</div>
</div>
<p><strong>Conclusión Económica</strong></p>
<p><strong>Balanza Comercial, Flujos y Desafíos Estructurales</strong></p>
<p>Los datos analizados permiten extraer conclusiones fundamentales sobre la economía portuaria y las dinámicas comerciales de Colombia: como se observa en el primer gráfico, la línea de Exportaciones (Azul) se mantiene consistentemente por encima de la de Importaciones (Roja) en términos de volumen físico (toneladas).</p>
<ul>
<li><p><strong>Interpretación:</strong> Colombia es un país que, físicamente, envía al exterior mucha más materia de la que recibe. Esto es típico de economías basadas en commodities (carbón y petróleo), que son mercancías muy pesadas y voluminosas.</p></li>
<li><p><strong>La “Ilusión” del Valor:</strong> Es importante notar que, aunque Colombia exporta más toneladas, esto no significa que gane más dinero de lo que lo que gasta. Colombia exporta toneladas de carbón (barato por kilo) e importa contenedores con tecnología y manufacturas (caras por kilo).</p></li>
</ul>
<p>—</p>
<p><strong>Especialización Portuaria</strong></p>
<p>El gráfico de barras muestra una clara división del trabajo entre las zonas portuarias, reflejando su especialización económica:</p>
<ul>
<li><p><strong>Puertos Exportadores de Materias Primas:</strong> Puertos como Ciénaga o Guajira (Puerto Bolívar) son casi exclusivamente exportadores (salida de carbón). Su función está ligada directamente a la demanda energética global.</p></li>
<li><p><strong>Puertos Mixtos/Importadores:</strong> Puertos como Buenaventura y Cartagena tienen un perfil más mixto o importador, siendo vitales para el abastecimiento interno del país (seguridad alimentaria y bienes de consumo).</p></li>
</ul>
<hr>
<ul>
<li><strong>Resumen económico del apartado</strong></li>
</ul>
<p>La salud del tráfico marítimo colombiano depende fuertemente de la demanda internacional de materias primas energéticas, lo cual asegura el volumen de exportación. Al mismo tiempo, el consumo interno sigue dependiendo de la eficiencia de los puertos del Caribe y Pacífico para traer productos manufacturados del exterior, lo cual se traduce en una dependencia estructural de las importaciones de alto valor.</p>
</section><section id="conclusión" class="level1"><h1>8. Conclusión</h1>
<p>Tras este análisis del tráfico marítimo colombiano confirmamos una estructura logística asimétrica, marcada por la dualidad entre la Costa Caribe y el Pacífico. El estudio geográfico validó la predominancia de la Costa Caribe como el principal centro portuario, mientras que el Pacífico depende críticamente de Buenaventura. Operacionalmente, se demostró que la mayoría de los arribos de buques son de tráfico nacional, y la composición de la flota se concentra en portacontenedores, graneleros y tanqueros, reflejando la especialización de la economía en commodities pesados y el manejo de contenedores. En términos de actividad económica, el sistema mostró que las exportaciones superan a las importaciones en volumen físico (toneladas), una característica esperable de una economía productora de materias primas. Sin embargo, esta actividad está sujeta a la volatilidad del mercado global, como se observó en la evolución temporal del tráfico, sensible a eventos como la pandemia y las crisis de precios. En definitiva, la resiliencia del sistema depende de la eficiencia de los puertos del Caribe para gestionar grandes volúmenes y la mitigación del riesgo en la conexión terrestre de la Costa Pacífica.</p>
</section><section id="biografia" class="level1"><h1>9. Biografia</h1>
<ul>
<li><p>Ministerio de Transporte de Colombia. (s.f.). Tráfico Portuario Marítimo en Colombia. Datos Abiertos Colombia. Recuperado de https://www.datos.gov.co/Transporte/Trafico-Portuario-Mar-timo-En-Colombia/5r3g-zv5z/about_data</p></li>
<li><p>Dirección General Marítima de Colombia (Dimar). (s.f.). Tráfico marítimo. Portal Marítimo Colombiano. Recuperado de https://www.dimar.mil.co/trafico-maritimo</p></li>
<li><p>Superintendencia de Transporte de Colombia. (s.f.). Estadísticas de Tráfico Portuario en Colombia. Supertransporte. Recuperado de https://www.supertransporte.gov.co/index.php/superintendencia-delegada-de-puertos/estadisticas-trafico-portuario-en-colombia/</p></li>
<li><p>Milenioscuro. (2022). Mapa de Colombia (topografía) [Mapa]. Wikimedia Commons. https://commons.wikimedia.org/w/index.php?curid=115522497</p></li>
<li><p>Eniol. (2013). Área Cultural Andina – División [Mapa]. Wikimedia Commons. https://commons.wikimedia.org/w/index.php?curid=25366386</p></li>
</ul>


<!-- -->

</section>
</div>
</section><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reutilizar</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/deed.es">CC BY 4.0</a></div></div></section></div></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copiada");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copiada");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Ejecutar el código</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb24" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb24-1"><a href="#cb24-1"></a><span class="co">---</span></span>
<span id="cb24-2"><a href="#cb24-2"></a><span class="an">title:</span><span class="co"> "El tráfico marítimo de Colombia"</span></span>
<span id="cb24-3"><a href="#cb24-3"></a><span class="an">description:</span><span class="co"> |</span></span>
<span id="cb24-4"><a href="#cb24-4"></a></span>
<span id="cb24-5"><a href="#cb24-5"></a><span class="an">author:</span><span class="co">   </span></span>
<span id="cb24-6"><a href="#cb24-6"></a><span class="co">  - Yutao Henry Jiang Zheng (yujiangz@alumni.uv.es)\n   </span></span>
<span id="cb24-7"><a href="#cb24-7"></a><span class="co">  - Lucas Osejo Martínez (luomar2@alumni.uv.es)\n</span></span>
<span id="cb24-8"><a href="#cb24-8"></a><span class="co">  - Javier Arnau Basagoiti Montagut (jabamon@alumni.uv.es)</span></span>
<span id="cb24-9"><a href="#cb24-9"></a><span class="an">date:</span><span class="co"> 2025-12-02                           #--</span></span>
<span id="cb24-10"><a href="#cb24-10"></a><span class="an">categories:</span><span class="co"> [trabajo BigData, Tráfico Marítimo]      #--</span></span>
<span id="cb24-11"><a href="#cb24-11"></a><span class="an">image:</span><span class="co"> "Directions Boat"</span></span>
<span id="cb24-12"><a href="#cb24-12"></a><span class="an">title-block-banner:</span><span class="co"> "imagenes/Banner_puerto.jpg"</span></span>
<span id="cb24-13"><a href="#cb24-13"></a><span class="an">title-block-banner-color:</span><span class="co"> "skyblue3"</span></span>
<span id="cb24-14"><a href="#cb24-14"></a></span>
<span id="cb24-15"><a href="#cb24-15"></a><span class="an">toc-depth:</span><span class="co"> 3</span></span>
<span id="cb24-16"><a href="#cb24-16"></a><span class="an">smooth-scroll:</span><span class="co"> true</span></span>
<span id="cb24-17"><a href="#cb24-17"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb24-18"><a href="#cb24-18"></a><span class="co">  html:</span></span>
<span id="cb24-19"><a href="#cb24-19"></a><span class="co">    link-external-newwindow: true</span></span>
<span id="cb24-20"><a href="#cb24-20"></a><span class="an">code-tools:</span><span class="co"> true</span></span>
<span id="cb24-21"><a href="#cb24-21"></a><span class="an">code-link:</span><span class="co"> true</span></span>
<span id="cb24-22"><a href="#cb24-22"></a><span class="co">---</span></span>
<span id="cb24-23"><a href="#cb24-23"></a></span>
<span id="cb24-24"><a href="#cb24-24"></a></span>
<span id="cb24-25"><a href="#cb24-25"></a><span class="fu"># 1. Introducción</span></span>
<span id="cb24-26"><a href="#cb24-26"></a></span>
<span id="cb24-27"><a href="#cb24-27"></a>El comercio marítimo es uno de los pilares más grandes de la economía colombiana y su sistema portuario es vital para su conexión global. En este trabajo realizamos un análisis profundo sobre el tráfico que atraviesa los principales puertos del país.</span>
<span id="cb24-28"><a href="#cb24-28"></a>Comenzamos examinando la geografía y distribución de los puertos clave, una visualización esencial para entender la marcada asimetría entre la Costa Caribe y el Pacífico. Posteriormente, el estudio se concentra en las operaciones, detallando la tipología de las embarcaciones que llegan y la composición del cargamento que se moviliza. Finalmente, interpretamos el desempeño económico del sistema a través del análisis de las importaciones y exportaciones, y se revisa su evolución temporal para obtener una perspectiva completa de la competitividad logística de Colombia.</span>
<span id="cb24-29"><a href="#cb24-29"></a></span>
<span id="cb24-30"><a href="#cb24-30"></a><span class="fu"># 2. Datos</span></span>
<span id="cb24-31"><a href="#cb24-31"></a></span>
<span id="cb24-32"><a href="#cb24-32"></a>Para realizar el trabajo utiilizamos los siguientes datos:</span>
<span id="cb24-33"><a href="#cb24-33"></a></span>
<span id="cb24-34"><a href="#cb24-34"></a>::: {.panel-tabset}</span>
<span id="cb24-35"><a href="#cb24-35"></a></span>
<span id="cb24-36"><a href="#cb24-36"></a><span class="fu">## Fuente de los datos</span></span>
<span id="cb24-37"><a href="#cb24-37"></a>Los datos utilizados provienen de distintas fuentes, entre ellas la base pública “<span class="co">[</span><span class="ot">Datos Abiertos</span><span class="co">](https://www.datos.gov.co/Transporte/Trafico-Portuario-Mar-timo-En-Colombia/5r3g-zv5z/about_data)</span>{target="_blank"}” de Colombia, la Superintendencia de Transporte (<span class="co">[</span><span class="ot">SuperTransporte</span><span class="co">](https://www.supertransporte.gov.co/index.php/superintendencia-delegada-de-puertos/estadisticas-trafico-portuario-en-colombia/)</span>{target="_blank"}) y la Dirección General Marítima (<span class="co">[</span><span class="ot">DIMAR</span><span class="co">](https://www.dimar.mil.co/trafico-maritimo)</span>{target="_blank"}).</span>
<span id="cb24-38"><a href="#cb24-38"></a></span>
<span id="cb24-39"><a href="#cb24-39"></a></span>
<span id="cb24-40"><a href="#cb24-40"></a></span>
<span id="cb24-41"><a href="#cb24-41"></a></span>
<span id="cb24-42"><a href="#cb24-42"></a></span>
<span id="cb24-43"><a href="#cb24-43"></a><span class="fu">## Datos usados</span></span>
<span id="cb24-44"><a href="#cb24-44"></a><span class="ss">- </span>df_TM_Puerto → Tráfico portuario por ciudad, incluye importaciones y exportaciones y        </span>
<span id="cb24-45"><a href="#cb24-45"></a>                               diferencia entre público y privado</span>
<span id="cb24-46"><a href="#cb24-46"></a><span class="ss">- </span>df_C.Arribo → La cantidad de arribos por puerto, diferencia entre nacional e internacional</span>
<span id="cb24-47"><a href="#cb24-47"></a><span class="ss">- </span>df_tipoBarco → Los tipos de barcos que llega a cada puerto</span>
<span id="cb24-48"><a href="#cb24-48"></a><span class="ss">- </span>df_TipoCarga → El tipo de cargamento que llega a cada puerto </span>
<span id="cb24-49"><a href="#cb24-49"></a><span class="ss">- </span>df_CargaPuerto → La cantidad de movimiento de carga de cada puerto</span>
<span id="cb24-50"><a href="#cb24-50"></a></span>
<span id="cb24-51"><a href="#cb24-51"></a><span class="fu">## Paquetes utilizados</span></span>
<span id="cb24-54"><a href="#cb24-54"></a><span class="in">```{r}</span></span>
<span id="cb24-55"><a href="#cb24-55"></a><span class="co">#| results: hide </span></span>
<span id="cb24-56"><a href="#cb24-56"></a><span class="co">#| warning: false </span></span>
<span id="cb24-57"><a href="#cb24-57"></a><span class="co">#| message: false</span></span>
<span id="cb24-58"><a href="#cb24-58"></a></span>
<span id="cb24-59"><a href="#cb24-59"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb24-60"><a href="#cb24-60"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb24-61"><a href="#cb24-61"></a><span class="fu">library</span>(rio) </span>
<span id="cb24-62"><a href="#cb24-62"></a><span class="fu">library</span>(janitor)</span>
<span id="cb24-63"><a href="#cb24-63"></a><span class="fu">library</span>(ggthemes)</span>
<span id="cb24-64"><a href="#cb24-64"></a><span class="fu">library</span>(scales)</span>
<span id="cb24-65"><a href="#cb24-65"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb24-66"><a href="#cb24-66"></a><span class="fu">library</span>(plotly)</span>
<span id="cb24-67"><a href="#cb24-67"></a><span class="fu">library</span>(sf)</span>
<span id="cb24-68"><a href="#cb24-68"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb24-69"><a href="#cb24-69"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb24-70"><a href="#cb24-70"></a><span class="fu">library</span>(rnaturalearthdata)</span>
<span id="cb24-71"><a href="#cb24-71"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb24-72"><a href="#cb24-72"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb24-73"><a href="#cb24-73"></a><span class="fu">library</span>(gifski)</span>
<span id="cb24-74"><a href="#cb24-74"></a><span class="in">```</span></span>
<span id="cb24-75"><a href="#cb24-75"></a></span>
<span id="cb24-76"><a href="#cb24-76"></a></span>
<span id="cb24-77"><a href="#cb24-77"></a><span class="fu">## Codigo de los datos</span></span>
<span id="cb24-78"><a href="#cb24-78"></a></span>
<span id="cb24-81"><a href="#cb24-81"></a><span class="in">```{r}</span></span>
<span id="cb24-82"><a href="#cb24-82"></a><span class="co">#| results: hide </span></span>
<span id="cb24-83"><a href="#cb24-83"></a><span class="co">#| warning: false </span></span>
<span id="cb24-84"><a href="#cb24-84"></a><span class="co">#| message: false</span></span>
<span id="cb24-85"><a href="#cb24-85"></a></span>
<span id="cb24-86"><a href="#cb24-86"></a>df_TM_Puerto <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"https://www.datos.gov.co/resource/5r3g-zv5z.csv"</span>)</span>
<span id="cb24-87"><a href="#cb24-87"></a>df_TM_Puerto <span class="ot">&lt;-</span> df_TM_Puerto<span class="sc">|&gt;</span><span class="fu">group_by</span>(zona_portuaria)<span class="sc">|&gt;</span><span class="fu">mutate</span>(<span class="at">Costa=</span><span class="fu">case_when</span>(zona_portuaria<span class="sc">%in%</span><span class="fu">c</span>(<span class="st">"BARRANCABERMEJA"</span>,<span class="st">"Z.P. RIO MAGDALENA"</span>)<span class="sc">~</span><span class="st">"Fluvial"</span>,zona_portuaria<span class="sc">%in%</span><span class="fu">c</span>(<span class="st">"BUENAVENTURA"</span>,<span class="st">"TUMACO"</span>)<span class="sc">~</span><span class="st">"Pacifico"</span>, <span class="at">.default=</span><span class="st">"Caribe"</span>))</span>
<span id="cb24-88"><a href="#cb24-88"></a></span>
<span id="cb24-89"><a href="#cb24-89"></a>df_C.Arribo <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"https://www.dimar.mil.co/sites/default/files/noticias/E1-FOR-117-Series-Historicas-trafico-maritimo-2018-2024.xlsx"</span>, </span>
<span id="cb24-90"><a href="#cb24-90"></a>                              <span class="at">col_names =</span> <span class="cn">FALSE</span>,</span>
<span id="cb24-91"><a href="#cb24-91"></a>                              <span class="at">sheet =</span> <span class="st">"Serie histórica 1"</span>,</span>
<span id="cb24-92"><a href="#cb24-92"></a>                              <span class="at">skip =</span> <span class="dv">10</span>)</span>
<span id="cb24-93"><a href="#cb24-93"></a>df_C.Arribo <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(df_C.Arribo)</span>
<span id="cb24-94"><a href="#cb24-94"></a>df_C.Arribo <span class="ot">&lt;-</span> df_C.Arribo <span class="sc">%&gt;%</span> tidyr<span class="sc">::</span><span class="fu">fill</span>(x1, <span class="at">.direction =</span> <span class="st">"down"</span>)</span>
<span id="cb24-95"><a href="#cb24-95"></a>df_C.Arribo <span class="ot">&lt;-</span> df_C.Arribo <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x1, <span class="st">"^Subtotal"</span>) )</span>
<span id="cb24-96"><a href="#cb24-96"></a>df_C.Arribo <span class="ot">&lt;-</span> df_C.Arribo <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x1, <span class="st">"^Total"</span>)  )</span>
<span id="cb24-97"><a href="#cb24-97"></a>df_C.Arribo <span class="ot">&lt;-</span> df_C.Arribo <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x1, <span class="st">"^Fuente."</span>))</span>
<span id="cb24-98"><a href="#cb24-98"></a>df_C.Arribo <span class="ot">&lt;-</span> df_C.Arribo <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x1, <span class="st">"^Nota"</span>) )</span>
<span id="cb24-99"><a href="#cb24-99"></a>df_C.Arribo <span class="ot">&lt;-</span> df_C.Arribo <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x3, <span class="st">"Arribo"</span>)) </span>
<span id="cb24-100"><a href="#cb24-100"></a>df_C.Arribo <span class="ot">&lt;-</span> df_C.Arribo <span class="sc">%&gt;%</span> janitor<span class="sc">::</span><span class="fu">remove_empty</span>(<span class="st">"rows"</span>)</span>
<span id="cb24-101"><a href="#cb24-101"></a>df_C.Arribo <span class="ot">&lt;-</span> df_C.Arribo <span class="sc">%&gt;%</span> tidyr<span class="sc">::</span><span class="fu">fill</span>(x2, <span class="at">.direction =</span> <span class="st">"down"</span>)</span>
<span id="cb24-102"><a href="#cb24-102"></a>my_anos <span class="ot">&lt;-</span> <span class="dv">2018</span><span class="sc">:</span><span class="dv">2024</span></span>
<span id="cb24-103"><a href="#cb24-103"></a>n_my_anos <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="dv">2018</span><span class="sc">:</span><span class="dv">2024</span>)</span>
<span id="cb24-104"><a href="#cb24-104"></a>meses <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"enero"</span>, <span class="st">"febrero"</span>, <span class="st">"marzo"</span>, <span class="st">"abril"</span>, <span class="st">"mayo"</span>, <span class="st">"junio"</span>,</span>
<span id="cb24-105"><a href="#cb24-105"></a>           <span class="st">"julio"</span>, <span class="st">"agosto"</span>, <span class="st">"septiembre"</span>, <span class="st">"octubre"</span>, <span class="st">"noviembre"</span>, <span class="st">"diciembre"</span>)</span>
<span id="cb24-106"><a href="#cb24-106"></a>zz1 <span class="ot">&lt;-</span> <span class="fu">rep</span>(my_anos, <span class="at">each =</span> (<span class="dv">12</span><span class="sc">+</span><span class="dv">1</span>)<span class="sc">*</span><span class="dv">2</span>) ; zz1 ; <span class="fu">length</span>(zz1)  </span>
<span id="cb24-107"><a href="#cb24-107"></a>zz2 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"internac"</span>, <span class="st">"nacional"</span>),  <span class="at">times =</span> n_my_anos <span class="sc">*</span> ((<span class="dv">12</span><span class="sc">+</span><span class="dv">1</span>)<span class="sc">*</span><span class="dv">2</span>)<span class="sc">/</span><span class="dv">2</span>) ; zz2; <span class="fu">length</span>(zz2)</span>
<span id="cb24-108"><a href="#cb24-108"></a>zz3a <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(meses, <span class="st">"total"</span>), <span class="at">each =</span> <span class="dv">2</span>) </span>
<span id="cb24-109"><a href="#cb24-109"></a>zz3b <span class="ot">&lt;-</span> <span class="fu">rep</span>(zz3a,  <span class="at">times =</span> n_my_anos) ; zz3b ; <span class="fu">length</span>(zz3b) </span>
<span id="cb24-110"><a href="#cb24-110"></a>zz4 <span class="ot">&lt;-</span> <span class="fu">paste</span>(zz2, zz3b, zz1, <span class="at">sep =</span> <span class="st">"_"</span>)  ; zz4; <span class="fu">length</span>(zz4)</span>
<span id="cb24-111"><a href="#cb24-111"></a>zz5 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"region"</span>, <span class="st">"puerto"</span>, zz4) ; <span class="fu">length</span>(zz5)</span>
<span id="cb24-112"><a href="#cb24-112"></a><span class="fu">names</span>(df_C.Arribo) <span class="ot">&lt;-</span> zz5 ; <span class="fu">length</span>(zz5)</span>
<span id="cb24-113"><a href="#cb24-113"></a>df_C.Arribo <span class="ot">&lt;-</span> df_C.Arribo <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>))</span>
<span id="cb24-114"><a href="#cb24-114"></a>df_C.Arribo <span class="ot">&lt;-</span> df_C.Arribo <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="dv">3</span><span class="sc">:</span><span class="fu">length</span>(df_C.Arribo))</span>
<span id="cb24-115"><a href="#cb24-115"></a>df_C.Arribo <span class="ot">&lt;-</span> df_C.Arribo <span class="sc">%&gt;%</span> </span>
<span id="cb24-116"><a href="#cb24-116"></a>  tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(<span class="at">col =</span> name, </span>
<span id="cb24-117"><a href="#cb24-117"></a>                              <span class="at">names =</span> <span class="fu">c</span>(<span class="st">"tipo"</span>, <span class="st">"mes"</span>, <span class="st">"year"</span>), </span>
<span id="cb24-118"><a href="#cb24-118"></a>                              <span class="at">delim =</span> <span class="st">"_"</span>)</span>
<span id="cb24-119"><a href="#cb24-119"></a>df_C.Arribo <span class="ot">&lt;-</span> df_C.Arribo <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">value =</span> <span class="fu">as.numeric</span>(value))</span>
<span id="cb24-120"><a href="#cb24-120"></a></span>
<span id="cb24-121"><a href="#cb24-121"></a>df_tipoBarco <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"https://www.dimar.mil.co/sites/default/files/noticias/E1-FOR-117-Series-Historicas-trafico-maritimo-2018-2024.xlsx"</span>, </span>
<span id="cb24-122"><a href="#cb24-122"></a>                              <span class="at">col_names =</span> <span class="cn">FALSE</span>,</span>
<span id="cb24-123"><a href="#cb24-123"></a>                              <span class="at">sheet =</span> <span class="st">"Serie histórica 2"</span>,</span>
<span id="cb24-124"><a href="#cb24-124"></a>                              <span class="at">skip =</span> <span class="dv">10</span>)</span>
<span id="cb24-125"><a href="#cb24-125"></a>df_tipoBarco <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(df_tipoBarco)</span>
<span id="cb24-126"><a href="#cb24-126"></a>df_tipoBarco <span class="ot">&lt;-</span> df_tipoBarco <span class="sc">%&gt;%</span> tidyr<span class="sc">::</span><span class="fu">fill</span>(x1, <span class="at">.direction =</span> <span class="st">"down"</span>)</span>
<span id="cb24-127"><a href="#cb24-127"></a>df_tipoBarco <span class="ot">&lt;-</span> df_tipoBarco <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x1, <span class="st">"^Subtotal"</span>) )</span>
<span id="cb24-128"><a href="#cb24-128"></a>df_tipoBarco <span class="ot">&lt;-</span> df_tipoBarco <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x1, <span class="st">"^Total"</span>)  )</span>
<span id="cb24-129"><a href="#cb24-129"></a>df_tipoBarco <span class="ot">&lt;-</span> df_tipoBarco <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x1, <span class="st">"^Fuente."</span>))</span>
<span id="cb24-130"><a href="#cb24-130"></a>df_tipoBarco <span class="ot">&lt;-</span> df_tipoBarco <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x1, <span class="st">"^Nota"</span>) )</span>
<span id="cb24-131"><a href="#cb24-131"></a>df_tipoBarco <span class="ot">&lt;-</span> df_tipoBarco <span class="sc">%&gt;%</span> janitor<span class="sc">::</span><span class="fu">remove_empty</span>(<span class="st">"rows"</span>)</span>
<span id="cb24-132"><a href="#cb24-132"></a>df_tipoBarco <span class="ot">&lt;-</span> df_tipoBarco <span class="sc">%&gt;%</span> tidyr<span class="sc">::</span><span class="fu">fill</span>(x2, <span class="at">.direction =</span> <span class="st">"down"</span>)</span>
<span id="cb24-133"><a href="#cb24-133"></a>my_anos <span class="ot">&lt;-</span> <span class="dv">2018</span><span class="sc">:</span><span class="dv">2024</span></span>
<span id="cb24-134"><a href="#cb24-134"></a>n_my_anos <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="dv">2018</span><span class="sc">:</span><span class="dv">2024</span>)</span>
<span id="cb24-135"><a href="#cb24-135"></a>meses <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"enero"</span>, <span class="st">"febrero"</span>, <span class="st">"marzo"</span>, <span class="st">"abril"</span>, <span class="st">"mayo"</span>, <span class="st">"junio"</span>,</span>
<span id="cb24-136"><a href="#cb24-136"></a>           <span class="st">"julio"</span>, <span class="st">"agosto"</span>, <span class="st">"septiembre"</span>, <span class="st">"octubre"</span>, <span class="st">"noviembre"</span>, <span class="st">"diciembre"</span>)</span>
<span id="cb24-137"><a href="#cb24-137"></a>zz1 <span class="ot">&lt;-</span> <span class="fu">rep</span>(my_anos, <span class="at">each =</span> (<span class="dv">12</span>)<span class="sc">+</span><span class="dv">1</span>) ; zz1 ; <span class="fu">length</span>(zz1) </span>
<span id="cb24-138"><a href="#cb24-138"></a>zz3a <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(meses, <span class="st">"total"</span>)) </span>
<span id="cb24-139"><a href="#cb24-139"></a>zz3b <span class="ot">&lt;-</span> <span class="fu">rep</span>(zz3a,  <span class="at">times =</span> n_my_anos) ; zz3b ; <span class="fu">length</span>(zz3b) </span>
<span id="cb24-140"><a href="#cb24-140"></a>zz4 <span class="ot">&lt;-</span> <span class="fu">paste</span>( zz3b, zz1, <span class="at">sep =</span> <span class="st">"_"</span>)  ; zz4; <span class="fu">length</span>(zz4)</span>
<span id="cb24-141"><a href="#cb24-141"></a>zz5 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Actividad y Motivo de Arribo"</span>, <span class="st">"tipo"</span>, zz4) ; <span class="fu">length</span>(zz5)</span>
<span id="cb24-142"><a href="#cb24-142"></a><span class="fu">names</span>(df_tipoBarco) <span class="ot">&lt;-</span> zz5 ; <span class="fu">length</span>(zz5)</span>
<span id="cb24-143"><a href="#cb24-143"></a>df_tipoBarco <span class="ot">&lt;-</span> df_tipoBarco <span class="sc">%&gt;%</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb24-144"><a href="#cb24-144"></a>df_tipoBarco <span class="ot">&lt;-</span> df_tipoBarco <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="dv">12</span>))</span>
<span id="cb24-145"><a href="#cb24-145"></a>df_tipoBarco <span class="ot">&lt;-</span> df_tipoBarco <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="dv">3</span><span class="sc">:</span><span class="fu">length</span>(df_tipoBarco))</span>
<span id="cb24-146"><a href="#cb24-146"></a>df_tipoBarco <span class="ot">&lt;-</span> df_tipoBarco <span class="sc">%&gt;%</span> </span>
<span id="cb24-147"><a href="#cb24-147"></a>  tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(<span class="at">col =</span> name, </span>
<span id="cb24-148"><a href="#cb24-148"></a>                              <span class="at">names =</span> <span class="fu">c</span>(<span class="st">"mes"</span>, <span class="st">"year"</span>), </span>
<span id="cb24-149"><a href="#cb24-149"></a>                              <span class="at">delim =</span> <span class="st">"_"</span>, <span class="at">too_many =</span> <span class="st">"merge"</span>)</span>
<span id="cb24-150"><a href="#cb24-150"></a>df_tipoBarco <span class="ot">&lt;-</span> df_tipoBarco <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">value =</span> <span class="fu">as.numeric</span>(value))<span class="sc">|&gt;</span><span class="fu">mutate</span>(<span class="at">tipo=</span><span class="fu">case_when</span>(actividad_y_motivo_de_arribo<span class="sc">%in%</span><span class="fu">c</span>(<span class="st">"Reparación"</span>,<span class="st">"Aprovisionamiento"</span>,<span class="st">"Arribo forzoso"</span>)<span class="sc">~</span><span class="st">"M.Arribo_Especial"</span>, <span class="at">.default=</span><span class="st">"Actividad"</span>))</span>
<span id="cb24-151"><a href="#cb24-151"></a></span>
<span id="cb24-152"><a href="#cb24-152"></a>df_TipoCarga <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"https://www.dimar.mil.co/sites/default/files/noticias/E1-FOR-117-Series-Historicas-trafico-maritimo-2018-2024.xlsx"</span>, </span>
<span id="cb24-153"><a href="#cb24-153"></a>                              <span class="at">col_names =</span> <span class="cn">FALSE</span>,</span>
<span id="cb24-154"><a href="#cb24-154"></a>                              <span class="at">sheet =</span> <span class="st">"Serie histórica 3"</span>,</span>
<span id="cb24-155"><a href="#cb24-155"></a>                              <span class="at">skip =</span> <span class="dv">10</span>)</span>
<span id="cb24-156"><a href="#cb24-156"></a></span>
<span id="cb24-157"><a href="#cb24-157"></a>df_TipoCarga <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(df_TipoCarga)</span>
<span id="cb24-158"><a href="#cb24-158"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> tidyr<span class="sc">::</span><span class="fu">fill</span>(x1, <span class="at">.direction =</span> <span class="st">"down"</span>)</span>
<span id="cb24-159"><a href="#cb24-159"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x1, <span class="st">"^Subtotal"</span>) )</span>
<span id="cb24-160"><a href="#cb24-160"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x1, <span class="st">"^Total"</span>)  )</span>
<span id="cb24-161"><a href="#cb24-161"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x1, <span class="st">"^Fuente."</span>))</span>
<span id="cb24-162"><a href="#cb24-162"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x1, <span class="st">"^Nota"</span>) )</span>
<span id="cb24-163"><a href="#cb24-163"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(x3, <span class="st">"Arribo"</span>))</span>
<span id="cb24-164"><a href="#cb24-164"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> janitor<span class="sc">::</span><span class="fu">remove_empty</span>(<span class="st">"rows"</span>)</span>
<span id="cb24-165"><a href="#cb24-165"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb24-166"><a href="#cb24-166"></a>puertos_Caribe <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Cartagena"</span>, <span class="st">"Santa Marta"</span>, <span class="st">"Barranquilla"</span>, <span class="st">"Urabá y del Darién"</span>, <span class="st">"Coveñas"</span>,<span class="st">"Puerto Bolívar"</span>, <span class="st">"Riohacha"</span>, <span class="st">"San Andrés"</span>, <span class="st">"Providencia"</span>)</span>
<span id="cb24-167"><a href="#cb24-167"></a>puertos_Pacifico <span class="ot">&lt;-</span> <span class="fu">c</span>( <span class="st">"Buenaventura"</span>, <span class="st">"Tumaco"</span>, <span class="st">"Guapi"</span>, <span class="st">"Bahía Solano"</span>)</span>
<span id="cb24-168"><a href="#cb24-168"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> <span class="fu">filter</span>( <span class="sc">!</span>(x2 <span class="sc">%in%</span> puertos_Caribe))</span>
<span id="cb24-169"><a href="#cb24-169"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> <span class="fu">filter</span>( <span class="sc">!</span>(x2 <span class="sc">%in%</span> puertos_Pacifico))</span>
<span id="cb24-170"><a href="#cb24-170"></a>puertos <span class="ot">&lt;-</span> <span class="fu">c</span>(puertos_Caribe, puertos_Pacifico) <span class="sc">%&gt;%</span> </span>
<span id="cb24-171"><a href="#cb24-171"></a>  <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>, .)</span>
<span id="cb24-172"><a href="#cb24-172"></a>zz_puertos <span class="ot">&lt;-</span> <span class="fu">rep</span>(puertos, <span class="at">each =</span> <span class="dv">9</span>) </span>
<span id="cb24-173"><a href="#cb24-173"></a>zz_puertos <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"puerto"</span>, zz_puertos)</span>
<span id="cb24-174"><a href="#cb24-174"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">x1a =</span> zz_puertos, <span class="at">.after =</span> x1)</span>
<span id="cb24-175"><a href="#cb24-175"></a>df_TipoCarga[<span class="dv">1</span>, <span class="dv">3</span>] <span class="ot">&lt;-</span> <span class="st">"tipoBarco"</span></span>
<span id="cb24-176"><a href="#cb24-176"></a>my_anos <span class="ot">&lt;-</span> <span class="dv">2018</span><span class="sc">:</span><span class="dv">2024</span></span>
<span id="cb24-177"><a href="#cb24-177"></a>n_my_anos <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="dv">2018</span><span class="sc">:</span><span class="dv">2024</span>)</span>
<span id="cb24-178"><a href="#cb24-178"></a>meses <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"enero"</span>, <span class="st">"febrero"</span>, <span class="st">"marzo"</span>, <span class="st">"abril"</span>, <span class="st">"mayo"</span>, <span class="st">"junio"</span>,</span>
<span id="cb24-179"><a href="#cb24-179"></a>           <span class="st">"julio"</span>, <span class="st">"agosto"</span>, <span class="st">"septiembre"</span>, <span class="st">"octubre"</span>, <span class="st">"noviembre"</span>, <span class="st">"diciembre"</span>)</span>
<span id="cb24-180"><a href="#cb24-180"></a>my_xx <span class="ot">&lt;-</span> <span class="dv">1</span>  <span class="co">#- xq no hay dif entre internacional y nacional</span></span>
<span id="cb24-181"><a href="#cb24-181"></a>zz1 <span class="ot">&lt;-</span> <span class="fu">rep</span>(my_anos, <span class="at">each =</span> (<span class="dv">12</span><span class="sc">+</span><span class="dv">1</span>)<span class="sc">*</span>my_xx) ; zz1 ; <span class="fu">length</span>(zz1) </span>
<span id="cb24-182"><a href="#cb24-182"></a>zz3a <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="fu">c</span>(meses, <span class="st">"total"</span>), <span class="at">each =</span> <span class="dv">1</span>) </span>
<span id="cb24-183"><a href="#cb24-183"></a>zz3b <span class="ot">&lt;-</span> <span class="fu">rep</span>(zz3a,  <span class="at">times =</span> n_my_anos) ; zz3b ; <span class="fu">length</span>(zz3b) </span>
<span id="cb24-184"><a href="#cb24-184"></a>zz4 <span class="ot">&lt;-</span> <span class="fu">paste</span>(zz3b, zz1, <span class="at">sep =</span> <span class="st">"_"</span>)  ; zz4; <span class="fu">length</span>(zz4)</span>
<span id="cb24-185"><a href="#cb24-185"></a>zz5 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"region"</span>, <span class="st">"puerto"</span>, <span class="st">"puertBarco"</span>, zz4) ; <span class="fu">length</span>(zz5)</span>
<span id="cb24-186"><a href="#cb24-186"></a><span class="fu">names</span>(df_TipoCarga) <span class="ot">&lt;-</span> zz5 ; <span class="fu">length</span>(zz5)</span>
<span id="cb24-187"><a href="#cb24-187"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb24-188"><a href="#cb24-188"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="dv">4</span><span class="sc">:</span><span class="fu">length</span>(df_TipoCarga))</span>
<span id="cb24-189"><a href="#cb24-189"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> </span>
<span id="cb24-190"><a href="#cb24-190"></a>  tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(<span class="at">col =</span> name, </span>
<span id="cb24-191"><a href="#cb24-191"></a>                              <span class="at">names =</span> <span class="fu">c</span>(<span class="st">"mes"</span>, <span class="st">"year"</span>), </span>
<span id="cb24-192"><a href="#cb24-192"></a>                              <span class="at">delim =</span> <span class="st">"_"</span>)</span>
<span id="cb24-193"><a href="#cb24-193"></a>df_TipoCarga <span class="ot">&lt;-</span> df_TipoCarga <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">value =</span> <span class="fu">as.numeric</span>(value))</span>
<span id="cb24-194"><a href="#cb24-194"></a></span>
<span id="cb24-195"><a href="#cb24-195"></a>df_CargaPuerto <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"https://www.supertransporte.gov.co/documentos/2025/noviembre/Puertos_12/Historico_2017-2024.xlsx"</span>, <span class="at">col_names =</span> <span class="cn">TRUE</span>, <span class="at">skip =</span> <span class="dv">2</span>)</span>
<span id="cb24-196"><a href="#cb24-196"></a>df_CargaPuerto <span class="ot">&lt;-</span> df_CargaPuerto <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="dv">13</span><span class="sc">:</span><span class="dv">48</span>))<span class="sc">|&gt;</span><span class="fu">rename</span>(<span class="st">"Ciudad"</span><span class="ot">=</span><span class="st">"FECHA - Trimestre / ZONA_PORTUARIA"</span>)<span class="sc">|&gt;</span> tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(Ciudad), <span class="at">names_to =</span><span class="st">"Trimestre"</span>, <span class="at">values_to =</span> <span class="st">"Carga_Portuaria"</span> )</span>
<span id="cb24-197"><a href="#cb24-197"></a>df_CargaPuerto <span class="ot">&lt;-</span> df_CargaPuerto<span class="sc">|&gt;</span>tidyr<span class="sc">::</span><span class="fu">separate_wider_delim</span>(<span class="at">col =</span> Trimestre, </span>
<span id="cb24-198"><a href="#cb24-198"></a><span class="at">names =</span> <span class="fu">c</span>(<span class="st">"Trimestre"</span>,<span class="st">"year"</span>), <span class="at">delim =</span> <span class="st">"-"</span>)<span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">Costa =</span> <span class="fu">case_when</span>(Ciudad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Buenaventura"</span>, <span class="st">"Tumaco"</span>) <span class="sc">~</span> <span class="st">"Pacífico"</span>, Ciudad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Barrancabermeja"</span>, <span class="st">"Río Magadalena"</span>) <span class="sc">~</span> <span class="st">"Fluvial"</span>, Ciudad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Barranquilla"</span>, <span class="st">"Cartagena"</span>, <span class="st">"Ciénaga"</span>,<span class="st">"G. Morrosquillo"</span>, <span class="st">"Guajira"</span>, <span class="st">"San Andrés"</span>, <span class="st">"Santa Marta"</span>, <span class="st">"Turbo"</span>) <span class="sc">~</span> <span class="st">"Caribe"</span>))</span>
<span id="cb24-199"><a href="#cb24-199"></a></span>
<span id="cb24-200"><a href="#cb24-200"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">setdiff</span>(<span class="fu">ls</span>(), <span class="fu">c</span>(<span class="st">"df_TM_Puerto"</span>,<span class="st">"df_C.Arribo"</span>,<span class="st">"df_tipoBarco"</span>,<span class="st">"df_TipoCarga"</span>, <span class="st">"df_CargaPuerto"</span>)))</span>
<span id="cb24-201"><a href="#cb24-201"></a></span>
<span id="cb24-202"><a href="#cb24-202"></a><span class="in">```</span></span>
<span id="cb24-203"><a href="#cb24-203"></a></span>
<span id="cb24-204"><a href="#cb24-204"></a>:::</span>
<span id="cb24-205"><a href="#cb24-205"></a></span>
<span id="cb24-206"><a href="#cb24-206"></a>---</span>
<span id="cb24-207"><a href="#cb24-207"></a></span>
<span id="cb24-208"><a href="#cb24-208"></a><span class="fu"># 3. Mapa de los Principales Puertos</span></span>
<span id="cb24-209"><a href="#cb24-209"></a></span>
<span id="cb24-210"><a href="#cb24-210"></a>Como primera etapa del análisis, y para comprender la distribución logística del país, presentamos a continuación la ubicación geoespacial de los 5 principales puertos en Colombia. Hemos generado la cartografía utilizando el paquete sf, lo que nos permite visualizar la concentración de infraestructura en la Costa Caribe frente a la dependencia de un único gran nodo en el Pacífico.</span>
<span id="cb24-211"><a href="#cb24-211"></a></span>
<span id="cb24-212"><a href="#cb24-212"></a></span>
<span id="cb24-215"><a href="#cb24-215"></a><span class="in">```{r}</span></span>
<span id="cb24-216"><a href="#cb24-216"></a><span class="co">#| label: mapa-puertos</span></span>
<span id="cb24-217"><a href="#cb24-217"></a><span class="co">#| message: false</span></span>
<span id="cb24-218"><a href="#cb24-218"></a><span class="co">#| warning: false</span></span>
<span id="cb24-219"><a href="#cb24-219"></a><span class="co">#| code-fold: true</span></span>
<span id="cb24-220"><a href="#cb24-220"></a></span>
<span id="cb24-221"><a href="#cb24-221"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb24-222"><a href="#cb24-222"></a><span class="fu">library</span>(sf)</span>
<span id="cb24-223"><a href="#cb24-223"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb24-224"><a href="#cb24-224"></a><span class="fu">library</span>(rnaturalearth)</span>
<span id="cb24-225"><a href="#cb24-225"></a><span class="fu">library</span>(rnaturalearthdata)</span>
<span id="cb24-226"><a href="#cb24-226"></a></span>
<span id="cb24-227"><a href="#cb24-227"></a><span class="co"># 1. Datos de los 5 Puertos Principales</span></span>
<span id="cb24-228"><a href="#cb24-228"></a>puertos_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb24-229"><a href="#cb24-229"></a>  <span class="at">nombre =</span> <span class="fu">c</span>(<span class="st">"Cartagena"</span>, <span class="st">"Santa Marta"</span>, <span class="st">"Barranquilla"</span>, <span class="st">"Puerto Bolívar"</span>, <span class="st">"Buenaventura"</span>),</span>
<span id="cb24-230"><a href="#cb24-230"></a>  <span class="at">lat =</span> <span class="fu">c</span>(<span class="fl">10.3910</span>, <span class="fl">11.2408</span>, <span class="fl">10.9685</span>, <span class="fl">12.2333</span>, <span class="fl">3.8801</span>),</span>
<span id="cb24-231"><a href="#cb24-231"></a>  <span class="at">lon =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">75.4794</span>, <span class="sc">-</span><span class="fl">74.1990</span>, <span class="sc">-</span><span class="fl">74.7813</span>, <span class="sc">-</span><span class="fl">71.9667</span>, <span class="sc">-</span><span class="fl">77.0312</span>),</span>
<span id="cb24-232"><a href="#cb24-232"></a>  <span class="at">zona =</span> <span class="fu">c</span>(<span class="st">"Caribe"</span>, <span class="st">"Caribe"</span>, <span class="st">"Caribe"</span>, <span class="st">"Caribe"</span>, <span class="st">"Pacífico"</span>)</span>
<span id="cb24-233"><a href="#cb24-233"></a>)</span>
<span id="cb24-234"><a href="#cb24-234"></a></span>
<span id="cb24-235"><a href="#cb24-235"></a><span class="co"># 2. Convertir a objeto espacial (sf)</span></span>
<span id="cb24-236"><a href="#cb24-236"></a>puertos_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(puertos_df, <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">"lon"</span>, <span class="st">"lat"</span>), <span class="at">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb24-237"><a href="#cb24-237"></a></span>
<span id="cb24-238"><a href="#cb24-238"></a><span class="co"># 3. Mapa base y visualización</span></span>
<span id="cb24-239"><a href="#cb24-239"></a>colombia_sf <span class="ot">&lt;-</span> <span class="fu">ne_countries</span>(<span class="at">scale =</span> <span class="st">"medium"</span>, <span class="at">returnclass =</span> <span class="st">"sf"</span>, <span class="at">country =</span> <span class="st">"Colombia"</span>)</span>
<span id="cb24-240"><a href="#cb24-240"></a></span>
<span id="cb24-241"><a href="#cb24-241"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb24-242"><a href="#cb24-242"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> colombia_sf, <span class="at">fill =</span> <span class="st">"#F5F5F5"</span>, <span class="at">color =</span> <span class="st">"gray60"</span>) <span class="sc">+</span></span>
<span id="cb24-243"><a href="#cb24-243"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> puertos_sf, <span class="fu">aes</span>(<span class="at">color =</span> zona), <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb24-244"><a href="#cb24-244"></a>  <span class="fu">geom_text_repel</span>(<span class="at">data =</span> puertos_df, <span class="fu">aes</span>(<span class="at">x =</span> lon, <span class="at">y =</span> lat, <span class="at">label =</span> nombre),</span>
<span id="cb24-245"><a href="#cb24-245"></a>                  <span class="at">box.padding =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb24-246"><a href="#cb24-246"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb24-247"><a href="#cb24-247"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Localización de los 5 Puertos Principales"</span>,</span>
<span id="cb24-248"><a href="#cb24-248"></a>       <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb24-249"><a href="#cb24-249"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb24-250"><a href="#cb24-250"></a></span>
<span id="cb24-251"><a href="#cb24-251"></a><span class="in">```</span></span>
<span id="cb24-252"><a href="#cb24-252"></a></span>
<span id="cb24-253"><a href="#cb24-253"></a></span>
<span id="cb24-254"><a href="#cb24-254"></a><span class="fu"># 4. Sistema portuario nacional: Un desafío Geográfico</span></span>
<span id="cb24-255"><a href="#cb24-255"></a></span>
<span id="cb24-256"><a href="#cb24-256"></a>Como hemos explicado antes, Colombia tiene una ventaja competitiva única: es el único país de Sudamérica con salida a dos océanos, el **Pacífico** y el **Atlántico (Mar Caribe)**. Gracias a esto, puede comerciar fácilmente con Asia, Europa y Norteamérica.</span>
<span id="cb24-257"><a href="#cb24-257"></a></span>
<span id="cb24-258"><a href="#cb24-258"></a>Sin embargo, hay una gran diferencia entre las dos zonas. Históricamente, los puertos no han crecido por igual: la infraestructura y el volumen de carga se han concentrado mucho en la **Costa Caribe**.</span>
<span id="cb24-259"><a href="#cb24-259"></a></span>
<span id="cb24-260"><a href="#cb24-260"></a><span class="fu">### ¿Por qué existe este desequilibrio?</span></span>
<span id="cb24-261"><a href="#cb24-261"></a>La razón principal son las montañas. Como vemos en el mapa, la **Cordillera de los Andes** cruza el país de sur a norte y se divide en tres ramas.</span>
<span id="cb24-262"><a href="#cb24-262"></a></span>
<span id="cb24-263"><a href="#cb24-263"></a>Estas montañas (en marrón oscuro) funcionan como un muro natural que deja aislada a la **Costa Pacífica** del centro del país donde están las ciudades más importantes (Bogotá, Medellín, Cali).</span>
<span id="cb24-264"><a href="#cb24-264"></a></span>
<span id="cb24-265"><a href="#cb24-265"></a>En cambio, hacia el norte las montañas bajan y se vuelven llanuras (en verde). Esto hace que sea mucho más fácil llegar a la **Costa Caribe** por carretera o por el río Magdalena. Por eso, el Caribe siempre ha sido la entrada y salida principal de Colombia.</span>
<span id="cb24-266"><a href="#cb24-266"></a></span>
<span id="cb24-267"><a href="#cb24-267"></a>---</span>
<span id="cb24-268"><a href="#cb24-268"></a></span>
<span id="cb24-271"><a href="#cb24-271"></a><span class="in">```{r}</span></span>
<span id="cb24-272"><a href="#cb24-272"></a><span class="co">#| label: imagen-relieve-andes </span></span>
<span id="cb24-273"><a href="#cb24-273"></a><span class="co">#| code-fold: true </span></span>
<span id="cb24-274"><a href="#cb24-274"></a><span class="co">#| fig-cap: "Mapa físico de Colombia. Se observa claramente cómo las tres cordilleras andinas bloquean el acceso al Pacífico, mientras que el Caribe es más llano y accesible." </span></span>
<span id="cb24-275"><a href="#cb24-275"></a><span class="co">#| fig-align: "center" #Para centrar la imagen</span></span>
<span id="cb24-276"><a href="#cb24-276"></a><span class="co">#| out-width: "70%"  </span></span>
<span id="cb24-277"><a href="#cb24-277"></a><span class="co"># Usamos knitr para mostrar la imagen directamente desde Wikimedia </span></span>
<span id="cb24-278"><a href="#cb24-278"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"https://upload.wikimedia.org/wikipedia/commons/8/8a/Colombia_relief_location_map_cropped.svg"</span>)</span>
<span id="cb24-279"><a href="#cb24-279"></a><span class="in">```</span></span>
<span id="cb24-280"><a href="#cb24-280"></a></span>
<span id="cb24-281"><a href="#cb24-281"></a>---</span>
<span id="cb24-282"><a href="#cb24-282"></a></span>
<span id="cb24-283"><a href="#cb24-283"></a></span>
<span id="cb24-284"><a href="#cb24-284"></a>En esta fotografía podemos observar cómo los Andes aíslan el océano Pacífico.</span>
<span id="cb24-285"><a href="#cb24-285"></a></span>
<span id="cb24-286"><a href="#cb24-286"></a><span class="al">![Relieve de Colombia: La barrera natural de los Andes aísla el Pacífico. (Fuente: Wikimedia Commons)](https://upload.wikimedia.org/wikipedia/commons/d/d4/%C3%81rea_Cultural_Andina_-_Divisi%C3%B3n.PNG)</span>{fig-align="center"}</span>
<span id="cb24-287"><a href="#cb24-287"></a></span>
<span id="cb24-288"><a href="#cb24-288"></a></span>
<span id="cb24-289"><a href="#cb24-289"></a></span>
<span id="cb24-290"><a href="#cb24-290"></a>El sistema se divide en **Zonas Portuarias** con funciones distintas:</span>
<span id="cb24-291"><a href="#cb24-291"></a><span class="ss">* </span>**Región Caribe:** Es la que mueve más variedad de productos. Aquí están **Cartagena** (contenedores y turismo), **Santa Marta** (carbón) y **Barranquilla** (funciona como puerto de río y marítimo).</span>
<span id="cb24-292"><a href="#cb24-292"></a><span class="ss">* </span>**Región Pacífico:** Su punto fuerte es **Buenaventura**. Es esencial para traer mercancía de Asia, aunque es difícil llegar allí por tierra.</span>
<span id="cb24-293"><a href="#cb24-293"></a><span class="ss">* </span>**Región Fluvial:** Se centra en **Barrancabermeja**, clave para transportar petróleo hacia la refinería.</span>
<span id="cb24-294"><a href="#cb24-294"></a></span>
<span id="cb24-295"><a href="#cb24-295"></a></span>
<span id="cb24-296"><a href="#cb24-296"></a><span class="fu">## 4.1. Análisis Gráfico y Exploratorio</span></span>
<span id="cb24-297"><a href="#cb24-297"></a>Ahora, vamos a analizar los datos que hemos preparado para comprobar lo que dijimos antes y entender cómo funciona el tráfico marítimo actualmente.</span>
<span id="cb24-298"><a href="#cb24-298"></a></span>
<span id="cb24-299"><a href="#cb24-299"></a><span class="fu">### 4.1.1. Evolución del volumen de carga (Top Puertos)</span></span>
<span id="cb24-300"><a href="#cb24-300"></a></span>
<span id="cb24-301"><a href="#cb24-301"></a>Primero, analizamos la tendencia en el tiempo. Como hay muchas zonas pequeñas que podrían desordenar el gráfico, hemos filtrado los datos para ver sólo los **6 puertos más importantes** según volumen histórico. Queremos ver si el tráfico ha subido después de la pandemia y qué puertos son los líderes.</span>
<span id="cb24-302"><a href="#cb24-302"></a></span>
<span id="cb24-303"><a href="#cb24-303"></a></span>
<span id="cb24-306"><a href="#cb24-306"></a><span class="in">```{r}</span></span>
<span id="cb24-307"><a href="#cb24-307"></a><span class="co">#| warning: false </span></span>
<span id="cb24-308"><a href="#cb24-308"></a><span class="co">#| message: false </span></span>
<span id="cb24-309"><a href="#cb24-309"></a><span class="co"># 1. Preparación de los datos</span></span>
<span id="cb24-310"><a href="#cb24-310"></a>df_grafico1 <span class="ot">&lt;-</span> df_CargaPuerto <span class="sc">%&gt;%</span></span>
<span id="cb24-311"><a href="#cb24-311"></a><span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.numeric</span>(year)) <span class="sc">%&gt;%</span> <span class="co"># Aseguramos que el año sea numérico para el eje X </span></span>
<span id="cb24-312"><a href="#cb24-312"></a><span class="co"># Calculamos el total histórico por ciudad para saber cuáles son los "grandes" group_by(Ciudad) %&gt;%</span></span>
<span id="cb24-313"><a href="#cb24-313"></a><span class="fu">mutate</span>(<span class="at">total_historico =</span> <span class="fu">sum</span>(Carga_Portuaria, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb24-314"><a href="#cb24-314"></a><span class="fu">ungroup</span>()</span>
<span id="cb24-315"><a href="#cb24-315"></a><span class="co"># 2. Filtro: Nos quedamos solo con los nombres del Top 6</span></span>
<span id="cb24-316"><a href="#cb24-316"></a>top_puertos <span class="ot">&lt;-</span> <span class="fu">unique</span>(df_grafico1 <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(total_historico)) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(Ciudad))[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span>
<span id="cb24-317"><a href="#cb24-317"></a><span class="co"># Filtramos la base de datos original para mantener solo esas ciudades top</span></span>
<span id="cb24-318"><a href="#cb24-318"></a>df_grafico1 <span class="ot">&lt;-</span> df_grafico1 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Ciudad <span class="sc">%in%</span> top_puertos)</span>
<span id="cb24-319"><a href="#cb24-319"></a><span class="co"># 3. Sumamos la carga por año y ciudad </span></span>
<span id="cb24-320"><a href="#cb24-320"></a>df_grafico1 <span class="ot">&lt;-</span> df_grafico1 <span class="sc">%&gt;%</span> </span>
<span id="cb24-321"><a href="#cb24-321"></a><span class="fu">group_by</span>(year, Ciudad) <span class="sc">%&gt;%</span></span>
<span id="cb24-322"><a href="#cb24-322"></a><span class="fu">summarise</span>(<span class="at">Carga =</span> <span class="fu">sum</span>(Carga_Portuaria, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">'drop'</span>)</span>
<span id="cb24-323"><a href="#cb24-323"></a></span>
<span id="cb24-324"><a href="#cb24-324"></a><span class="in">```</span></span>
<span id="cb24-325"><a href="#cb24-325"></a></span>
<span id="cb24-326"><a href="#cb24-326"></a>---</span>
<span id="cb24-327"><a href="#cb24-327"></a>Vemos la evolución temporal con un gráfico de líneas, que es donde mejor se va a ver la serie de tiempo:</span>
<span id="cb24-328"><a href="#cb24-328"></a>---</span>
<span id="cb24-329"><a href="#cb24-329"></a></span>
<span id="cb24-332"><a href="#cb24-332"></a><span class="in">```{r}</span></span>
<span id="cb24-333"><a href="#cb24-333"></a><span class="co">#| warning: false</span></span>
<span id="cb24-334"><a href="#cb24-334"></a><span class="co">#| code-fold: true</span></span>
<span id="cb24-335"><a href="#cb24-335"></a><span class="co">#- Gráfico de líneas</span></span>
<span id="cb24-336"><a href="#cb24-336"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> df_grafico1, </span>
<span id="cb24-337"><a href="#cb24-337"></a><span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> Carga, <span class="at">color =</span> Ciudad)) <span class="sc">+</span> </span>
<span id="cb24-338"><a href="#cb24-338"></a><span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span> <span class="co"># Línea un poco más gruesa para visibilidad</span></span>
<span id="cb24-339"><a href="#cb24-339"></a><span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span> <span class="co"># Puntos para marcar cada año</span></span>
<span id="cb24-340"><a href="#cb24-340"></a><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_number</span>(<span class="at">scale =</span> <span class="fl">1e-6</span>, <span class="at">suffix =</span> <span class="st">" M"</span>)) <span class="sc">+</span> <span class="co"># Formato Millones</span></span>
<span id="cb24-341"><a href="#cb24-341"></a><span class="fu">theme_minimal</span>() <span class="co"># Tema limpio</span></span>
<span id="cb24-342"><a href="#cb24-342"></a></span>
<span id="cb24-343"><a href="#cb24-343"></a>p <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Evolución de carga (Top 6 Puertos)"</span>,</span>
<span id="cb24-344"><a href="#cb24-344"></a><span class="at">subtitle =</span> <span class="st">"Toneladas que se mueven anualmente"</span>, </span>
<span id="cb24-345"><a href="#cb24-345"></a><span class="at">y =</span> <span class="st">"Millones de Toneladas"</span>, </span>
<span id="cb24-346"><a href="#cb24-346"></a><span class="at">color =</span> <span class="st">"Zona Portuaria"</span>) </span>
<span id="cb24-347"><a href="#cb24-347"></a><span class="in">```</span></span>
<span id="cb24-348"><a href="#cb24-348"></a></span>
<span id="cb24-349"><a href="#cb24-349"></a></span>
<span id="cb24-350"><a href="#cb24-350"></a>   </span>
<span id="cb24-351"><a href="#cb24-351"></a><span class="fu">### 4.1.2. Comparativa: Caribe vs Pacífico</span></span>
<span id="cb24-352"><a href="#cb24-352"></a></span>
<span id="cb24-353"><a href="#cb24-353"></a>Para comprobar si es verdad que el Caribe domina por la barrera de los Andes, comparamos directamente el volumen de carga del último año completo (2023).</span>
<span id="cb24-354"><a href="#cb24-354"></a></span>
<span id="cb24-355"><a href="#cb24-355"></a>Para eso agrupamos manualmente las ciudades en sus regiones geográficas:</span>
<span id="cb24-356"><a href="#cb24-356"></a></span>
<span id="cb24-359"><a href="#cb24-359"></a><span class="in">```{r}</span></span>
<span id="cb24-360"><a href="#cb24-360"></a><span class="co">#| warning: false</span></span>
<span id="cb24-361"><a href="#cb24-361"></a><span class="co">#| code-fold: true </span></span>
<span id="cb24-362"><a href="#cb24-362"></a></span>
<span id="cb24-363"><a href="#cb24-363"></a><span class="co"># 1. Clasificación Geográfica </span></span>
<span id="cb24-364"><a href="#cb24-364"></a>df_grafico2 <span class="ot">&lt;-</span> df_CargaPuerto <span class="sc">%&gt;%</span></span>
<span id="cb24-365"><a href="#cb24-365"></a><span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.numeric</span>(year)) <span class="sc">%&gt;%</span></span>
<span id="cb24-366"><a href="#cb24-366"></a><span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2023</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb24-367"><a href="#cb24-367"></a><span class="co"># Creamos la columna 'Region' </span></span>
<span id="cb24-368"><a href="#cb24-368"></a><span class="fu">mutate</span>(<span class="at">Region =</span> case_when</span>
<span id="cb24-369"><a href="#cb24-369"></a>( Ciudad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Buenaventura"</span>, <span class="st">"Tumaco"</span>) <span class="sc">~</span> <span class="st">"Pacífico"</span>,</span>
<span id="cb24-370"><a href="#cb24-370"></a>Ciudad <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Barrancabermeja"</span>, <span class="st">"Río Magdalena"</span>) <span class="sc">~</span> <span class="st">"Fluvial"</span>,</span>
<span id="cb24-371"><a href="#cb24-371"></a><span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Caribe"</span>   )) <span class="sc">%&gt;%</span> <span class="co"># El resto (Cartagena, etc.) asumimos que son Caribe </span></span>
<span id="cb24-372"><a href="#cb24-372"></a></span>
<span id="cb24-373"><a href="#cb24-373"></a><span class="co"># 2. Sumamos el total por región</span></span>
<span id="cb24-374"><a href="#cb24-374"></a><span class="fu">group_by</span> (Region) <span class="sc">%&gt;%</span></span>
<span id="cb24-375"><a href="#cb24-375"></a><span class="fu">summarise</span>(<span class="at">Total =</span> <span class="fu">sum</span>(Carga_Portuaria, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb24-376"><a href="#cb24-376"></a></span>
<span id="cb24-377"><a href="#cb24-377"></a><span class="co"># Calculamos el porcentaje para entender la proporción</span></span>
<span id="cb24-378"><a href="#cb24-378"></a>  <span class="fu">mutate</span>(<span class="at">Porcentaje =</span> Total <span class="sc">/</span> <span class="fu">sum</span>(Total))</span>
<span id="cb24-379"><a href="#cb24-379"></a>  </span>
<span id="cb24-380"><a href="#cb24-380"></a></span>
<span id="cb24-381"><a href="#cb24-381"></a><span class="in">```</span></span>
<span id="cb24-382"><a href="#cb24-382"></a></span>
<span id="cb24-383"><a href="#cb24-383"></a>---</span>
<span id="cb24-384"><a href="#cb24-384"></a>Hacemos el gráfico de barras, que confirma la teoria:</span>
<span id="cb24-385"><a href="#cb24-385"></a>---</span>
<span id="cb24-386"><a href="#cb24-386"></a></span>
<span id="cb24-389"><a href="#cb24-389"></a><span class="in">```{r}</span></span>
<span id="cb24-390"><a href="#cb24-390"></a><span class="co">#| warning: false</span></span>
<span id="cb24-391"><a href="#cb24-391"></a><span class="co">#| code-fold: true</span></span>
<span id="cb24-392"><a href="#cb24-392"></a><span class="co">#Gráfico de barras</span></span>
<span id="cb24-393"><a href="#cb24-393"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_grafico2, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Region, <span class="sc">-</span>Total), <span class="at">y =</span> Total, <span class="at">fill =</span> Region)) <span class="sc">+</span> <span class="fu">geom_col</span>() <span class="sc">+</span> </span>
<span id="cb24-394"><a href="#cb24-394"></a>  </span>
<span id="cb24-395"><a href="#cb24-395"></a><span class="co"># Añadimos etiquetas de texto con el porcentaje encima de las barras</span></span>
<span id="cb24-396"><a href="#cb24-396"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> scales<span class="sc">::</span><span class="fu">percent</span>(Porcentaje, <span class="at">accuracy =</span> <span class="dv">1</span>)),</span>
<span id="cb24-397"><a href="#cb24-397"></a><span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.5</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span> </span>
<span id="cb24-398"><a href="#cb24-398"></a><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_number</span>(<span class="at">scale =</span> <span class="fl">1e-6</span>, <span class="at">suffix =</span> <span class="st">" M"</span>)) <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Caribe"</span><span class="ot">=</span><span class="st">"blue"</span>, <span class="st">"Pacífico"</span><span class="ot">=</span><span class="st">"orange"</span>, <span class="st">"Fluvial"</span><span class="ot">=</span><span class="st">"green"</span>)) <span class="sc">+</span> <span class="fu">theme_light</span>() </span>
<span id="cb24-399"><a href="#cb24-399"></a></span>
<span id="cb24-400"><a href="#cb24-400"></a>p <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribución de Carga por Región (2023)"</span>,</span>
<span id="cb24-401"><a href="#cb24-401"></a><span class="at">subtitle =</span> <span class="st">"Predominio claro de la costa Caribeña"</span>, </span>
<span id="cb24-402"><a href="#cb24-402"></a><span class="at">x =</span> <span class="st">"Región"</span>, </span>
<span id="cb24-403"><a href="#cb24-403"></a><span class="at">y =</span> <span class="st">"Total Toneladas"</span>) <span class="sc">+</span> </span>
<span id="cb24-404"><a href="#cb24-404"></a><span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb24-405"><a href="#cb24-405"></a><span class="in">```</span></span>
<span id="cb24-406"><a href="#cb24-406"></a></span>
<span id="cb24-407"><a href="#cb24-407"></a>---</span>
<span id="cb24-408"><a href="#cb24-408"></a></span>
<span id="cb24-409"><a href="#cb24-409"></a></span>
<span id="cb24-410"><a href="#cb24-410"></a>Se ve claramente que el Caribe mueve la mayor parte de la carga del país. Esto confirma que la barrera de los Andes frena el crecimiento de la región Pacífico.</span>
<span id="cb24-411"><a href="#cb24-411"></a></span>
<span id="cb24-412"><a href="#cb24-412"></a><span class="fu">### 4.1.3. Naturaleza del Tráfico: Nacional o Internacional?</span></span>
<span id="cb24-413"><a href="#cb24-413"></a></span>
<span id="cb24-414"><a href="#cb24-414"></a>Es imprescindible distinguir el propósito de los buques que arriban. ¿Son barcos grandes que traen mercancía de otros países (Comercio Exterior) o barcos más pequeños que se mueven solo entre puertos de Colombia (Cabotaje)?</span>
<span id="cb24-415"><a href="#cb24-415"></a></span>
<span id="cb24-418"><a href="#cb24-418"></a><span class="in">```{r}</span></span>
<span id="cb24-419"><a href="#cb24-419"></a><span class="co">#| warning: false</span></span>
<span id="cb24-420"><a href="#cb24-420"></a><span class="co">#| code-fold: true</span></span>
<span id="cb24-421"><a href="#cb24-421"></a><span class="co"># Agrupar datos</span></span>
<span id="cb24-422"><a href="#cb24-422"></a><span class="co"># Agrupación simple por año y tipo de tráfico</span></span>
<span id="cb24-423"><a href="#cb24-423"></a>df_grafico3 <span class="ot">&lt;-</span> df_C.Arribo <span class="sc">%&gt;%</span></span>
<span id="cb24-424"><a href="#cb24-424"></a><span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.numeric</span>(year)) <span class="sc">%&gt;%</span></span>
<span id="cb24-425"><a href="#cb24-425"></a><span class="fu">group_by</span>(year, tipo) <span class="sc">%&gt;%</span></span>
<span id="cb24-426"><a href="#cb24-426"></a><span class="fu">summarise</span>(<span class="at">Total =</span> <span class="fu">sum</span>(value, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">.groups =</span> <span class="st">'drop'</span>)</span>
<span id="cb24-427"><a href="#cb24-427"></a><span class="in">```</span></span>
<span id="cb24-428"><a href="#cb24-428"></a></span>
<span id="cb24-429"><a href="#cb24-429"></a></span>
<span id="cb24-430"><a href="#cb24-430"></a></span>
<span id="cb24-431"><a href="#cb24-431"></a>Y el gráfico:</span>
<span id="cb24-432"><a href="#cb24-432"></a></span>
<span id="cb24-435"><a href="#cb24-435"></a><span class="in">```{r}</span></span>
<span id="cb24-436"><a href="#cb24-436"></a><span class="co">#| warning: false</span></span>
<span id="cb24-437"><a href="#cb24-437"></a><span class="co">#| code-fold: true</span></span>
<span id="cb24-438"><a href="#cb24-438"></a><span class="co">#- Gráfico de barras </span></span>
<span id="cb24-439"><a href="#cb24-439"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_grafico3, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(year), <span class="at">y =</span> Total, <span class="at">fill =</span> tipo)) <span class="sc">+</span> </span>
<span id="cb24-440"><a href="#cb24-440"></a><span class="co"># 'dodge' coloca las barras una al lado de la otra para comparar mejor</span></span>
<span id="cb24-441"><a href="#cb24-441"></a><span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span> </span>
<span id="cb24-442"><a href="#cb24-442"></a><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"red"</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Internacional"</span>, <span class="st">"Nacional"</span>)) <span class="sc">+</span> </span>
<span id="cb24-443"><a href="#cb24-443"></a><span class="fu">theme_minimal</span>() </span>
<span id="cb24-444"><a href="#cb24-444"></a></span>
<span id="cb24-445"><a href="#cb24-445"></a>p <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Arribos de Buques: Nacional vs Internacional"</span>, </span>
<span id="cb24-446"><a href="#cb24-446"></a><span class="at">x =</span> <span class="st">"Año"</span>, </span>
<span id="cb24-447"><a href="#cb24-447"></a><span class="at">y =</span> <span class="st">"Número de Arribos"</span>, </span>
<span id="cb24-448"><a href="#cb24-448"></a><span class="at">fill =</span> <span class="st">"Tipo de Tráfico"</span>)</span>
<span id="cb24-449"><a href="#cb24-449"></a><span class="in">```</span></span>
<span id="cb24-450"><a href="#cb24-450"></a></span>
<span id="cb24-451"><a href="#cb24-451"></a></span>
<span id="cb24-452"><a href="#cb24-452"></a>Con esto terminamos el análisis de los puertos colombianos.</span>
<span id="cb24-453"><a href="#cb24-453"></a></span>
<span id="cb24-454"><a href="#cb24-454"></a></span>
<span id="cb24-455"><a href="#cb24-455"></a>---</span>
<span id="cb24-456"><a href="#cb24-456"></a></span>
<span id="cb24-457"><a href="#cb24-457"></a><span class="fu"># 5. Tipos de barcos que llegan</span></span>
<span id="cb24-458"><a href="#cb24-458"></a></span>
<span id="cb24-459"><a href="#cb24-459"></a>Colombia, como país bioceánico, recibe todo tipo de barcos, siendo la mayoría de ellos de origen nacional, como podemos observa en el gráfico. Entre 2018 y 2023 se registró un aumento sostenido en el número de embarcaciones que arribaron a los puertos colombianos. La disminución observada en 2024 no corresponde a una caída real del tráfico marítimo, sino que se debe a la falta de información del último trimestre del año en la base de datos utilizada.</span>
<span id="cb24-460"><a href="#cb24-460"></a></span>
<span id="cb24-461"><a href="#cb24-461"></a>Dentro de esta tendencia creciente, destaca el incremento registrado a partir de 2021, explicado por la rápida recuperación económica posterior a la pandemia y por la necesidad de fortalecer una flota logística local, proceso que estuvo fuertemente influenciado por los cuellos de botella en las cadenas de suministro. No obstante, este cambio ya venía gestándose desde años anteriores, ya que en 2018 la presencia de barcos nacionales e internacionales era prácticamente equivalente; sin embargo, a partir de 2019 comenzó a evidenciarse una modificación progresiva en esta proporción, con un aumento constante de las embarcaciones nacionales, tendencia que se intensificó desde 2020 y consolidó la predominancia de la flota nacional en los años posteriores.</span>
<span id="cb24-462"><a href="#cb24-462"></a></span>
<span id="cb24-463"><a href="#cb24-463"></a></span>
<span id="cb24-466"><a href="#cb24-466"></a><span class="in">```{r}</span></span>
<span id="cb24-467"><a href="#cb24-467"></a><span class="co">#| code-fold: true</span></span>
<span id="cb24-468"><a href="#cb24-468"></a>R.NacInt <span class="ot">&lt;-</span> df_C.Arribo<span class="sc">|&gt;</span> <span class="fu">group_by</span>(year)<span class="sc">|&gt;</span><span class="fu">filter</span>(mes<span class="sc">==</span><span class="st">"total"</span>)<span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>value, <span class="at">fill =</span> tipo ))<span class="sc">+</span><span class="fu">geom_col</span>()<span class="sc">+</span><span class="fu">theme_bw</span>()<span class="sc">+</span><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_comma</span>(<span class="at">accuracy =</span> <span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb24-469"><a href="#cb24-469"></a>  <span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"lightyellow"</span>, <span class="at">color =</span> <span class="cn">NA</span>))<span class="sc">+</span><span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Evolución de la procedencia de barcos que llegan a </span><span class="sc">\n</span><span class="st">puertos colombianos (2018-2024)"</span>, <span class="at">x=</span><span class="st">"Años"</span>,<span class="at">y=</span><span class="st">"Arribos"</span>, <span class="at">fill=</span><span class="st">"Tipo"</span> )<span class="sc">+</span> <span class="fu">scale_fill_discrete</span>(<span class="at">name =</span> <span class="st">"Tipo de Navegación"</span>,  <span class="at">labels =</span> <span class="fu">c</span>( <span class="st">"internac"</span> <span class="ot">=</span> <span class="st">"Tráfico Internacional"</span>,<span class="st">"nacional"</span><span class="ot">=</span> <span class="st">"Tráfico Nacional"</span>))</span>
<span id="cb24-470"><a href="#cb24-470"></a>R.NacInt</span>
<span id="cb24-471"><a href="#cb24-471"></a></span>
<span id="cb24-472"><a href="#cb24-472"></a><span class="in">```</span></span>
<span id="cb24-473"><a href="#cb24-473"></a></span>
<span id="cb24-474"><a href="#cb24-474"></a>La mayoría de estos barcos arriban principalmente a los puertos del Atlántico. Como se observa en la siguiente gráfica, correspondiente a los barcos arribados en 2024, los puertos del Atlántico reciben un mayor número de embarcaciones tanto nacionales como internacionales, lo que corrobora la afirmación de que la costa caribeña presenta una mayor actividad portuaria que la costa pacífica.</span>
<span id="cb24-475"><a href="#cb24-475"></a></span>
<span id="cb24-478"><a href="#cb24-478"></a><span class="in">```{r}</span></span>
<span id="cb24-479"><a href="#cb24-479"></a><span class="co">#| warning: false</span></span>
<span id="cb24-480"><a href="#cb24-480"></a><span class="co">#| code-fold: true</span></span>
<span id="cb24-481"><a href="#cb24-481"></a>R.NacInt <span class="ot">&lt;-</span> df_C.Arribo<span class="sc">|&gt;</span> <span class="fu">filter</span>(year<span class="sc">==</span><span class="st">"2024"</span>,mes<span class="sc">==</span><span class="st">"total"</span>)<span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>region, <span class="at">y=</span>value, <span class="at">fill =</span> tipo ))<span class="sc">+</span><span class="fu">geom_col</span>()<span class="sc">+</span><span class="fu">theme_bw</span>()<span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"lightyellow"</span>, <span class="at">color =</span> <span class="cn">NA</span>))<span class="sc">+</span><span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Procedencia de barcos que llegan a puertos colombianos en el 2024"</span>, <span class="at">x=</span><span class="st">"Años"</span>,<span class="at">y=</span><span class="st">"Arribos"</span>, <span class="at">fill=</span><span class="st">"Tipo"</span> )<span class="sc">+</span><span class="fu">scale_fill_discrete</span>(<span class="at">name =</span> <span class="st">"Tipo de Navegación"</span>,  <span class="at">labels =</span> <span class="fu">c</span>( <span class="st">"internac"</span> <span class="ot">=</span> <span class="st">"Tráfico Internacional"</span>,<span class="st">"nacional"</span><span class="ot">=</span> <span class="st">"Tráfico Nacional"</span>))</span>
<span id="cb24-482"><a href="#cb24-482"></a>R.NacInt</span>
<span id="cb24-483"><a href="#cb24-483"></a><span class="in">```</span></span>
<span id="cb24-484"><a href="#cb24-484"></a></span>
<span id="cb24-485"><a href="#cb24-485"></a>En particular, el tráfico marítimo de la costa caribeña se concentra en los puertos de Cartagena, Santa Marta y Coveñas, los cuales ocupan el primer, segundo y tercer lugar, respectivamente, entre los puertos con mayor recepción de embarcaciones. En contraste, en la costa pacífica el puerto de Buenaventura presenta el mayor flujo de barcos y se ubica en el cuarto lugar a nivel nacional en tráfico portuario.</span>
<span id="cb24-486"><a href="#cb24-486"></a></span>
<span id="cb24-489"><a href="#cb24-489"></a><span class="in">```{r}</span></span>
<span id="cb24-490"><a href="#cb24-490"></a><span class="co">#| warning: false</span></span>
<span id="cb24-491"><a href="#cb24-491"></a><span class="co">#| code-fold: true</span></span>
<span id="cb24-492"><a href="#cb24-492"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb24-493"><a href="#cb24-493"></a>NacInt <span class="ot">&lt;-</span> df_C.Arribo<span class="sc">|&gt;</span> <span class="fu">filter</span>(year<span class="sc">==</span><span class="st">"2024"</span>)<span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>puerto, <span class="at">y=</span>value, <span class="at">fill =</span> tipo ))<span class="sc">+</span><span class="fu">geom_col</span>()<span class="sc">+</span><span class="fu">theme_bw</span>()<span class="sc">+</span><span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>( <span class="at">angle =</span> <span class="dv">60</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span><span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"lightyellow"</span>, <span class="at">color =</span> <span class="cn">NA</span>))<span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Procedencia de barcos que llegan a cada puertos colombianos en el 2024"</span>, <span class="at">x=</span><span class="st">"Años"</span>,<span class="at">y=</span><span class="st">"Arribos"</span>, <span class="at">fill=</span><span class="st">"Tipo"</span> )<span class="sc">+</span><span class="fu">scale_fill_discrete</span>(<span class="at">name =</span> <span class="st">"Tipo de Navegación"</span>,  <span class="at">labels =</span> <span class="fu">c</span>( <span class="st">"internac"</span> <span class="ot">=</span> <span class="st">"Tráfico Internacional"</span>,<span class="st">"nacional"</span><span class="ot">=</span> <span class="st">"Tráfico Nacional"</span>))</span>
<span id="cb24-494"><a href="#cb24-494"></a>tablaarribo <span class="ot">&lt;-</span>df_C.Arribo<span class="sc">|&gt;</span><span class="fu">filter</span>(year<span class="sc">==</span><span class="st">"2024"</span>,tipo<span class="sc">==</span><span class="st">"nacional"</span>, mes<span class="sc">==</span><span class="st">"enero"</span>)<span class="sc">|&gt;</span><span class="fu">select</span>(region,puerto)</span>
<span id="cb24-495"><a href="#cb24-495"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(tablaarribo)</span>
<span id="cb24-496"><a href="#cb24-496"></a>NacInt</span>
<span id="cb24-497"><a href="#cb24-497"></a></span>
<span id="cb24-498"><a href="#cb24-498"></a><span class="in">```</span></span>
<span id="cb24-499"><a href="#cb24-499"></a></span>
<span id="cb24-500"><a href="#cb24-500"></a>De los barcos que llegan, la mayoría son buques de carga, seguidos, a gran distancia, por embarcaciones recreativas. La pandemia provocó una caída significativa en la llegada de buques recreacionales, pero a partir de 2022 se observa una recuperación.</span>
<span id="cb24-501"><a href="#cb24-501"></a>En 2024 se aprecia una disminución general en todos los tipos de barcos, lo cual se debe a que la base de datos consultada no incluía información del último trimestre del año, como mencionamos anteriormente.</span>
<span id="cb24-502"><a href="#cb24-502"></a></span>
<span id="cb24-505"><a href="#cb24-505"></a><span class="in">```{r}</span></span>
<span id="cb24-506"><a href="#cb24-506"></a><span class="co">#| warning: false</span></span>
<span id="cb24-507"><a href="#cb24-507"></a><span class="co">#| code-fold: true</span></span>
<span id="cb24-508"><a href="#cb24-508"></a>R.TipoBarco <span class="ot">&lt;-</span> df_tipoBarco<span class="sc">|&gt;</span><span class="fu">group_by</span>(year)<span class="sc">|&gt;</span><span class="fu">filter</span>(tipo<span class="sc">==</span><span class="st">"Actividad"</span>)<span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year,<span class="at">y=</span>value,<span class="at">fill =</span> actividad_y_motivo_de_arribo))<span class="sc">+</span><span class="fu">geom_col</span>()<span class="sc">+</span><span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>)<span class="sc">+</span></span>
<span id="cb24-509"><a href="#cb24-509"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Tipo de barcos que arriban a puertos colombianos (2018-2024)"</span>, <span class="at">x=</span><span class="st">"Años"</span>,<span class="at">y=</span><span class="st">"Arribos"</span>, <span class="at">fill =</span> <span class="st">"Tipo de barco"</span>)<span class="sc">+</span><span class="fu">theme_bw</span>()<span class="sc">+</span><span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"lightblue3"</span>, <span class="at">colour =</span> <span class="st">"white"</span>))</span>
<span id="cb24-510"><a href="#cb24-510"></a>R.TipoBarco</span>
<span id="cb24-511"><a href="#cb24-511"></a><span class="in">```</span></span>
<span id="cb24-512"><a href="#cb24-512"></a></span>
<span id="cb24-513"><a href="#cb24-513"></a>Algunos barcos llegan a Colombia por motivos especiales, es decir, por razones distintas al comercio regular; principalmente por aprovisionamiento, como se puede observar en la gráfica.</span>
<span id="cb24-514"><a href="#cb24-514"></a></span>
<span id="cb24-517"><a href="#cb24-517"></a><span class="in">```{r}</span></span>
<span id="cb24-518"><a href="#cb24-518"></a><span class="co">#| warning: false</span></span>
<span id="cb24-519"><a href="#cb24-519"></a><span class="co">#| code-fold: true</span></span>
<span id="cb24-520"><a href="#cb24-520"></a>R.ActiviadBarco <span class="ot">&lt;-</span> df_tipoBarco<span class="sc">|&gt;</span><span class="fu">group_by</span>(year)<span class="sc">|&gt;</span><span class="fu">filter</span>(tipo<span class="sc">==</span><span class="st">"M.Arribo_Especial"</span>)<span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year,<span class="at">y=</span>value,<span class="at">fill =</span> actividad_y_motivo_de_arribo))<span class="sc">+</span><span class="fu">geom_col</span>()<span class="sc">+</span><span class="fu">theme_bw</span>()<span class="sc">+</span><span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"lightyellow1"</span>, <span class="at">colour =</span> <span class="st">"white"</span>))<span class="sc">+</span><span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Motivos de arribo especiales a puertos colombianos (2018-2024)"</span>, <span class="at">x=</span><span class="st">"Años"</span>,<span class="at">y=</span><span class="st">"Arribos"</span>,<span class="at">fill=</span><span class="st">"Motivos de arribo especiales"</span>)</span>
<span id="cb24-521"><a href="#cb24-521"></a>R.ActiviadBarco</span>
<span id="cb24-522"><a href="#cb24-522"></a><span class="in">```</span></span>
<span id="cb24-523"><a href="#cb24-523"></a></span>
<span id="cb24-524"><a href="#cb24-524"></a></span>
<span id="cb24-525"><a href="#cb24-525"></a>---</span>
<span id="cb24-526"><a href="#cb24-526"></a></span>
<span id="cb24-527"><a href="#cb24-527"></a><span class="fu">## 5.1 Tipo de barcos de carga que llegan a puertos colombianos</span></span>
<span id="cb24-528"><a href="#cb24-528"></a></span>
<span id="cb24-529"><a href="#cb24-529"></a>Los barcos de carga que arriban a los puertos colombianos están compuestos principalmente por portacontenedores, seguidos por graneleros y tanqueros. Esto se debe a que los portacontenedores son fundamentales para el transporte de mercancía general y bienes manufacturados, como la exportación de café, una de las principales exportaciones del país, así como la importación de diversos bienes. En el caso de los graneleros, su presencia responde a la exportación de minerales, como el carbón y el hierro, y a la importación de alimentos, como cereales, además de otros insumos, entre ellos los fertilizantes. Por su parte, la llegada de tanqueros se explica porque Colombia es un importante productor de petróleo.</span>
<span id="cb24-530"><a href="#cb24-530"></a></span>
<span id="cb24-533"><a href="#cb24-533"></a><span class="in">```{r}</span></span>
<span id="cb24-534"><a href="#cb24-534"></a><span class="co">#| warning: false</span></span>
<span id="cb24-535"><a href="#cb24-535"></a><span class="co">#| code-fold: true</span></span>
<span id="cb24-536"><a href="#cb24-536"></a>Categoria <span class="ot">&lt;-</span> df_TipoCarga<span class="sc">|&gt;</span><span class="fu">group_by</span>(year)<span class="sc">|&gt;</span><span class="fu">filter</span>(mes<span class="sc">==</span><span class="st">"total"</span>)<span class="sc">|&gt;</span><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year,<span class="at">y=</span>value, <span class="at">fill =</span> puertBarco))<span class="sc">+</span><span class="fu">geom_col</span>()<span class="sc">+</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Tipos de barcos de carga que llegan a Colombia (2018-2024)"</span>,<span class="at">x=</span><span class="st">"Años"</span>,<span class="at">y=</span><span class="st">"Arribos"</span>,<span class="at">fill=</span><span class="st">"Tipo de cargero"</span>)<span class="sc">+</span><span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set3"</span>)<span class="sc">+</span><span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"lightblue4"</span>, <span class="at">colour =</span> <span class="st">"white"</span>))</span>
<span id="cb24-537"><a href="#cb24-537"></a>Categoria </span>
<span id="cb24-538"><a href="#cb24-538"></a><span class="in">```</span></span>
<span id="cb24-539"><a href="#cb24-539"></a></span>
<span id="cb24-540"><a href="#cb24-540"></a><span class="fu">### 5.1.1. Tipo de barcos de carga que llegan a puertos colombianos por costa</span></span>
<span id="cb24-541"><a href="#cb24-541"></a></span>
<span id="cb24-542"><a href="#cb24-542"></a>En la siguiente gráfica se puede observar que, en 2023, la costa atlántica recibió una mayor cantidad de barcos de carga de todos los tipos, lo que respalda el argumento de que la costa pacífica tiene un menor movimiento portuario en comparación con la costa caribeña.</span>
<span id="cb24-543"><a href="#cb24-543"></a></span>
<span id="cb24-546"><a href="#cb24-546"></a><span class="in">```{r}</span></span>
<span id="cb24-547"><a href="#cb24-547"></a><span class="co">#| warning: false</span></span>
<span id="cb24-548"><a href="#cb24-548"></a><span class="co">#| code-fold: true</span></span>
<span id="cb24-549"><a href="#cb24-549"></a>Categoria <span class="ot">&lt;-</span> df_TipoCarga<span class="sc">|&gt;</span><span class="fu">group_by</span>(region)<span class="sc">|&gt;</span><span class="fu">filter</span>(mes<span class="sc">==</span><span class="st">"total"</span>, year<span class="sc">==</span><span class="st">"2023"</span>)<span class="sc">|&gt;</span><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>region,<span class="at">y=</span>value, <span class="at">fill =</span> puertBarco))<span class="sc">+</span><span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>)<span class="sc">+</span><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Tipos de barcos de carga que llegan a Colombia (2023)"</span>,<span class="at">x=</span><span class="st">"Costa"</span>,<span class="at">y=</span><span class="st">"Arribos"</span>,<span class="at">fill=</span><span class="st">"Tipo de cargero"</span>)<span class="sc">+</span><span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Set3"</span>)<span class="sc">+</span><span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"lightblue4"</span>, <span class="at">colour =</span> <span class="st">"white"</span>))<span class="sc">+</span><span class="fu">annotate</span>(<span class="st">"rect"</span>,<span class="at">xmin =</span> <span class="fl">1.5</span>, <span class="at">xmax =</span> <span class="fl">2.5</span>,<span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>,<span class="at">alpha =</span> <span class="fl">0.2</span>, <span class="at">fill =</span> <span class="st">"red"</span>)<span class="sc">+</span> <span class="fu">annotate</span>(<span class="st">"rect"</span>,<span class="at">xmin =</span> <span class="fl">0.5</span>, <span class="at">xmax =</span> <span class="fl">1.5</span>,<span class="at">ymin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">ymax =</span> <span class="cn">Inf</span>,<span class="at">alpha =</span> <span class="fl">0.2</span>, <span class="at">fill =</span> <span class="st">"green2"</span>)</span>
<span id="cb24-550"><a href="#cb24-550"></a>           </span>
<span id="cb24-551"><a href="#cb24-551"></a>Categoria</span>
<span id="cb24-552"><a href="#cb24-552"></a><span class="in">```</span></span>
<span id="cb24-553"><a href="#cb24-553"></a>---</span>
<span id="cb24-554"><a href="#cb24-554"></a></span>
<span id="cb24-555"><a href="#cb24-555"></a><span class="fu"># 6. Evolución de la carga portuario</span></span>
<span id="cb24-556"><a href="#cb24-556"></a></span>
<span id="cb24-557"><a href="#cb24-557"></a>::::: columns</span>
<span id="cb24-558"><a href="#cb24-558"></a>::: {.column width="35%"}</span>
<span id="cb24-561"><a href="#cb24-561"></a><span class="in">```{r}</span></span>
<span id="cb24-562"><a href="#cb24-562"></a><span class="co">#| code-fold: true</span></span>
<span id="cb24-563"><a href="#cb24-563"></a><span class="co">#| warning: false</span></span>
<span id="cb24-564"><a href="#cb24-564"></a><span class="co">#| fig-width: 4 </span></span>
<span id="cb24-565"><a href="#cb24-565"></a><span class="co">#| fig-height: 3 </span></span>
<span id="cb24-566"><a href="#cb24-566"></a>Traf.Marit <span class="ot">&lt;-</span> df_CargaPuerto<span class="sc">|&gt;</span><span class="fu">group_by</span>(year)<span class="sc">|&gt;</span><span class="fu">mutate</span>(<span class="at">Traf_anual=</span><span class="fu">sum</span>(Carga_Portuaria))<span class="sc">|&gt;</span> <span class="fu">filter</span>(Trimestre<span class="sc">==</span><span class="st">"Trim. 4 "</span>, Ciudad<span class="sc">%in%</span><span class="fu">c</span>(<span class="st">"Barrancabermeja"</span>))<span class="sc">|&gt;</span><span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(year)))<span class="sc">|&gt;</span> <span class="fu">select</span>(year,Traf_anual)<span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year,<span class="at">y=</span>Traf_anual,<span class="at">group =</span> <span class="dv">1</span>))<span class="sc">+</span><span class="fu">geom_line</span>(<span class="at">color=</span><span class="st">"blue3"</span>, <span class="at">size=</span><span class="fl">1.2</span>)<span class="sc">+</span><span class="fu">geom_point</span>(<span class="at">size=</span><span class="fl">2.5</span>, <span class="at">color=</span> <span class="st">"firebrick3"</span>)<span class="sc">+</span><span class="fu">theme_bw</span>() <span class="sc">+</span><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_comma</span>(<span class="at">accuracy =</span> <span class="dv">1</span>))<span class="sc">+</span><span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"lightblue4"</span>, <span class="at">colour =</span> <span class="st">"white"</span>))<span class="sc">+</span><span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Carga portuaria en Colombia 17-24"</span>,<span class="at">x=</span><span class="st">"Años"</span>,<span class="at">y=</span><span class="st">"Movimiento de carga"</span>)</span>
<span id="cb24-567"><a href="#cb24-567"></a>Traf.Marit <span class="ot">&lt;-</span> Traf.Marit<span class="sc">+</span><span class="fu">transition_reveal</span>(year)</span>
<span id="cb24-568"><a href="#cb24-568"></a>Traf.Marit</span>
<span id="cb24-569"><a href="#cb24-569"></a><span class="in">```</span></span>
<span id="cb24-570"><a href="#cb24-570"></a>:::</span>
<span id="cb24-571"><a href="#cb24-571"></a></span>
<span id="cb24-572"><a href="#cb24-572"></a>::: {.column width="65%"}</span>
<span id="cb24-573"><a href="#cb24-573"></a>El movimiento de carga portuaria en Colombia experimentó una caída entre 2018 y 2020, con una disminución particularmente pronunciada en 2019 debido a la pandemia. A partir de 2020, la actividad portuaria comenzó a recuperarse; sin embargo, en 2022 volvió a disminuir como consecuencia de la inflación mundial y la guerra en Ucrania, que encareció el transporte marítimo. A partir de finales de 2022, se registró una rápida recuperación del movimiento portuario, impulsada por la recuperación económica global y las sequías en el Canal de Panamá, que obligaron a varios barcos a dirigirse a puertos colombianos.</span>
<span id="cb24-574"><a href="#cb24-574"></a>:::</span>
<span id="cb24-575"><a href="#cb24-575"></a>Se estima que el tráfico de carga en Colombia podría disminuir en 2025 debido al Fenómeno del Niño, que aumenta los riesgos de navegación en ciertos meses del año y afecta la seguridad portuaria. Además, este fenómeno meteorológico podría reducir la cosecha de café, una de las principales exportaciones del país junto con el petróleo. La exportacion de crudo también podría verse afectada, debido al incremento en la producción de petróleo en Estados Unidos, principal comprador del crudo colombiano, impulsado por las políticas extractivas de la administración de Trump y a la disminución de precios de la OPEP+, lo que hace que el petróleo colombiano sea menos competitivo en el mercado internacional.</span>
<span id="cb24-576"><a href="#cb24-576"></a></span>
<span id="cb24-579"><a href="#cb24-579"></a><span class="in">```{r}</span></span>
<span id="cb24-580"><a href="#cb24-580"></a><span class="co">#| warning: false</span></span>
<span id="cb24-581"><a href="#cb24-581"></a><span class="co">#| code-fold: true</span></span>
<span id="cb24-582"><a href="#cb24-582"></a></span>
<span id="cb24-583"><a href="#cb24-583"></a>Traf.Marit <span class="ot">&lt;-</span> df_CargaPuerto<span class="sc">|&gt;</span><span class="fu">group_by</span>(year)<span class="sc">|&gt;</span><span class="fu">mutate</span>(<span class="at">Traf_anual=</span><span class="fu">sum</span>(Carga_Portuaria))<span class="sc">|&gt;</span> <span class="fu">filter</span>(Trimestre<span class="sc">==</span><span class="st">"Trim. 4 "</span>, Ciudad<span class="sc">%in%</span><span class="fu">c</span>(<span class="st">"Barrancabermeja"</span>))<span class="sc">|&gt;</span><span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(year)))<span class="sc">|&gt;</span> <span class="fu">select</span>(year,Traf_anual)<span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year,<span class="at">y=</span>Traf_anual,<span class="at">group =</span> <span class="dv">1</span>))<span class="sc">+</span><span class="fu">geom_line</span>(<span class="at">color=</span><span class="st">"blue3"</span>, <span class="at">size=</span><span class="fl">1.2</span>)<span class="sc">+</span><span class="fu">geom_point</span>(<span class="at">size=</span><span class="fl">2.5</span>, <span class="at">color=</span> <span class="st">"firebrick3"</span>)<span class="sc">+</span><span class="fu">theme_bw</span>() <span class="sc">+</span><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_comma</span>(<span class="at">accuracy =</span> <span class="dv">1</span>))<span class="sc">+</span><span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"lightblue4"</span>, <span class="at">colour =</span> <span class="st">"white"</span>))<span class="sc">+</span><span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Evolución de la carga portuario en puertos colombianos (2017-2024)"</span>,<span class="at">x=</span><span class="st">"Años"</span>,<span class="at">y=</span><span class="st">"Movimiento de carga"</span>)</span>
<span id="cb24-584"><a href="#cb24-584"></a></span>
<span id="cb24-585"><a href="#cb24-585"></a>Traf.Marit</span>
<span id="cb24-586"><a href="#cb24-586"></a><span class="in">```</span></span>
<span id="cb24-587"><a href="#cb24-587"></a></span>
<span id="cb24-588"><a href="#cb24-588"></a><span class="fu">## 6.1. Contribucion por costa en la carga portuaria</span></span>
<span id="cb24-589"><a href="#cb24-589"></a></span>
<span id="cb24-590"><a href="#cb24-590"></a>El movimiento de carga portuaria en Colombia se concentra principalmente en la costa atlántica, seguidas por la costa pacífica y los puertos fluviales. Esto se explica porque la población y la actividad económica del país se concentran en la región central y en la costa caribe, y estas zonas cuentan con mejores conexiones hacia el Atlántico. En contraste, la zona pacífica ha permanecido históricamente aislada debido a la presencia de la cordillera de los Andes.</span>
<span id="cb24-591"><a href="#cb24-591"></a></span>
<span id="cb24-592"><a href="#cb24-592"></a>Por su parte, los puertos fluviales mantienen su nivel de movimiento principalmente por la ciudad de Barrancabermeja, que alberga la refinería de petróleo más grande de Colombia y se encuentra cerca del yacimiento de petróleo del Magdalena Medio. Además, su ubicación en el río Magdalena, que desemboca en el Caribe, facilita el transporte de carga desde esta región, aunque su navegabilidad no es constante durante todo el año, lo que limita parcialmente el flujo portuario.</span>
<span id="cb24-593"><a href="#cb24-593"></a></span>
<span id="cb24-596"><a href="#cb24-596"></a><span class="in">```{r}</span></span>
<span id="cb24-597"><a href="#cb24-597"></a><span class="co">#| warning: false</span></span>
<span id="cb24-598"><a href="#cb24-598"></a><span class="co">#| code-fold: true</span></span>
<span id="cb24-599"><a href="#cb24-599"></a>Traf.Marit <span class="ot">&lt;-</span> df_CargaPuerto<span class="sc">|&gt;</span><span class="fu">group_by</span>(year, Costa)<span class="sc">|&gt;</span><span class="fu">mutate</span>(<span class="at">Traf_anual=</span><span class="fu">sum</span>(Carga_Portuaria))<span class="sc">|&gt;</span> <span class="fu">filter</span>(Trimestre<span class="sc">==</span><span class="st">"Trim. 4 "</span>)<span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>year,<span class="at">y=</span>Traf_anual, <span class="at">fill =</span> Costa))<span class="sc">+</span><span class="fu">geom_col</span>()<span class="sc">+</span><span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_comma</span>(<span class="at">accuracy =</span> <span class="dv">1</span>))<span class="sc">+</span><span class="fu">theme_bw</span>()<span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Contribucion por costa en la evolución de la carga portuaria </span><span class="sc">\n</span><span class="st">en puertos colombianos (2017-2024)"</span>,<span class="at">x=</span><span class="st">"Años"</span>,<span class="at">y=</span><span class="st">"Movimiento de carga"</span>)<span class="sc">+</span><span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"lightyellow1"</span>, <span class="at">colour =</span> <span class="st">"white"</span>))</span>
<span id="cb24-600"><a href="#cb24-600"></a>Traf.Marit</span>
<span id="cb24-601"><a href="#cb24-601"></a><span class="in">```</span></span>
<span id="cb24-602"><a href="#cb24-602"></a>---</span>
<span id="cb24-603"><a href="#cb24-603"></a></span>
<span id="cb24-604"><a href="#cb24-604"></a><span class="fu"># 7. Exportaciones e Importaciones</span></span>
<span id="cb24-605"><a href="#cb24-605"></a></span>
<span id="cb24-606"><a href="#cb24-606"></a>Para este apartado nos centraremos en el dataframe <span class="in">`df_TM_Puerto`</span>, que contiene los datos de tonelaje desglosados por tipo de movimiento; a partir de él generamos el gráfico en el que se puede ver la diferencia entre importaciones y exportaciones marítimas del país .</span>
<span id="cb24-607"><a href="#cb24-607"></a></span>
<span id="cb24-608"><a href="#cb24-608"></a>**Evolución de la Balanza Comercial (Interactiva)**</span>
<span id="cb24-609"><a href="#cb24-609"></a></span>
<span id="cb24-612"><a href="#cb24-612"></a><span class="in">```{r}</span></span>
<span id="cb24-613"><a href="#cb24-613"></a><span class="co">#| label: grafico-balance-anual-interactivo</span></span>
<span id="cb24-614"><a href="#cb24-614"></a><span class="co">#| code-fold: true</span></span>
<span id="cb24-615"><a href="#cb24-615"></a><span class="co">#| warning: false</span></span>
<span id="cb24-616"><a href="#cb24-616"></a><span class="co">#| message: false</span></span>
<span id="cb24-617"><a href="#cb24-617"></a><span class="co">#| fig-cap: "Evolución Interactiva de las Toneladas Exportadas vs. Importadas"</span></span>
<span id="cb24-618"><a href="#cb24-618"></a><span class="co">#| fig-width: 4 </span></span>
<span id="cb24-619"><a href="#cb24-619"></a><span class="co">#| fig-height: 3</span></span>
<span id="cb24-620"><a href="#cb24-620"></a><span class="fu">library</span>(plotly) </span>
<span id="cb24-621"><a href="#cb24-621"></a></span>
<span id="cb24-622"><a href="#cb24-622"></a><span class="co"># 1. CREACIÓN Y LIMPIEZA DE df_comercio (a partir df_TM_Puerto)</span></span>
<span id="cb24-623"><a href="#cb24-623"></a>df_comercio <span class="ot">&lt;-</span> df_TM_Puerto <span class="sc">%&gt;%</span> </span>
<span id="cb24-624"><a href="#cb24-624"></a>  <span class="fu">select</span>(zona_portuaria, anno_vigencia, exportacion, importacion) <span class="sc">%&gt;%</span></span>
<span id="cb24-625"><a href="#cb24-625"></a>  <span class="fu">rename</span>(<span class="at">Year =</span> anno_vigencia, <span class="at">Zona =</span> zona_portuaria) <span class="sc">%&gt;%</span></span>
<span id="cb24-626"><a href="#cb24-626"></a>  </span>
<span id="cb24-627"><a href="#cb24-627"></a>  <span class="co"># Convertir las columnas 'exportacion' e 'importacion' en filas</span></span>
<span id="cb24-628"><a href="#cb24-628"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb24-629"><a href="#cb24-629"></a>    <span class="at">cols =</span> <span class="fu">c</span>(exportacion, importacion),</span>
<span id="cb24-630"><a href="#cb24-630"></a>    <span class="at">names_to =</span> <span class="st">"Movimiento"</span>,</span>
<span id="cb24-631"><a href="#cb24-631"></a>    <span class="at">values_to =</span> <span class="st">"Total_Ton"</span></span>
<span id="cb24-632"><a href="#cb24-632"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb24-633"><a href="#cb24-633"></a>  <span class="co"># eliminamos NAs</span></span>
<span id="cb24-634"><a href="#cb24-634"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Total_Ton), Total_Ton <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb24-635"><a href="#cb24-635"></a></span>
<span id="cb24-636"><a href="#cb24-636"></a><span class="co"># 2. CREACIÓN DEL DATAFRAME NECESARIO (df_evolucion_comercio)</span></span>
<span id="cb24-637"><a href="#cb24-637"></a>df_evolucion_comercio <span class="ot">&lt;-</span> df_comercio <span class="sc">%&gt;%</span></span>
<span id="cb24-638"><a href="#cb24-638"></a>  <span class="fu">group_by</span>(Year, Movimiento) <span class="sc">%&gt;%</span></span>
<span id="cb24-639"><a href="#cb24-639"></a>  <span class="fu">summarise</span>(<span class="at">Total_Ton =</span> <span class="fu">sum</span>(Total_Ton, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb24-640"><a href="#cb24-640"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb24-641"><a href="#cb24-641"></a></span>
<span id="cb24-642"><a href="#cb24-642"></a><span class="co"># 3. Crear el gráfico base con ggplot</span></span>
<span id="cb24-643"><a href="#cb24-643"></a>p_base_balanza <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_evolucion_comercio, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Total_Ton, <span class="at">color =</span> Movimiento,</span>
<span id="cb24-644"><a href="#cb24-644"></a>                                                <span class="at">text =</span> <span class="fu">paste</span>(<span class="st">"Año:"</span>, Year, <span class="st">"&lt;br&gt;"</span>,</span>
<span id="cb24-645"><a href="#cb24-645"></a>                                                             <span class="st">"Movimiento:"</span>, Movimiento, <span class="st">"&lt;br&gt;"</span>,</span>
<span id="cb24-646"><a href="#cb24-646"></a>                                                             <span class="st">"Toneladas:"</span>, scales<span class="sc">::</span><span class="fu">label_comma</span>()(Total_Ton)))) <span class="sc">+</span></span>
<span id="cb24-647"><a href="#cb24-647"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb24-648"><a href="#cb24-648"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb24-649"><a href="#cb24-649"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_comma</span>(<span class="at">scale =</span> <span class="fl">1e-6</span>, <span class="at">suffix =</span> <span class="st">" M"</span>)) <span class="sc">+</span></span>
<span id="cb24-650"><a href="#cb24-650"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"exportacion"</span> <span class="ot">=</span> <span class="st">"blue"</span>, <span class="st">"importacion"</span> <span class="ot">=</span> <span class="st">"red"</span>)) <span class="sc">+</span></span>
<span id="cb24-651"><a href="#cb24-651"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb24-652"><a href="#cb24-652"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Evolución Exportaciones vs Importaciones"</span>,</span>
<span id="cb24-653"><a href="#cb24-653"></a>       <span class="at">subtitle =</span> <span class="st">"Volumen en Millones de Toneladas por Año"</span>,</span>
<span id="cb24-654"><a href="#cb24-654"></a>       <span class="at">y =</span> <span class="st">"Millones de Toneladas"</span>,</span>
<span id="cb24-655"><a href="#cb24-655"></a>       <span class="at">x =</span> <span class="st">"Año"</span>,</span>
<span id="cb24-656"><a href="#cb24-656"></a>       <span class="at">color =</span> <span class="st">"Flujo"</span>) <span class="sc">+</span></span>
<span id="cb24-657"><a href="#cb24-657"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)</span>
<span id="cb24-658"><a href="#cb24-658"></a></span>
<span id="cb24-659"><a href="#cb24-659"></a><span class="co"># 4. Convertir a Plotly para hacerlo interactivo</span></span>
<span id="cb24-660"><a href="#cb24-660"></a><span class="fu">ggplotly</span>(p_base_balanza, <span class="at">tooltip =</span> <span class="st">"text"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-661"><a href="#cb24-661"></a>  <span class="fu">layout</span>(<span class="at">hovermode =</span> <span class="st">"x unified"</span>)</span>
<span id="cb24-662"><a href="#cb24-662"></a><span class="in">```</span></span>
<span id="cb24-663"><a href="#cb24-663"></a></span>
<span id="cb24-664"><a href="#cb24-664"></a></span>
<span id="cb24-665"><a href="#cb24-665"></a><span class="ss">* </span>**Especialización Portuaria Interactiva: ¿Quién Exporta y Quién Importa?**</span>
<span id="cb24-666"><a href="#cb24-666"></a></span>
<span id="cb24-667"><a href="#cb24-667"></a>Identificamos los puertos que lideran cada actividad, observando dónde se concentra </span>
<span id="cb24-668"><a href="#cb24-668"></a>la mayor actividad exportadora e importadora del país.</span>
<span id="cb24-669"><a href="#cb24-669"></a></span>
<span id="cb24-670"><a href="#cb24-670"></a></span>
<span id="cb24-673"><a href="#cb24-673"></a><span class="in">```{r}</span></span>
<span id="cb24-674"><a href="#cb24-674"></a><span class="co">#| label: grafico-top-puertos-interactivo</span></span>
<span id="cb24-675"><a href="#cb24-675"></a><span class="co">#| code-fold: true</span></span>
<span id="cb24-676"><a href="#cb24-676"></a><span class="co">#| warning: false</span></span>
<span id="cb24-677"><a href="#cb24-677"></a><span class="co">#| message: false</span></span>
<span id="cb24-678"><a href="#cb24-678"></a><span class="co">#| fig-cap: "Top 5 Zonas Portuarias Interactivas: Perfil Exportador vs. Importador"</span></span>
<span id="cb24-679"><a href="#cb24-679"></a><span class="co">#| fig-width: 4 </span></span>
<span id="cb24-680"><a href="#cb24-680"></a><span class="co">#| fig-height: 3</span></span>
<span id="cb24-681"><a href="#cb24-681"></a></span>
<span id="cb24-682"><a href="#cb24-682"></a><span class="co"># 1. CREACIÓN Y LIMPIEZA DE df_comercio </span></span>
<span id="cb24-683"><a href="#cb24-683"></a>df_comercio <span class="ot">&lt;-</span> df_TM_Puerto <span class="sc">%&gt;%</span></span>
<span id="cb24-684"><a href="#cb24-684"></a>  <span class="fu">select</span>(zona_portuaria, anno_vigencia, exportacion, importacion) <span class="sc">%&gt;%</span></span>
<span id="cb24-685"><a href="#cb24-685"></a>  <span class="fu">rename</span>(<span class="at">Year =</span> anno_vigencia, <span class="at">Zona =</span> zona_portuaria) <span class="sc">%&gt;%</span></span>
<span id="cb24-686"><a href="#cb24-686"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb24-687"><a href="#cb24-687"></a>    <span class="at">cols =</span> <span class="fu">c</span>(exportacion, importacion),</span>
<span id="cb24-688"><a href="#cb24-688"></a>    <span class="at">names_to =</span> <span class="st">"Movimiento"</span>,</span>
<span id="cb24-689"><a href="#cb24-689"></a>    <span class="at">values_to =</span> <span class="st">"Total_Ton"</span></span>
<span id="cb24-690"><a href="#cb24-690"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb24-691"><a href="#cb24-691"></a>  <span class="fu">mutate</span>(<span class="at">Total_Ton =</span> <span class="fu">as.numeric</span>(Total_Ton)) <span class="sc">%&gt;%</span></span>
<span id="cb24-692"><a href="#cb24-692"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Total_Ton), Total_Ton <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb24-693"><a href="#cb24-693"></a></span>
<span id="cb24-694"><a href="#cb24-694"></a><span class="co"># 2. CREACIÓN DEL DATAFRAME NECESARIO (df_puertos_ranking)</span></span>
<span id="cb24-695"><a href="#cb24-695"></a>df_puertos_ranking <span class="ot">&lt;-</span> df_comercio <span class="sc">%&gt;%</span></span>
<span id="cb24-696"><a href="#cb24-696"></a>  <span class="fu">group_by</span>(Zona, Movimiento) <span class="sc">%&gt;%</span></span>
<span id="cb24-697"><a href="#cb24-697"></a>  <span class="fu">summarise</span>(<span class="at">Total_Ton =</span> <span class="fu">sum</span>(Total_Ton, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb24-698"><a href="#cb24-698"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb24-699"><a href="#cb24-699"></a></span>
<span id="cb24-700"><a href="#cb24-700"></a><span class="co"># 3. Sacar el Top 5 general (sumando todo)</span></span>
<span id="cb24-701"><a href="#cb24-701"></a>top_5_zonas <span class="ot">&lt;-</span> df_puertos_ranking <span class="sc">%&gt;%</span></span>
<span id="cb24-702"><a href="#cb24-702"></a>  <span class="fu">group_by</span>(Zona) <span class="sc">%&gt;%</span></span>
<span id="cb24-703"><a href="#cb24-703"></a>  <span class="fu">summarise</span>(<span class="at">Grand_Total =</span> <span class="fu">sum</span>(Total_Ton)) <span class="sc">%&gt;%</span></span>
<span id="cb24-704"><a href="#cb24-704"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Grand_Total)) <span class="sc">%&gt;%</span></span>
<span id="cb24-705"><a href="#cb24-705"></a>  <span class="fu">head</span>(<span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-706"><a href="#cb24-706"></a>  <span class="fu">pull</span>(Zona)</span>
<span id="cb24-707"><a href="#cb24-707"></a></span>
<span id="cb24-708"><a href="#cb24-708"></a><span class="co"># 4. Crear el gráfico con ggplot</span></span>
<span id="cb24-709"><a href="#cb24-709"></a>p_base_puertos <span class="ot">&lt;-</span> df_puertos_ranking <span class="sc">%&gt;%</span></span>
<span id="cb24-710"><a href="#cb24-710"></a>  <span class="fu">filter</span>(Zona <span class="sc">%in%</span> top_5_zonas) <span class="sc">%&gt;%</span></span>
<span id="cb24-711"><a href="#cb24-711"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Total_Ton, </span>
<span id="cb24-712"><a href="#cb24-712"></a>             <span class="at">y =</span> <span class="fu">reorder</span>(Zona, Total_Ton), </span>
<span id="cb24-713"><a href="#cb24-713"></a>             <span class="at">fill =</span> Movimiento,</span>
<span id="cb24-714"><a href="#cb24-714"></a>             <span class="at">text =</span> <span class="fu">paste</span>(<span class="st">"Puerto:"</span>, Zona, <span class="st">"&lt;br&gt;"</span>,</span>
<span id="cb24-715"><a href="#cb24-715"></a>                          <span class="st">"Flujo:"</span>, Movimiento, <span class="st">"&lt;br&gt;"</span>,</span>
<span id="cb24-716"><a href="#cb24-716"></a>                          <span class="st">"Volumen:"</span>, scales<span class="sc">::</span><span class="fu">label_comma</span>()(Total_Ton)))) <span class="sc">+</span></span>
<span id="cb24-717"><a href="#cb24-717"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span> </span>
<span id="cb24-718"><a href="#cb24-718"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_comma</span>(<span class="at">scale =</span> <span class="fl">1e-6</span>, <span class="at">suffix =</span> <span class="st">" M"</span>)) <span class="sc">+</span></span>
<span id="cb24-719"><a href="#cb24-719"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"exportacion"</span> <span class="ot">=</span> <span class="st">"blue"</span>, <span class="st">"importacion"</span> <span class="ot">=</span> <span class="st">"red"</span>)) <span class="sc">+</span></span>
<span id="cb24-720"><a href="#cb24-720"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb24-721"><a href="#cb24-721"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top 5 Zonas Portuarias: Perfil Exportador vs Importador"</span>,</span>
<span id="cb24-722"><a href="#cb24-722"></a>       <span class="at">subtitle =</span> <span class="st">"Acumulado histórico (Toneladas)"</span>,</span>
<span id="cb24-723"><a href="#cb24-723"></a>       <span class="at">x =</span> <span class="st">"Millones de Toneladas"</span>,</span>
<span id="cb24-724"><a href="#cb24-724"></a>       <span class="at">y =</span> <span class="st">"Zona Portuaria"</span>,</span>
<span id="cb24-725"><a href="#cb24-725"></a>       <span class="at">fill =</span> <span class="st">"Flujo"</span>)</span>
<span id="cb24-726"><a href="#cb24-726"></a></span>
<span id="cb24-727"><a href="#cb24-727"></a><span class="co"># 5. Convertir a Plotly para hacerlo interactivo</span></span>
<span id="cb24-728"><a href="#cb24-728"></a><span class="fu">ggplotly</span>(p_base_puertos, <span class="at">tooltip =</span> <span class="st">"text"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-729"><a href="#cb24-729"></a>  <span class="fu">layout</span>(<span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Zona Portuaria"</span>))</span>
<span id="cb24-730"><a href="#cb24-730"></a></span>
<span id="cb24-731"><a href="#cb24-731"></a><span class="in">```</span></span>
<span id="cb24-732"><a href="#cb24-732"></a></span>
<span id="cb24-733"><a href="#cb24-733"></a>**Conclusión Económica**</span>
<span id="cb24-734"><a href="#cb24-734"></a></span>
<span id="cb24-735"><a href="#cb24-735"></a>**Balanza Comercial, Flujos y Desafíos Estructurales**</span>
<span id="cb24-736"><a href="#cb24-736"></a></span>
<span id="cb24-737"><a href="#cb24-737"></a>Los datos analizados permiten extraer conclusiones fundamentales sobre la economía portuaria y las dinámicas comerciales de Colombia: como se observa en el primer gráfico, la línea de Exportaciones (Azul) se mantiene consistentemente por encima de la de Importaciones (Roja) en términos de volumen físico (toneladas).</span>
<span id="cb24-738"><a href="#cb24-738"></a></span>
<span id="cb24-739"><a href="#cb24-739"></a><span class="ss">* </span>**Interpretación:** Colombia es un país que, físicamente, envía al exterior mucha más materia de la que recibe. Esto es típico de economías basadas en commodities (carbón y petróleo), que son mercancías muy pesadas y voluminosas.</span>
<span id="cb24-740"><a href="#cb24-740"></a></span>
<span id="cb24-741"><a href="#cb24-741"></a><span class="ss">* </span>**La "Ilusión" del Valor:** Es importante notar que, aunque Colombia exporta más toneladas, esto no significa que gane más dinero de lo que lo que gasta. Colombia exporta toneladas de carbón (barato por kilo) e importa contenedores con tecnología y manufacturas (caras por kilo).</span>
<span id="cb24-742"><a href="#cb24-742"></a></span>
<span id="cb24-743"><a href="#cb24-743"></a>—</span>
<span id="cb24-744"><a href="#cb24-744"></a></span>
<span id="cb24-745"><a href="#cb24-745"></a>**Especialización Portuaria**</span>
<span id="cb24-746"><a href="#cb24-746"></a></span>
<span id="cb24-747"><a href="#cb24-747"></a>El gráfico de barras muestra una clara división del trabajo entre las zonas portuarias, reflejando su especialización económica:</span>
<span id="cb24-748"><a href="#cb24-748"></a></span>
<span id="cb24-749"><a href="#cb24-749"></a><span class="ss">* </span>**Puertos Exportadores de Materias Primas:** Puertos como Ciénaga o Guajira (Puerto Bolívar) son casi exclusivamente exportadores (salida de carbón). Su función está ligada directamente a la demanda energética global.</span>
<span id="cb24-750"><a href="#cb24-750"></a></span>
<span id="cb24-751"><a href="#cb24-751"></a><span class="ss">* </span>**Puertos Mixtos/Importadores:** Puertos como Buenaventura y Cartagena tienen un perfil más mixto o importador, siendo vitales para el abastecimiento interno del país (seguridad alimentaria y bienes de consumo).</span>
<span id="cb24-752"><a href="#cb24-752"></a></span>
<span id="cb24-753"><a href="#cb24-753"></a>---</span>
<span id="cb24-754"><a href="#cb24-754"></a></span>
<span id="cb24-755"><a href="#cb24-755"></a><span class="ss">* </span>**Resumen económico del apartado**</span>
<span id="cb24-756"><a href="#cb24-756"></a></span>
<span id="cb24-757"><a href="#cb24-757"></a>La salud del tráfico marítimo colombiano depende fuertemente de la demanda internacional de materias primas energéticas, lo cual asegura el volumen de exportación. Al mismo tiempo, el consumo interno sigue dependiendo de la eficiencia de los puertos del Caribe y Pacífico para traer productos manufacturados del exterior, lo cual se traduce en una dependencia estructural de las importaciones de alto valor.</span>
<span id="cb24-758"><a href="#cb24-758"></a></span>
<span id="cb24-759"><a href="#cb24-759"></a><span class="fu"># 8. Conclusión</span></span>
<span id="cb24-760"><a href="#cb24-760"></a></span>
<span id="cb24-761"><a href="#cb24-761"></a>Tras este análisis del tráfico marítimo colombiano confirmamos una estructura logística asimétrica, marcada por la dualidad entre la Costa Caribe y el Pacífico. El estudio geográfico validó la predominancia de la Costa Caribe como el principal centro portuario, mientras que el Pacífico depende críticamente de Buenaventura. Operacionalmente, se demostró que la mayoría de los arribos de buques son de tráfico nacional, y la composición de la flota se concentra en portacontenedores, graneleros y tanqueros, reflejando la especialización de la economía en commodities pesados y el manejo de contenedores.</span>
<span id="cb24-762"><a href="#cb24-762"></a>En términos de actividad económica, el sistema mostró que las exportaciones superan a las importaciones en volumen físico (toneladas), una característica esperable de una economía productora de materias primas. Sin embargo, esta actividad está sujeta a la volatilidad del mercado global, como se observó en la evolución temporal del tráfico, sensible a eventos como la pandemia y las crisis de precios. En definitiva, la resiliencia del sistema depende de la eficiencia de los puertos del Caribe para gestionar grandes volúmenes y la mitigación del riesgo en la conexión terrestre de la Costa Pacífica.</span>
<span id="cb24-763"><a href="#cb24-763"></a></span>
<span id="cb24-764"><a href="#cb24-764"></a><span class="fu"># 9. Biografia </span></span>
<span id="cb24-765"><a href="#cb24-765"></a></span>
<span id="cb24-766"><a href="#cb24-766"></a><span class="ss">- </span>Ministerio de Transporte de Colombia. (s.f.). Tráfico Portuario Marítimo en Colombia. Datos Abiertos Colombia. Recuperado de https://www.datos.gov.co/Transporte/Trafico-Portuario-Mar-timo-En-Colombia/5r3g-zv5z/about_data</span>
<span id="cb24-767"><a href="#cb24-767"></a></span>
<span id="cb24-768"><a href="#cb24-768"></a><span class="ss">- </span>Dirección General Marítima de Colombia (Dimar). (s.f.). Tráfico marítimo. Portal Marítimo Colombiano. Recuperado de https://www.dimar.mil.co/trafico-maritimo</span>
<span id="cb24-769"><a href="#cb24-769"></a></span>
<span id="cb24-770"><a href="#cb24-770"></a><span class="ss">- </span>Superintendencia de Transporte de Colombia. (s.f.). Estadísticas de Tráfico Portuario en Colombia. Supertransporte. Recuperado de https://www.supertransporte.gov.co/index.php/superintendencia-delegada-de-puertos/estadisticas-trafico-portuario-en-colombia/</span>
<span id="cb24-771"><a href="#cb24-771"></a></span>
<span id="cb24-772"><a href="#cb24-772"></a><span class="ss">- </span>Milenioscuro. (2022). Mapa de Colombia (topografía) <span class="co">[</span><span class="ot">Mapa</span><span class="co">]</span>. Wikimedia Commons. https://commons.wikimedia.org/w/index.php?curid=115522497</span>
<span id="cb24-773"><a href="#cb24-773"></a></span>
<span id="cb24-774"><a href="#cb24-774"></a><span class="ss">- </span>Eniol. (2013). Área Cultural Andina – División <span class="co">[</span><span class="ot">Mapa</span><span class="co">]</span>. Wikimedia Commons. https://commons.wikimedia.org/w/index.php?curid=25366386</span>
<span id="cb24-775"><a href="#cb24-775"></a></span>
<span id="cb24-776"><a href="#cb24-776"></a></span>
<span id="cb24-777"><a href="#cb24-777"></a></span>
<span id="cb24-778"><a href="#cb24-778"></a></span>
<span id="cb24-779"><a href="#cb24-779"></a></span>
</code></pre></div><button title="Copiar al portapapeles" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>© 2025 Yutao Henry Jiang Zheng | Lucas Osejo Martínez | Javier Arnau Basagoiti Montagut</p>
</div>   
    <div class="nav-footer-center">
<p>Hecho con <a href="https://quarto.org">Quarto</a></p>
</div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
<li class="nav-item compact">
    <a class="nav-link" href="https://github.com/YHJZ57">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:<yujiangz@alumni.uv.es">
      <i class="bi bi-envelope" role="img">
</i> 
    </a>
  </li>  
</ul>
</div>
  </div>
</footer><script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>


<script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>